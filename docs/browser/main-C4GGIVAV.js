import{A as un,a as P,b as pe,c as dD,d as ag,e as N,f as hD,g as Cl,h as fD,i as pD,j as gD,k as cg,l as mD,m as nc,n as ug,o as Tl,p as yD,q as vD,r as lg,s as Ke,t as Bi,u as Qn,v as bl,w as rc,x as _D,y as wD,z as Kr}from"./chunk-DA3O343V.js";function ED(n,e){return Object.is(n,e)}var ft=null,Al=!1,Sl=1,_r=Symbol("SIGNAL");function Ae(n){let e=ft;return ft=n,e}function ID(){return ft}var oc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fg(n){if(Al)throw new Error("");if(ft===null)return;ft.consumerOnSignalRead(n);let e=ft.nextProducerIndex++;if(Nl(ft),e<ft.producerNode.length&&ft.producerNode[e]!==n&&ic(ft)){let t=ft.producerNode[e];Rl(t,ft.producerIndexOfThis[e])}ft.producerNode[e]!==n&&(ft.producerNode[e]=n,ft.producerIndexOfThis[e]=ic(ft)?bD(n,ft,e):0),ft.producerLastReadVersion[e]=n.version}function EP(){Sl++}function DD(n){if(!(ic(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Sl)){if(!n.producerMustRecompute(n)&&!gg(n)){n.dirty=!1,n.lastCleanEpoch=Sl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Sl}}function CD(n){if(n.liveConsumerNode===void 0)return;let e=Al;Al=!0;try{for(let t of n.liveConsumerNode)t.dirty||IP(t)}finally{Al=e}}function TD(){return ft?.consumerAllowSignalWrites!==!1}function IP(n){n.dirty=!0,CD(n),n.consumerMarkedDirty?.(n)}function xl(n){return n&&(n.nextProducerIndex=0),Ae(n)}function pg(n,e){if(Ae(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ic(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Rl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function gg(n){Nl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(DD(t),r!==t.version))return!0}return!1}function mg(n){if(Nl(n),ic(n))for(let e=0;e<n.producerNode.length;e++)Rl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function bD(n,e,t){if(AD(n),n.liveConsumerNode.length===0&&SD(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=bD(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Rl(n,e){if(AD(n),n.liveConsumerNode.length===1&&SD(n))for(let r=0;r<n.producerNode.length;r++)Rl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Nl(i),i.producerIndexOfThis[r]=e}}function ic(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Nl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function AD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function SD(n){return n.producerNode!==void 0}function MD(n){let e=Object.create(DP);e.computation=n;let t=()=>{if(DD(e),fg(e),e.value===Ml)throw e.error;return e.value};return t[_r]=e,t}var dg=Symbol("UNSET"),hg=Symbol("COMPUTING"),Ml=Symbol("ERRORED"),DP=pe(P({},oc),{value:dg,dirty:!0,error:null,equal:ED,producerMustRecompute(n){return n.value===dg||n.value===hg},producerRecomputeValue(n){if(n.value===hg)throw new Error("Detected cycle in computations.");let e=n.value;n.value=hg;let t=xl(n),r;try{r=n.computation()}catch(i){r=Ml,n.error=i}finally{pg(n,t)}if(e!==dg&&e!==Ml&&r!==Ml&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function CP(){throw new Error}var xD=CP;function RD(){xD()}function ND(n){xD=n}var TP=null;function PD(n){let e=Object.create(OD);e.value=n;let t=()=>(fg(e),e.value);return t[_r]=e,t}function yg(n,e){TD()||RD(),n.equal(n.value,e)||(n.value=e,bP(n))}function kD(n,e){TD()||RD(),yg(n,e(n.value))}var OD=pe(P({},oc),{equal:ED,value:void 0});function bP(n){n.version++,EP(),CD(n),TP?.()}function se(n){return typeof n=="function"}function zo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Pl=zo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function $i(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Xe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(se(r))try{r()}catch(o){e=o instanceof Pl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{FD(o)}catch(s){e=e??[],s instanceof Pl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Pl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)FD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&$i(t,e)}remove(e){let{_finalizers:t}=this;t&&$i(t,e),e instanceof n&&e._removeParent(this)}};Xe.EMPTY=(()=>{let n=new Xe;return n.closed=!0,n})();var vg=Xe.EMPTY;function kl(n){return n instanceof Xe||n&&"closed"in n&&se(n.remove)&&se(n.add)&&se(n.unsubscribe)}function FD(n){se(n)?n():n.unsubscribe()}var xn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Wo={setTimeout(n,e,...t){let{delegate:r}=Wo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Wo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ol(n){Wo.setTimeout(()=>{let{onUnhandledError:e}=xn;if(e)e(n);else throw n})}function sc(){}var VD=_g("C",void 0,void 0);function LD(n){return _g("E",void 0,n)}function jD(n){return _g("N",n,void 0)}function _g(n,e,t){return{kind:n,value:e,error:t}}var Hi=null;function Ko(n){if(xn.useDeprecatedSynchronousErrorHandling){let e=!Hi;if(e&&(Hi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Hi;if(Hi=null,t)throw r}}else n()}function UD(n){xn.useDeprecatedSynchronousErrorHandling&&Hi&&(Hi.errorThrown=!0,Hi.error=n)}var qi=class extends Xe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,kl(e)&&e.add(this)):this.destination=MP}static create(e,t,r){return new wr(e,t,r)}next(e){this.isStopped?Eg(jD(e),this):this._next(e)}error(e){this.isStopped?Eg(LD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Eg(VD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},AP=Function.prototype.bind;function wg(n,e){return AP.call(n,e)}var Ig=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Fl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Fl(r)}else Fl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Fl(t)}}},wr=class extends qi{constructor(e,t,r){super();let i;if(se(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&xn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&wg(e.next,o),error:e.error&&wg(e.error,o),complete:e.complete&&wg(e.complete,o)}):i=e}this.destination=new Ig(i)}};function Fl(n){xn.useDeprecatedSynchronousErrorHandling?UD(n):Ol(n)}function SP(n){throw n}function Eg(n,e){let{onStoppedNotification:t}=xn;t&&Wo.setTimeout(()=>t(n,e))}var MP={closed:!0,next:sc,error:SP,complete:sc};var Qo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Lt(n){return n}function Dg(...n){return Cg(n)}function Cg(n){return n.length===0?Lt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ge=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=RP(t)?t:new wr(t,r,i);return Ko(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=BD(r),new r((i,o)=>{let s=new wr({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Qo](){return this}pipe(...t){return Cg(t)(this)}toPromise(t){return t=BD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function BD(n){var e;return(e=n??xn.Promise)!==null&&e!==void 0?e:Promise}function xP(n){return n&&se(n.next)&&se(n.error)&&se(n.complete)}function RP(n){return n&&n instanceof qi||xP(n)&&kl(n)}function Tg(n){return se(n?.lift)}function de(n){return e=>{if(Tg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(n,e,t,r,i){return new bg(n,e,t,r,i)}var bg=class extends qi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Zo(){return de((n,e)=>{let t=null;n._refCount++;let r=he(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Yo=class extends ge{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Tg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Xe;let t=this.getSubject();e.add(this.source.subscribe(he(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Xe.EMPTY)}return e}refCount(){return Zo()(this)}};var $D=zo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ze=(()=>{class n extends ge{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Vl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new $D}next(t){Ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?vg:(this.currentObservers=null,o.push(t),new Xe(()=>{this.currentObservers=null,$i(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ge;return t.source=this,t}}return n.create=(e,t)=>new Vl(e,t),n})(),Vl=class extends ze{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:vg}};var It=class extends ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ac={now(){return(ac.delegate||Date).now()},delegate:void 0};var Ll=class extends ze{constructor(e=1/0,t=1/0,r=ac){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var jl=class extends Xe{constructor(e,t){super()}schedule(e,t=0){return this}};var cc={setInterval(n,e,...t){let{delegate:r}=cc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=cc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Jo=class extends jl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return cc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&cc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,$i(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Xo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Xo.now=ac.now;var es=class extends Xo{constructor(e,t=Xo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var uc=new es(Jo);var Ul=class extends Jo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Bl=class extends es{};var Ag=new Bl(Ul);var jt=new ge(n=>n.complete());function HD(n){return n&&se(n.schedule)}function Sg(n){return n[n.length-1]}function $l(n){return se(Sg(n))?n.pop():void 0}function Zn(n){return HD(Sg(n))?n.pop():void 0}function qD(n,e){return typeof Sg(n)=="number"?n.pop():e}var Hl=n=>n&&typeof n.length=="number"&&typeof n!="function";function ql(n){return se(n?.then)}function Gl(n){return se(n[Qo])}function zl(n){return Symbol.asyncIterator&&se(n?.[Symbol.asyncIterator])}function Wl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function NP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Kl=NP();function Ql(n){return se(n?.[Kl])}function Zl(n){return fD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Cl(t.read());if(i)return yield Cl(void 0);yield yield Cl(r)}}finally{t.releaseLock()}})}function Yl(n){return se(n?.getReader)}function $e(n){if(n instanceof ge)return n;if(n!=null){if(Gl(n))return PP(n);if(Hl(n))return kP(n);if(ql(n))return OP(n);if(zl(n))return GD(n);if(Ql(n))return FP(n);if(Yl(n))return VP(n)}throw Wl(n)}function PP(n){return new ge(e=>{let t=n[Qo]();if(se(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function kP(n){return new ge(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function OP(n){return new ge(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ol)})}function FP(n){return new ge(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function GD(n){return new ge(e=>{LP(n,e).catch(t=>e.error(t))})}function VP(n){return GD(Zl(n))}function LP(n,e){var t,r,i,o;return hD(this,void 0,void 0,function*(){try{for(t=pD(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Zt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function wn(n,e=0){return de((t,r)=>{t.subscribe(he(r,i=>Zt(r,n,()=>r.next(i),e),()=>Zt(r,n,()=>r.complete(),e),i=>Zt(r,n,()=>r.error(i),e)))})}function Rn(n,e=0){return de((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function zD(n,e){return $e(n).pipe(Rn(e),wn(e))}function WD(n,e){return $e(n).pipe(Rn(e),wn(e))}function KD(n,e){return new ge(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function QD(n,e){return new ge(t=>{let r;return Zt(t,e,()=>{r=n[Kl](),Zt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>se(r?.return)&&r.return()})}function Jl(n,e){if(!n)throw new Error("Iterable cannot be null");return new ge(t=>{Zt(t,e,()=>{let r=n[Symbol.asyncIterator]();Zt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function ZD(n,e){return Jl(Zl(n),e)}function YD(n,e){if(n!=null){if(Gl(n))return zD(n,e);if(Hl(n))return KD(n,e);if(ql(n))return WD(n,e);if(zl(n))return Jl(n,e);if(Ql(n))return QD(n,e);if(Yl(n))return ZD(n,e)}throw Wl(n)}function De(n,e){return e?YD(n,e):$e(n)}function ee(...n){let e=Zn(n);return De(n,e)}function ts(n,e){let t=se(n)?n:()=>n,r=i=>i.error(t());return new ge(e?i=>e.schedule(r,0,i):r)}function Mg(n){return!!n&&(n instanceof ge||se(n.lift)&&se(n.subscribe))}var Er=zo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function K(n,e){return de((t,r)=>{let i=0;t.subscribe(he(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:jP}=Array;function UP(n,e){return jP(e)?n(...e):n(e)}function Xl(n){return K(e=>UP(n,e))}var{isArray:BP}=Array,{getPrototypeOf:$P,prototype:HP,keys:qP}=Object;function ed(n){if(n.length===1){let e=n[0];if(BP(e))return{args:e,keys:null};if(GP(e)){let t=qP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function GP(n){return n&&typeof n=="object"&&$P(n)===HP}function td(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function lc(...n){let e=Zn(n),t=$l(n),{args:r,keys:i}=ed(n);if(r.length===0)return De([],e);let o=new ge(zP(r,e,i?s=>td(i,s):Lt));return t?o.pipe(Xl(t)):o}function zP(n,e,t=Lt){return r=>{JD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)JD(e,()=>{let l=De(n[c],e),h=!1;l.subscribe(he(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function JD(n,e,t){n?Zt(t,n,e):e()}function XD(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},y=S=>l<r?D(S):c.push(S),D=S=>{o&&e.next(S),l++;let M=!1;$e(t(S,h++)).subscribe(he(e,j=>{i?.(j),o?y(j):e.next(j)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;c.length&&l<r;){let j=c.shift();s?Zt(e,s,()=>D(j)):D(j)}m()}catch(j){e.error(j)}}))};return n.subscribe(he(e,y,()=>{p=!0,m()})),()=>{a?.()}}function at(n,e,t=1/0){return se(e)?at((r,i)=>K((o,s)=>e(r,o,i,s))($e(n(r,i))),t):(typeof e=="number"&&(t=e),de((r,i)=>XD(r,i,n,t)))}function Qr(n=1/0){return at(Lt,n)}function e0(){return Qr(1)}function ns(...n){return e0()(De(n,Zn(n)))}function nd(n){return new ge(e=>{$e(n()).subscribe(e)})}function xg(...n){let e=$l(n),{args:t,keys:r}=ed(n),i=new ge(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let h=0;h<s;h++){let p=!1;$e(t[h]).subscribe(he(o,m=>{p||(p=!0,l--),a[h]=m},()=>c--,void 0,()=>{(!c||!p)&&(l||o.next(r?td(r,a):a),o.complete())}))}});return e?i.pipe(Xl(e)):i}function Rg(...n){let e=Zn(n),t=qD(n,1/0),r=n;return r.length?r.length===1?$e(r[0]):Qr(t)(De(r,e)):jt}function mt(n,e){return de((t,r)=>{let i=0;t.subscribe(he(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Zr(n){return de((e,t)=>{let r=null,i=!1,o;r=e.subscribe(he(t,void 0,void 0,s=>{o=$e(n(s,Zr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function t0(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(he(s,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Yr(n,e){return se(e)?at(n,e,1):at(n,1)}function Jr(n){return de((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ir(n){return n<=0?()=>jt:de((e,t)=>{let r=0;e.subscribe(he(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ng(n){return K(()=>n)}function Pg(n,e=Lt){return n=n??WP,de((t,r)=>{let i,o=!0;t.subscribe(he(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function WP(n,e){return n===e}function rd(n=KP){return de((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function KP(){return new Er}function rs(n){return de((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ln(n,e){let t=arguments.length>=2;return r=>r.pipe(n?mt((i,o)=>n(i,o,r)):Lt,Ir(1),t?Jr(e):rd(()=>new Er))}function is(n){return n<=0?()=>jt:de((e,t)=>{let r=[];e.subscribe(he(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function kg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?mt((i,o)=>n(i,o,r)):Lt,is(1),t?Jr(e):rd(()=>new Er))}function dc(){return de((n,e)=>{let t,r=!1;n.subscribe(he(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Gi(n,e){return de(t0(n,e,arguments.length>=2,!0))}function n0(n={}){let{connector:e=()=>new ze,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=c=void 0,h=p=!1},D=()=>{let S=s;y(),S?.unsubscribe()};return de((S,M)=>{l++,!p&&!h&&m();let j=c=c??e();M.add(()=>{l--,l===0&&!p&&!h&&(a=Og(D,i))}),j.subscribe(M),!s&&l>0&&(s=new wr({next:G=>j.next(G),error:G=>{p=!0,m(),a=Og(y,t,G),j.error(G)},complete:()=>{h=!0,m(),a=Og(y,r),j.complete()}}),$e(S).subscribe(s))})(o)}}function Og(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new wr({next:()=>{r.unsubscribe(),n()}});return $e(e(...t)).subscribe(r)}function id(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,n0({connector:()=>new Ll(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function zi(...n){let e=Zn(n);return de((t,r)=>{(e?ns(n,t,e):ns(n,t)).subscribe(r)})}function Qe(n,e){return de((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(he(r,c=>{i?.unsubscribe();let l=0,h=o++;$e(n(c,h)).subscribe(i=he(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function od(n,e){return se(e)?Qe(()=>n,e):Qe(()=>n)}function Fg(n){return de((e,t)=>{$e(n).subscribe(he(t,()=>t.complete(),sc)),!t.closed&&e.subscribe(t)})}function tt(n,e,t){let r=se(n)||e||t?{next:n,error:e,complete:t}:n;return r?de((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(he(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Lt}var q0="https://g.co/ng/security#xss",Y=class extends Error{constructor(e,t){super(Qd(e,t)),this.code=e}};function Qd(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Dc(n){return{toString:n}.toString()}var sd="__parameters__";function QP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function G0(n,e,t){return Dc(()=>{let r=QP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(sd)?c[sd]:Object.defineProperty(c,sd,{value:[]})[sd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var On=globalThis;function Le(n){for(let e in n)if(n[e]===Le)return e;throw Error("Could not find renamed property on target object.")}function ZP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Bt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Bt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function r0(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var YP=Le({__forward_ref__:Le});function Ds(n){return n.__forward_ref__=Ds,n.toString=function(){return Bt(this())},n}function Ut(n){return z0(n)?n():n}function z0(n){return typeof n=="function"&&n.hasOwnProperty(YP)&&n.__forward_ref__===Ds}function W(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function yt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Zd(n){return i0(n,K0)||i0(n,Q0)}function W0(n){return Zd(n)!==null}function i0(n,e){return n.hasOwnProperty(e)?n[e]:null}function JP(n){let e=n&&(n[K0]||n[Q0]);return e||null}function o0(n){return n&&(n.hasOwnProperty(s0)||n.hasOwnProperty(XP))?n[s0]:null}var K0=Le({\u0275prov:Le}),s0=Le({\u0275inj:Le}),Q0=Le({ngInjectableDef:Le}),XP=Le({ngInjectorDef:Le}),z=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=W({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Z0(n){return n&&!!n.\u0275providers}var ek=Le({\u0275cmp:Le}),tk=Le({\u0275dir:Le}),nk=Le({\u0275pipe:Le}),rk=Le({\u0275mod:Le}),vd=Le({\u0275fac:Le}),pc=Le({__NG_ELEMENT_ID__:Le}),a0=Le({__NG_ENV_ID__:Le});function Dr(n){return typeof n=="string"?n:n==null?"":String(n)}function ik(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Dr(n)}function ok(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Y(-200,n)}function Um(n,e){throw new Y(-201,!1)}var fe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(fe||{}),Jg;function Y0(){return Jg}function En(n){let e=Jg;return Jg=n,e}function J0(n,e,t){let r=Zd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&fe.Optional)return null;if(e!==void 0)return e;Um(n,"Injector")}var sk={},mc=sk,Xg="__NG_DI_FLAG__",_d="ngTempTokenPath",ak="ngTokenPath",ck=/\n/gm,uk="\u0275",c0="__source",us;function lk(){return us}function Xr(n){let e=us;return us=n,e}function dk(n,e=fe.Default){if(us===void 0)throw new Y(-203,!1);return us===null?J0(n,void 0,e):us.get(n,e&fe.Optional?null:void 0,e)}function F(n,e=fe.Default){return(Y0()||dk)(Ut(n),e)}function V(n,e=fe.Default){return F(n,Yd(e))}function Yd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function em(n){let e=[];for(let t=0;t<n.length;t++){let r=Ut(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Y(900,!1);let i,o=fe.Default;for(let s=0;s<r.length;s++){let a=r[s],c=hk(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(F(i,o))}else e.push(F(r))}return e}function X0(n,e){return n[Xg]=e,n.prototype[Xg]=e,n}function hk(n){return n[Xg]}function fk(n,e,t,r){let i=n[_d];throw e[c0]&&i.unshift(e[c0]),n.message=pk(`
`+n.message,i,t,r),n[ak]=i,n[_d]=null,n}function pk(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==uk?n.slice(2):n;let i=Bt(e);if(Array.isArray(e))i=e.map(Bt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Bt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(ck,`
  `)}`}var Cs=X0(G0("Optional"),8);var Bm=X0(G0("SkipSelf"),4);function ds(n,e){let t=n.hasOwnProperty(vd);return t?n[vd]:null}function $m(n,e){n.forEach(t=>Array.isArray(t)?$m(t,e):e(t))}function eC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function wd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function gk(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function mk(n,e,t){let r=Cc(n,e);return r>=0?n[r|1]=t:(r=~r,gk(n,r,e,t)),r}function Vg(n,e){let t=Cc(n,e);if(t>=0)return n[t|1]}function Cc(n,e){return yk(n,e,1)}function yk(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var hs={},dn=[],Ki=new z(""),tC=new z("",-1),nC=new z(""),Ed=class{get(e,t=mc){if(t===mc){let r=new Error(`NullInjectorError: No provider for ${Bt(e)}!`);throw r.name="NullInjectorError",r}return t}},rC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(rC||{}),Xn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Xn||{}),ti=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ti||{});function vk(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function tm(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];_k(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function iC(n){return n===3||n===4||n===6}function _k(n){return n.charCodeAt(0)===64}function yc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?u0(n,t,i,null,e[++r]):u0(n,t,i,null,null))}}return n}function u0(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var oC="ng-template";function wk(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&vk(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Hm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Hm(n){return n.type===4&&n.value!==oC}function Ek(n,e,t){let r=n.type===4&&!t?oC:n.value;return e===r}function Ik(n,e,t){let r=4,i=n.attrs,o=i!==null?Tk(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Nn(r)&&!Nn(c))return!1;if(s&&Nn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Ek(n,c,t)||c===""&&e.length===1){if(Nn(r))return!1;s=!0}}else if(r&8){if(i===null||!wk(n,i,c,t)){if(Nn(r))return!1;s=!0}}else{let l=e[++a],h=Dk(c,i,Hm(n),t);if(h===-1){if(Nn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Nn(r))return!1;s=!0}}}}return Nn(r)||s}function Nn(n){return(n&1)===0}function Dk(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return bk(e,n)}function Ck(n,e,t=!1){for(let r=0;r<e.length;r++)if(Ik(n,e[r],t))return!0;return!1}function Tk(n){for(let e=0;e<n.length;e++){let t=n[e];if(iC(t))return e}return n.length}function bk(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function l0(n,e){return n?":not("+e.trim()+")":e}function Ak(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Nn(s)&&(e+=l0(o,i),i=""),r=s,o=o||!Nn(r);t++}return i!==""&&(e+=l0(o,i)),e}function Sk(n){return n.map(Ak).join(",")}function Mk(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Nn(i))break;i=o}r++}return{attrs:e,classes:t}}function vt(n){return Dc(()=>{let e=lC(n),t=pe(P({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===rC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Xn.Emulated,styles:n.styles||dn,_:null,schemas:n.schemas||null,tView:null,id:""});dC(t);let r=n.dependencies;return t.directiveDefs=h0(r,!1),t.pipeDefs=h0(r,!0),t.id=Nk(t),t})}function xk(n){return ni(n)||sC(n)}function Rk(n){return n!==null}function _t(n){return Dc(()=>({type:n.type,bootstrap:n.bootstrap||dn,declarations:n.declarations||dn,imports:n.imports||dn,exports:n.exports||dn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function d0(n,e){if(n==null)return hs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=ti.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==ti.None?[r,a]:r,e[o]=s):t[o]=r}return t}function $t(n){return Dc(()=>{let e=lC(n);return dC(e),e})}function ni(n){return n[ek]||null}function sC(n){return n[tk]||null}function aC(n){return n[nk]||null}function cC(n){let e=ni(n)||sC(n)||aC(n);return e!==null?e.standalone:!1}function uC(n,e){let t=n[rk]||null;if(!t&&e===!0)throw new Error(`Type ${Bt(n)} does not have '\u0275mod' property.`);return t}function lC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||hs,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||dn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:d0(n.inputs,e),outputs:d0(n.outputs),debugInfo:null}}function dC(n){n.features?.forEach(e=>e(n))}function h0(n,e){if(!n)return null;let t=e?aC:xk;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(Rk)}function Nk(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Tc(n){return{\u0275providers:n}}function Pk(...n){return{\u0275providers:hC(!0,n),\u0275fromNgModule:!0}}function hC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return $m(e,s=>{let a=s;nm(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&fC(i,o),t}function fC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];qm(i,o=>{e(o,r)})}}function nm(n,e,t,r){if(n=Ut(n),!n)return!1;let i=null,o=o0(n),s=!o&&ni(n);if(!o&&!s){let c=n.ngModule;if(o=o0(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)nm(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{$m(o.imports,h=>{nm(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&fC(l,e)}if(!a){let l=ds(i)||(()=>new i);e({provide:i,useFactory:l,deps:dn},i),e({provide:nC,useValue:i,multi:!0},i),e({provide:Ki,useValue:()=>F(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;qm(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function qm(n,e){for(let t of n)Z0(t)&&(t=t.\u0275providers),Array.isArray(t)?qm(t,e):e(t)}var kk=Le({provide:String,useValue:Le});function pC(n){return n!==null&&typeof n=="object"&&kk in n}function Ok(n){return!!(n&&n.useExisting)}function Fk(n){return!!(n&&n.useFactory)}function fs(n){return typeof n=="function"}function Vk(n){return!!n.useClass}var Jd=new z(""),pd={},Lk={},Lg;function Gm(){return Lg===void 0&&(Lg=new Ed),Lg}var fn=class{},vc=class extends fn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,im(e,s=>this.processProvider(s)),this.records.set(tC,os(void 0,this)),i.has("environment")&&this.records.set(fn,os(void 0,this));let o=this.records.get(Jd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(nC,dn,fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ae(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ae(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Xr(this),r=En(void 0),i;try{return e()}finally{Xr(t),En(r)}}get(e,t=mc,r=fe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(a0))return e[a0](this);r=Yd(r);let i,o=Xr(this),s=En(void 0);try{if(!(r&fe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=Hk(e)&&Zd(e);l&&this.injectableDefInScope(l)?c=os(rm(e),pd):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&fe.Self?Gm():this.parent;return t=r&fe.Optional&&t===mc?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[_d]=a[_d]||[]).unshift(Bt(e)),o)throw a;return fk(a,e,"R3InjectorError",this.source)}else throw a}finally{En(s),Xr(o)}}resolveInjectorInitializers(){let e=Ae(null),t=Xr(this),r=En(void 0),i;try{let o=this.get(Ki,dn,fe.Self);for(let s of o)s()}finally{Xr(t),En(r),Ae(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Bt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Y(205,!1)}processProvider(e){e=Ut(e);let t=fs(e)?e:Ut(e&&e.provide),r=Uk(e);if(!fs(e)&&e.multi===!0){let i=this.records.get(t);i||(i=os(void 0,pd,!0),i.factory=()=>em(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ae(null);try{return t.value===pd&&(t.value=Lk,t.value=t.factory()),typeof t.value=="object"&&t.value&&$k(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ae(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ut(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function rm(n){let e=Zd(n),t=e!==null?e.factory:ds(n);if(t!==null)return t;if(n instanceof z)throw new Y(204,!1);if(n instanceof Function)return jk(n);throw new Y(204,!1)}function jk(n){if(n.length>0)throw new Y(204,!1);let t=JP(n);return t!==null?()=>t.factory(n):()=>new n}function Uk(n){if(pC(n))return os(void 0,n.useValue);{let e=gC(n);return os(e,pd)}}function gC(n,e,t){let r;if(fs(n)){let i=Ut(n);return ds(i)||rm(i)}else if(pC(n))r=()=>Ut(n.useValue);else if(Fk(n))r=()=>n.useFactory(...em(n.deps||[]));else if(Ok(n))r=()=>F(Ut(n.useExisting));else{let i=Ut(n&&(n.useClass||n.provide));if(Bk(n))r=()=>new i(...em(n.deps));else return ds(i)||rm(i)}return r}function os(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Bk(n){return!!n.deps}function $k(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Hk(n){return typeof n=="function"||typeof n=="object"&&n instanceof z}function im(n,e){for(let t of n)Array.isArray(t)?im(t,e):t&&Z0(t)?im(t.\u0275providers,e):e(t)}function Ln(n,e){n instanceof vc&&n.assertNotDestroyed();let t,r=Xr(n),i=En(void 0);try{return e()}finally{Xr(r),En(i)}}function mC(){return Y0()!==void 0||lk()!=null}function qk(n){if(!mC())throw new Y(-203,!1)}function Gk(n){let e=On.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function zk(n){return typeof n=="function"}var pn=0,me=1,ae=2,Rt=3,Pn=4,jn=5,er=6,Id=7,Fn=8,ps=9,tr=10,He=11,_c=12,f0=13,Ts=14,Dn=15,gs=16,ss=17,ms=18,Xd=19,yC=20,ei=21,jg=22,In=23,Yt=25,vC=1,wc=6,Cr=7,Dd=8,Cd=9,hn=10,Td=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Td||{});function kn(n){return Array.isArray(n)&&typeof n[vC]=="object"}function nr(n){return Array.isArray(n)&&n[vC]===!0}function _C(n){return(n.flags&4)!==0}function bc(n){return n.componentOffset>-1}function zm(n){return(n.flags&1)===1}function ri(n){return!!n.template}function bd(n){return(n[ae]&512)!==0}var om=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function wC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function to(){return EC}function EC(n){return n.type.prototype.ngOnChanges&&(n.setInput=Kk),Wk}to.ngInherit=!0;function Wk(){let n=DC(this),e=n?.current;if(e){let t=n.previous;if(t===hs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Kk(n,e,t,r,i){let o=this.declaredInputs[r],s=DC(n)||Qk(n,{previous:hs,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new om(l&&l.currentValue,t,c===hs),wC(n,e,i,t)}var IC="__ngSimpleChanges__";function DC(n){return n[IC]||null}function Qk(n,e){return n[IC]=e}var p0=null;var Yn=function(n,e,t){p0?.(n,e,t)},Zk="svg",Yk="math";function Vn(n){for(;Array.isArray(n);)n=n[pn];return n}function CC(n,e){return Vn(e[n])}function gn(n,e){return Vn(e[n.index])}function TC(n,e){return n.data[e]}function si(n,e){let t=e[n];return kn(t)?t:t[pn]}function Wm(n){return(n[ae]&128)===128}function Jk(n){return nr(n[Rt])}function Ad(n,e){return e==null?null:n[e]}function bC(n){n[ss]=0}function AC(n){n[ae]&1024||(n[ae]|=1024,Wm(n)&&th(n))}function Xk(n,e){for(;n>0;)e=e[Ts],n--;return e}function eh(n){return!!(n[ae]&9216||n[In]?.dirty)}function sm(n){n[tr].changeDetectionScheduler?.notify(8),n[ae]&64&&(n[ae]|=1024),eh(n)&&th(n)}function th(n){n[tr].changeDetectionScheduler?.notify(0);let e=Qi(n);for(;e!==null&&!(e[ae]&8192||(e[ae]|=8192,!Wm(e)));)e=Qi(e)}function SC(n,e){if((n[ae]&256)===256)throw new Y(911,!1);n[ei]===null&&(n[ei]=[]),n[ei].push(e)}function e1(n,e){if(n[ei]===null)return;let t=n[ei].indexOf(e);t!==-1&&n[ei].splice(t,1)}function Qi(n){let e=n[Rt];return nr(e)?e[Rt]:e}var ye={lFrame:LC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var MC=!1;function t1(){return ye.lFrame.elementDepthCount}function n1(){ye.lFrame.elementDepthCount++}function r1(){ye.lFrame.elementDepthCount--}function xC(){return ye.bindingsEnabled}function Ac(){return ye.skipHydrationRootTNode!==null}function i1(n){return ye.skipHydrationRootTNode===n}function o1(n){ye.skipHydrationRootTNode=n}function s1(){ye.skipHydrationRootTNode=null}function Fe(){return ye.lFrame.lView}function Xt(){return ye.lFrame.tView}function _e(n){return ye.lFrame.contextLView=n,n[Fn]}function we(n){return ye.lFrame.contextLView=null,n}function Ht(){let n=RC();for(;n!==null&&n.type===64;)n=n.parent;return n}function RC(){return ye.lFrame.currentTNode}function a1(){let n=ye.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Sc(n,e){let t=ye.lFrame;t.currentTNode=n,t.isParent=e}function NC(){return ye.lFrame.isParent}function c1(){ye.lFrame.isParent=!1}function PC(){return MC}function g0(n){MC=n}function kC(){return ye.lFrame.bindingIndex}function u1(n){return ye.lFrame.bindingIndex=n}function nh(){return ye.lFrame.bindingIndex++}function Km(n){let e=ye.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function l1(){return ye.lFrame.inI18n}function d1(n,e){let t=ye.lFrame;t.bindingIndex=t.bindingRootIndex=n,am(e)}function h1(){return ye.lFrame.currentDirectiveIndex}function am(n){ye.lFrame.currentDirectiveIndex=n}function f1(n){let e=ye.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function OC(n){ye.lFrame.currentQueryIndex=n}function p1(n){let e=n[me];return e.type===2?e.declTNode:e.type===1?n[jn]:null}function FC(n,e,t){if(t&fe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&fe.Host);)if(i=p1(o),i===null||(o=o[Ts],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ye.lFrame=VC();return r.currentTNode=e,r.lView=n,!0}function Qm(n){let e=VC(),t=n[me];ye.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function VC(){let n=ye.lFrame,e=n===null?null:n.child;return e===null?LC(n):e}function LC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function jC(){let n=ye.lFrame;return ye.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var UC=jC;function Zm(){let n=jC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function g1(n){return(ye.lFrame.contextLView=Xk(n,ye.lFrame.contextLView))[Fn]}function ai(){return ye.lFrame.selectedIndex}function Zi(n){ye.lFrame.selectedIndex=n}function rh(){let n=ye.lFrame;return TC(n.tView,n.selectedIndex)}function BC(){return ye.lFrame.currentNamespace}var $C=!0;function Ym(){return $C}function ci(n){$C=n}function m1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=EC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Jm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function gd(n,e,t){HC(n,e,3,t)}function md(n,e,t,r){(n[ae]&3)===t&&HC(n,e,t,r)}function Ug(n,e){let t=n[ae];(t&3)===e&&(t&=16383,t+=1,n[ae]=t)}function HC(n,e,t,r){let i=r!==void 0?n[ss]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[ss]+=65536),(a<o||o==-1)&&(y1(n,t,e,c),n[ss]=(n[ss]&4294901760)+c+2),c++}function m0(n,e){Yn(4,n,e);let t=Ae(null);try{e.call(n)}finally{Ae(t),Yn(5,n,e)}}function y1(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ae]>>14<n[ss]>>16&&(n[ae]&3)===e&&(n[ae]+=16384,m0(a,o)):m0(a,o)}var ls=-1,Yi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function v1(n){return n instanceof Yi}function _1(n){return(n.flags&8)!==0}function w1(n){return(n.flags&16)!==0}var Bg={},cm=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Yd(r);let i=this.injector.get(e,Bg,r);return i!==Bg||t===Bg?i:this.parentInjector.get(e,t,r)}};function qC(n){return n!==ls}function Sd(n){return n&32767}function E1(n){return n>>16}function Md(n,e){let t=E1(n),r=e;for(;t>0;)r=r[Ts],t--;return r}var um=!0;function y0(n){let e=um;return um=n,e}var I1=256,GC=I1-1,zC=5,D1=0,Jn={};function C1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(pc)&&(r=t[pc]),r==null&&(r=t[pc]=D1++);let i=r&GC,o=1<<i;e.data[n+(i>>zC)]|=o}function xd(n,e){let t=WC(n,e);if(t!==-1)return t;let r=e[me];r.firstCreatePass&&(n.injectorIndex=e.length,$g(r.data,n),$g(e,null),$g(r.blueprint,null));let i=Xm(n,e),o=n.injectorIndex;if(qC(i)){let s=Sd(i),a=Md(i,e),c=a[me].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function $g(n,e){n.push(0,0,0,0,0,0,0,0,e)}function WC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Xm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=JC(i),r===null)return ls;if(t++,i=i[Ts],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ls}function lm(n,e,t){C1(n,e,t)}function T1(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(iC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function KC(n,e,t){if(t&fe.Optional||n!==void 0)return n;Um(e,"NodeInjector")}function QC(n,e,t,r){if(t&fe.Optional&&r===void 0&&(r=null),!(t&(fe.Self|fe.Host))){let i=n[ps],o=En(void 0);try{return i?i.get(e,r,t&fe.Optional):J0(e,r,t&fe.Optional)}finally{En(o)}}return KC(r,e,t)}function ZC(n,e,t,r=fe.Default,i){if(n!==null){if(e[ae]&2048&&!(r&fe.Self)){let s=x1(n,e,t,r,Jn);if(s!==Jn)return s}let o=YC(n,e,t,r,Jn);if(o!==Jn)return o}return QC(e,t,r,i)}function YC(n,e,t,r,i){let o=S1(t);if(typeof o=="function"){if(!FC(e,n,r))return r&fe.Host?KC(i,t,r):QC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&fe.Optional))Um(t);else return s}finally{UC()}}else if(typeof o=="number"){let s=null,a=WC(n,e),c=ls,l=r&fe.Host?e[Dn][jn]:null;for((a===-1||r&fe.SkipSelf)&&(c=a===-1?Xm(n,e):e[a+8],c===ls||!_0(r,!1)?a=-1:(s=e[me],a=Sd(c),e=Md(c,e)));a!==-1;){let h=e[me];if(v0(o,a,h.data)){let p=b1(a,e,t,s,r,l);if(p!==Jn)return p}c=e[a+8],c!==ls&&_0(r,e[me].data[a+8]===l)&&v0(o,a,e)?(s=h,a=Sd(c),e=Md(c,e)):a=-1}}return i}function b1(n,e,t,r,i,o){let s=e[me],a=s.data[n+8],c=r==null?bc(a)&&um:r!=s&&(a.type&3)!==0,l=i&fe.Host&&o===a,h=A1(a,s,t,c,l);return h!==null?ys(e,s,h,a):Jn}function A1(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let D=s[y];if(y<c&&t===D||y>=c&&D.type===t)return y}if(i){let y=s[c];if(y&&ri(y)&&y.type===t)return c}return null}function ys(n,e,t,r){let i=n[t],o=e.data;if(v1(i)){let s=i;s.resolving&&ok(ik(o[t]));let a=y0(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?En(s.injectImpl):null,h=FC(n,r,fe.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&m1(t,o[t],e)}finally{l!==null&&En(l),y0(a),s.resolving=!1,UC()}}return i}function S1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(pc)?n[pc]:void 0;return typeof e=="number"?e>=0?e&GC:M1:e}function v0(n,e,t){let r=1<<n;return!!(t[e+(n>>zC)]&r)}function _0(n,e){return!(n&fe.Self)&&!(n&fe.Host&&e)}var Wi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ZC(this._tNode,this._lView,e,Yd(r),t)}};function M1(){return new Wi(Ht(),Fe())}function Mc(n){return Dc(()=>{let e=n.prototype.constructor,t=e[vd]||dm(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[vd]||dm(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function dm(n){return z0(n)?()=>{let e=dm(Ut(n));return e&&e()}:ds(n)}function x1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ae]&2048&&!(s[ae]&512);){let a=YC(o,s,t,r|fe.Self,Jn);if(a!==Jn)return a;let c=o.parent;if(!c){let l=s[yC];if(l){let h=l.get(t,Jn,r);if(h!==Jn)return h}c=JC(s),s=s[Ts]}o=c}return i}function JC(n){let e=n[me],t=e.type;return t===2?e.declTNode:t===1?n[jn]:null}function ey(n){return T1(Ht(),n)}function w0(n,e=null,t=null,r){let i=XC(n,e,t,r);return i.resolveInjectorInitializers(),i}function XC(n,e=null,t=null,r,i=new Set){let o=[t||dn,Pk(n)];return r=r||(typeof n=="object"?void 0:Bt(n)),new vc(o,e||Gm(),r||null,i)}var Jt=class n{static{this.THROW_IF_NOT_FOUND=mc}static{this.NULL=new Ed}static create(e,t){if(Array.isArray(e))return w0({name:""},t,e,"");{let r=e.name??"";return w0({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=W({token:n,providedIn:"any",factory:()=>F(tC)})}static{this.__NG_ELEMENT_ID__=-1}};var R1=new z("");R1.__NG_ELEMENT_ID__=n=>{let e=Ht();if(e===null)throw new Y(204,!1);if(e.type&2)return e.value;if(n&fe.Optional)return null;throw new Y(204,!1)};var N1="ngOriginalError";function Hg(n){return n[N1]}var eT=!0,ty=(()=>{class n{static{this.__NG_ELEMENT_ID__=P1}static{this.__NG_ENV_ID__=t=>t}}return n})(),hm=class extends ty{constructor(e){super(),this._lView=e}onDestroy(e){return SC(this._lView,e),()=>e1(this._lView,e)}};function P1(){return new hm(Fe())}var no=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new It(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})();var fm=class extends ze{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,mC()&&(this.destroyRef=V(ty,{optional:!0})??void 0,this.pendingTasks=V(no,{optional:!0})??void 0)}emit(e){let t=Ae(null);try{super.next(e)}finally{Ae(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Xe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},ct=fm;function Rd(...n){}function tT(n){let e,t;function r(){n=Rd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function E0(n){return queueMicrotask(()=>n()),()=>{n=Rd}}var ny="isAngularZone",Nd=ny+"_ID",k1=0,Ie=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ct(!1),this.onMicrotaskEmpty=new ct(!1),this.onStable=new ct(!1),this.onError=new ct(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=eT}=e;if(typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,V1(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ny)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Y(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,O1,Rd,Rd);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},O1={};function ry(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function F1(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){tT(()=>{n.callbackScheduled=!1,pm(n),n.isCheckStableRunning=!0,ry(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),pm(n)}function V1(n){let e=()=>{F1(n)},t=k1++;n._inner=n._inner.fork({name:"angular",properties:{[ny]:!0,[Nd]:t,[Nd+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(L1(c))return r.invokeTask(o,s,a,c);try{return I0(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),D0(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return I0(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!j1(c)&&e(),D0(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,pm(n),ry(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function pm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function I0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function D0(n){n._nesting--,ry(n)}var Pd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ct,this.onMicrotaskEmpty=new ct,this.onStable=new ct,this.onError=new ct}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function L1(n){return nT(n,"__ignore_ng_zone__")}function j1(n){return nT(n,"__scheduler_tick__")}function nT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function U1(n="zone.js",e){return n==="noop"?new Pd:n==="zone.js"?new Ie(e):n}var Tr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Hg(e);for(;t&&Hg(t);)t=Hg(t);return t||null}},B1=new z("",{providedIn:"root",factory:()=>{let n=V(Ie),e=V(Tr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function $1(){return ih(Ht(),Fe())}function ih(n,e){return new ui(gn(n,e))}var ui=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=$1}}return n})();var H1="ngSkipHydration",q1="ngskiphydration";function rT(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===q1)return!0}return!1}function iT(n){return n.hasAttribute(H1)}function kd(n){return(n.flags&128)===128}function G1(n){if(kd(n))return!0;let e=n.parent;for(;e;){if(kd(n)||rT(e))return!0;e=e.parent}return!1}var oT=new Map,z1=0;function W1(){return z1++}function K1(n){oT.set(n[Xd],n)}function gm(n){oT.delete(n[Xd])}var C0="__ngContext__";function Ji(n,e){kn(e)?(n[C0]=e[Xd],K1(e)):n[C0]=e}function sT(n){return cT(n[_c])}function aT(n){return cT(n[Pn])}function cT(n){for(;n!==null&&!nr(n);)n=n[Pn];return n}var mm;function uT(n){mm=n}function oh(){if(mm!==void 0)return mm;if(typeof document<"u")return document;throw new Y(210,!1)}var xc=new z("",{providedIn:"root",factory:()=>Q1}),Q1="ng",iy=new z(""),Dt=new z("",{providedIn:"platform",factory:()=>"unknown"});var oy=new z("",{providedIn:"root",factory:()=>oh().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Z1(){let n=new bs;return V(Dt)==="browser"&&(n.store=Y1(oh(),V(xc))),n}var bs=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=W({token:n,providedIn:"root",factory:Z1})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function Y1(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var lT="h",dT="b",ym=function(n){return n.FirstChild="f",n.NextSibling="n",n}(ym||{}),J1="e",X1="t",sy="c",hT="x",Od="r",eO="i",tO="n",fT="d";var nO="__nghData__",pT=nO,qg="ngh",rO="nghm",gT=()=>null;function iO(n,e,t=!1){let r=n.getAttribute(qg);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,c={};if(r!==""){let h=e.get(bs,null,{optional:!0});h!==null&&(c=h.get(pT,[])[Number(r)])}let l={data:c,firstChild:n.firstChild??null};return t&&(l.firstChild=n,sh(l,0,n.nextSibling)),a?n.setAttribute(qg,a):n.removeAttribute(qg),l}function oO(){gT=iO}function ay(n,e,t=!1){return gT(n,e,t)}function sO(n){let e=n._lView;return e[me].type===2?null:(bd(e)&&(e=e[Yt]),e)}function aO(n){return n.textContent?.replace(/\s/gm,"")}function cO(n){let e=oh(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=aO(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function sh(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function vm(n,e){return n.segmentHeads?.[e]??null}function uO(n,e){let t=n.data,r=t[J1]?.[e]??null;return r===null&&t[sy]?.[e]&&(r=cy(n,e)),r}function mT(n,e){return n.data[sy]?.[e]??null}function cy(n,e){let t=mT(n,e)??[],r=0;for(let i of t)r+=i[Od]*(i[hT]??1);return r}function lO(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[fT];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Rc(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[fT];n.disconnectedNodes=t?new Set(t):null}return!!lO(n)?.has(e)}var ad=new z(""),yT=!1,vT=new z("",{providedIn:"root",factory:()=>yT});var cd;function dO(){if(cd===void 0&&(cd=null,On.trustedTypes))try{cd=On.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return cd}function T0(n){return dO()?.createScriptURL(n)||n}var Fd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${q0})`}};function Nc(n){return n instanceof Fd?n.changingThisBreaksApplicationSecurity:n}function uy(n,e){let t=hO(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${q0})`)}return t===e}function hO(n){return n instanceof Fd&&n.getTypeName()||null}var fO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function _T(n){return n=String(n),n.match(fO)?n:"unsafe:"+n}var ah=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ah||{});function pO(n){let e=ET();return e?e.sanitize(ah.URL,n)||"":uy(n,"URL")?Nc(n):_T(Dr(n))}function gO(n){let e=ET();if(e)return T0(e.sanitize(ah.RESOURCE_URL,n)||"");if(uy(n,"ResourceURL"))return T0(Nc(n));throw new Y(904,!1)}function mO(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?gO:pO}function wT(n,e,t){return mO(e,t)(n)}function ET(){let n=Fe();return n&&n[tr].sanitizer}var yO=/^>|^->|<!--|-->|--!>|<!-$/g,vO=/(<|>)/g,_O="\u200B$1\u200B";function wO(n){return n.replace(yO,e=>e.replace(vO,_O))}function EO(n){return n.ownerDocument.body}function IT(n){return n instanceof Function?n():n}function hc(n){return(n??V(Jt)).get(Dt)==="browser"}var br=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(br||{}),IO;function ly(n,e){return IO(n,e)}function as(n,e,t,r,i){if(r!=null){let o,s=!1;nr(r)?o=r:kn(r)&&(s=!0,r=r[pn]);let a=Vn(r);n===0&&t!==null?i==null?ST(e,t,a):Vd(e,t,a,i||null,!0):n===1&&t!==null?Vd(e,t,a,i||null,!0):n===2?py(e,a,s):n===3&&e.destroyNode(a),o!=null&&VO(e,n,o,t,i)}}function DT(n,e){return n.createText(e)}function DO(n,e,t){n.setValue(e,t)}function CT(n,e){return n.createComment(wO(e))}function dy(n,e,t){return n.createElement(e,t)}function CO(n,e){TT(n,e),e[pn]=null,e[jn]=null}function TO(n,e,t,r,i,o){r[pn]=i,r[jn]=e,ch(n,r,t,1,i,o)}function TT(n,e){e[tr].changeDetectionScheduler?.notify(9),ch(n,e,e[He],2,null,null)}function bO(n){let e=n[_c];if(!e)return Gg(n[me],n);for(;e;){let t=null;if(kn(e))t=e[_c];else{let r=e[hn];r&&(t=r)}if(!t){for(;e&&!e[Pn]&&e!==n;)kn(e)&&Gg(e[me],e),e=e[Rt];e===null&&(e=n),kn(e)&&Gg(e[me],e),t=e&&e[Pn]}e=t}}function AO(n,e,t,r){let i=hn+r,o=t.length;r>0&&(t[i-1][Pn]=e),r<o-hn?(e[Pn]=t[i],eC(t,hn+r,e)):(t.push(e),e[Pn]=null),e[Rt]=t;let s=e[gs];s!==null&&t!==s&&bT(s,e);let a=e[ms];a!==null&&a.insertView(n),sm(e),e[ae]|=128}function bT(n,e){let t=n[Cd],r=e[Rt];if(kn(r))n[ae]|=Td.HasTransplantedViews;else{let i=r[Rt][Dn];e[Dn]!==i&&(n[ae]|=Td.HasTransplantedViews)}t===null?n[Cd]=[e]:t.push(e)}function hy(n,e){let t=n[Cd],r=t.indexOf(e);t.splice(r,1)}function _m(n,e){if(n.length<=hn)return;let t=hn+e,r=n[t];if(r){let i=r[gs];i!==null&&i!==n&&hy(i,r),e>0&&(n[t-1][Pn]=r[Pn]);let o=wd(n,hn+e);CO(r[me],r);let s=o[ms];s!==null&&s.detachView(o[me]),r[Rt]=null,r[Pn]=null,r[ae]&=-129}return r}function AT(n,e){if(!(e[ae]&256)){let t=e[He];t.destroyNode&&ch(n,e,t,3,null,null),bO(e)}}function Gg(n,e){if(e[ae]&256)return;let t=Ae(null);try{e[ae]&=-129,e[ae]|=256,e[In]&&mg(e[In]),MO(n,e),SO(n,e),e[me].type===1&&e[He].destroy();let r=e[gs];if(r!==null&&nr(e[Rt])){r!==e[Rt]&&hy(r,e);let i=e[ms];i!==null&&i.detachView(n)}gm(e)}finally{Ae(t)}}function SO(n,e){let t=n.cleanup,r=e[Id];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[Id]=null);let i=e[ei];if(i!==null){e[ei]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function MO(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Yi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Yn(4,a,c);try{c.call(a)}finally{Yn(5,a,c)}}else{Yn(4,i,o);try{o.call(i)}finally{Yn(5,i,o)}}}}}function xO(n,e,t){return RO(n,e.parent,t)}function RO(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[pn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Xn.None||o===Xn.Emulated)return null}return gn(r,t)}}function Vd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function ST(n,e,t){n.appendChild(e,t)}function b0(n,e,t,r,i){r!==null?Vd(n,e,t,r,i):ST(n,e,t)}function MT(n,e){return n.parentNode(e)}function NO(n,e){return n.nextSibling(e)}function PO(n,e,t){return OO(n,e,t)}function kO(n,e,t){return n.type&40?gn(n,t):null}var OO=kO,A0;function fy(n,e,t,r){let i=xO(n,r,e),o=e[He],s=r.parent||e[jn],a=PO(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)b0(o,i,t[c],a,!1);else b0(o,i,t,a,!1);A0!==void 0&&A0(o,r,e,t,i)}function fc(n,e){if(e!==null){let t=e.type;if(t&3)return gn(e,n);if(t&4)return wm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return fc(n,r);{let i=n[e.index];return nr(i)?wm(-1,i):Vn(i)}}else{if(t&128)return fc(n,e.next);if(t&32)return ly(e,n)()||Vn(n[e.index]);{let r=xT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Qi(n[Dn]);return fc(i,r)}else return fc(n,e.next)}}}return null}function xT(n,e){if(e!==null){let r=n[Dn][jn],i=e.projection;return r.projection[i]}return null}function wm(n,e){let t=hn+n+1;if(t<e.length){let r=e[t],i=r[me].firstChild;if(i!==null)return fc(r,i)}return e[Cr]}function py(n,e,t){n.removeChild(null,e,t)}function RT(n){n.textContent=""}function gy(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Ji(Vn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)gy(n,e,t.child,r,i,o,!1),as(e,n,i,a,o);else if(c&32){let l=ly(t,r),h;for(;h=l();)as(e,n,i,h,o);as(e,n,i,a,o)}else c&16?FO(n,e,r,t,i,o):as(e,n,i,a,o);t=s?t.projectionNext:t.next}}function ch(n,e,t,r,i,o){gy(t,r,n.firstChild,e,i,o,!1)}function FO(n,e,t,r,i,o){let s=t[Dn],c=s[jn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];as(e,n,i,h,o)}else{let l=c,h=s[Rt];kd(r)&&(l.flags|=128),gy(n,e,l,h,i,o,!0)}}function VO(n,e,t,r,i){let o=t[Cr],s=Vn(t);o!==s&&as(e,n,r,o,i);for(let a=hn;a<t.length;a++){let c=t[a];ch(c[me],c,n,e,r,o)}}function LO(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:br.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=br.Important),n.setStyle(t,r,i,o))}}function jO(n,e,t){n.setAttribute(e,"style",t)}function NT(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function PT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&tm(n,e,r),i!==null&&NT(n,e,i),o!==null&&jO(n,e,o)}var Un={};function te(n=1){kT(Xt(),Fe(),ai()+n,!1)}function kT(n,e,t,r){if(!r)if((e[ae]&3)===3){let o=n.preOrderCheckHooks;o!==null&&gd(e,o,t)}else{let o=n.preOrderHooks;o!==null&&md(e,o,0,t)}Zi(t)}function oe(n,e=fe.Default){let t=Fe();if(t===null)return F(n,e);let r=Ht();return ZC(r,t,Ut(n),e)}function OT(){let n="invalid";throw new Error(n)}function FT(n,e,t,r,i,o){let s=Ae(null);try{let a=null;i&ti.SignalBased&&(a=e[r][_r]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&ti.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):wC(e,a,r,o)}finally{Ae(s)}}function UO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Zi(~i);else{let o=i,s=t[++r],a=t[++r];d1(s,o);let c=e[o];a(2,c)}}}finally{Zi(-1)}}function uh(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[pn]=i,p[ae]=r|4|128|8|64,(l!==null||n&&n[ae]&2048)&&(p[ae]|=2048),bC(p),p[Rt]=p[Ts]=n,p[Fn]=t,p[tr]=s||n&&n[tr],p[He]=a||n&&n[He],p[ps]=c||n&&n[ps]||null,p[jn]=o,p[Xd]=W1(),p[er]=h,p[yC]=l,p[Dn]=e.type==2?n[Dn]:p,p}function lh(n,e,t,r,i){let o=n.data[e];if(o===null)o=BO(n,e,t,r,i),l1()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=a1();o.injectorIndex=s===null?-1:s.injectorIndex}return Sc(o,!0),o}function BO(n,e,t,r,i){let o=RC(),s=NC(),a=s?o:o&&o.parent,c=n.data[e]=WO(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function VT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function LT(n,e,t,r,i){let o=ai(),s=r&2;try{Zi(-1),s&&e.length>Yt&&kT(n,e,Yt,!1),Yn(s?2:0,i),t(r,i)}finally{Zi(o),Yn(s?3:1,i)}}function jT(n,e,t){if(_C(e)){let r=Ae(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ae(r)}}}function UT(n,e,t){xC()&&(XO(n,e,t,gn(t,e)),(t.flags&64)===64&&zT(n,e,t))}function BT(n,e,t=gn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function $T(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=my(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function my(n,e,t,r,i,o,s,a,c,l,h){let p=Yt+r,m=p+i,y=$O(p,m),D=typeof l=="function"?l():l;return y[me]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:D,incompleteFirstPass:!1,ssrId:h}}function $O(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Un);return t}function HO(n,e,t,r){let o=r.get(vT,yT)||t===Xn.ShadowDom,s=n.selectRootElement(e,o);return qO(s),s}function qO(n){HT(n)}var HT=()=>null;function GO(n){iT(n)?RT(n):cO(n)}function zO(){HT=GO}function WO(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Ac()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function S0(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=ti.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?M0(r,t,l,a,c):M0(r,t,l,a)}return r}function M0(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function KO(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,y=m?m.inputs:null,D=m?m.outputs:null;c=S0(0,p.inputs,h,c,y),l=S0(1,p.outputs,h,l,D);let S=c!==null&&s!==null&&!Hm(e)?lF(c,h,s):null;a.push(S)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function QO(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function yy(n,e,t,r,i,o,s,a){let c=gn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(vy(n,t,h,r,i),bc(e)&&ZO(t,e.index)):e.type&3?(r=QO(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function ZO(n,e){let t=si(e,n);t[ae]&16||(t[ae]|=64)}function qT(n,e,t,r){if(xC()){let i=r===null?null:{"":-1},o=tF(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&GT(n,e,t,s,i,a),i&&nF(t,r,i)}t.mergedAttrs=yc(t.mergedAttrs,t.attrs)}function GT(n,e,t,r,i,o){for(let l=0;l<r.length;l++)lm(xd(t,e),n,r[l].type);iF(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=VT(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=yc(t.mergedAttrs,h.hostAttrs),oF(n,t,e,c,h),rF(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}KO(n,t,o)}function YO(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;JO(s)!=a&&s.push(a),s.push(t,r,o)}}function JO(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function XO(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;bc(t)&&sF(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||xd(t,e),Ji(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=ys(e,n,a,t);if(Ji(l,e),s!==null&&uF(e,a-i,l,c,t,s),ri(c)){let h=si(t.index,e);h[Fn]=ys(e,n,a,t)}}}function zT(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=h1();try{Zi(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];am(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&eF(c,l)}}finally{Zi(-1),am(s)}}function eF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function tF(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(Ck(e,s.selectors,!1))if(r||(r=[]),ri(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Em(n,e,c)}else r.unshift(s),Em(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Em(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function nF(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Y(-301,!1);r.push(e[i],o)}}}function rF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ri(e)&&(t[""]=n)}}function iF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function oF(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ds(i.type,!0)),s=new Yi(o,ri(i),oe);n.blueprint[r]=s,t[r]=s,YO(n,e,r,VT(n,t,i.hostVars,Un),i)}function sF(n,e,t){let r=gn(e,n),i=$T(t),o=n[tr].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=dh(n,uh(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function aF(n,e,t,r,i,o){let s=gn(n,e);cF(e[He],s,o,n.value,t,r,i)}function cF(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Dr(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function uF(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],h=s[a++],p=s[a++];FT(r,t,c,l,h,p)}}function lF(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function WT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function KT(n,e){let t=n.contentQueries;if(t!==null){let r=Ae(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];OC(o),a.contentQueries(2,e[s],s)}}}finally{Ae(r)}}}function dh(n,e){return n[_c]?n[f0][Pn]=e:n[_c]=e,n[f0]=e,e}function Im(n,e,t){OC(0);let r=Ae(null);try{e(n,t)}finally{Ae(r)}}function dF(n){return n[Id]??=[]}function hF(n){return n.cleanup??=[]}function QT(n,e){let t=n[ps],r=t?t.get(Tr,null):null;r&&r.handleError(e)}function vy(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],h=n.data[s];FT(h,l,r,a,c,i)}}function _y(n,e,t){let r=CC(e,n);DO(n[He],r,t)}function fF(n,e){let t=si(e,n),r=t[me];pF(r,t);let i=t[pn];i!==null&&t[er]===null&&(t[er]=ay(i,t[ps])),wy(r,t,t[Fn])}function pF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function wy(n,e,t){Qm(e);try{let r=n.viewQuery;r!==null&&Im(1,r,t);let i=n.template;i!==null&&LT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ms]?.finishViewCreation(n),n.staticContentQueries&&KT(n,e),n.staticViewQueries&&Im(2,n.viewQuery,t);let o=n.components;o!==null&&gF(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ae]&=-5,Zm()}}function gF(n,e){for(let t=0;t<e.length;t++)fF(n,e[t])}function mF(n,e,t,r){let i=Ae(null);try{let o=e.tView,a=n[ae]&4096?4096:16,c=uh(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[gs]=l;let h=n[ms];return h!==null&&(c[ms]=h.createEmbeddedView(o)),wy(o,c,t),c}finally{Ae(i)}}function x0(n,e){return!e||e.firstChild===null||kd(n)}function yF(n,e,t,r=!0){let i=e[me];if(AO(i,e,n,t),r){let s=wm(t,n),a=e[He],c=MT(a,n[Cr]);c!==null&&TO(i,n[jn],a,e,c,s)}let o=e[er];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Ld(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Vn(o)),nr(o)&&vF(o,r);let s=t.type;if(s&8)Ld(n,e,t.child,r);else if(s&32){let a=ly(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=xT(e,t);if(Array.isArray(a))r.push(...a);else{let c=Qi(e[Dn]);Ld(c[me],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function vF(n,e){for(let t=hn;t<n.length;t++){let r=n[t],i=r[me].firstChild;i!==null&&Ld(r[me],r,i,e)}n[Cr]!==n[pn]&&e.push(n[Cr])}var ZT=[];function _F(n){return n[In]??wF(n)}function wF(n){let e=ZT.pop()??Object.create(IF);return e.lView=n,e}function EF(n){n.lView[In]!==n&&(n.lView=null,ZT.push(n))}var IF=pe(P({},oc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{th(n.lView)},consumerOnSignalRead(){this.lView[In]=this}});function DF(n){let e=n[In]??Object.create(CF);return e.lView=n,e}var CF=pe(P({},oc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Qi(n.lView);for(;e&&!YT(e[me]);)e=Qi(e);e&&AC(e)},consumerOnSignalRead(){this.lView[In]=this}});function YT(n){return n.type!==2}var TF=100;function JT(n,e=!0,t=0){let r=n[tr],i=r.rendererFactory,o=!1;o||i.begin?.();try{bF(n,t)}catch(s){throw e&&QT(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function bF(n,e){let t=PC();try{g0(!0),Dm(n,e);let r=0;for(;eh(n);){if(r===TF)throw new Y(103,!1);r++,Dm(n,1)}}finally{g0(t)}}function AF(n,e,t,r){let i=e[ae];if((i&256)===256)return;let o=!1,s=!1;!o&&e[tr].inlineEffectRunner?.flush(),Qm(e);let a=!0,c=null,l=null;o||(YT(n)?(l=_F(e),c=xl(l)):ID()===null?(a=!1,l=DF(e),c=xl(l)):e[In]&&(mg(e[In]),e[In]=null));try{bC(e),u1(n.bindingStartIndex),t!==null&&LT(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&gd(e,y,null)}else{let y=n.preOrderHooks;y!==null&&md(e,y,0,null),Ug(e,0)}if(s||SF(e),XT(e,0),n.contentQueries!==null&&KT(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&gd(e,y)}else{let y=n.contentHooks;y!==null&&md(e,y,1),Ug(e,1)}UO(n,e);let p=n.components;p!==null&&tb(e,p,0);let m=n.viewQuery;if(m!==null&&Im(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&gd(e,y)}else{let y=n.viewHooks;y!==null&&md(e,y,2),Ug(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[jg]){for(let y of e[jg])y();e[jg]=null}o||(e[ae]&=-73)}catch(h){throw o||th(e),h}finally{l!==null&&(pg(l,c),a&&EF(l)),Zm()}}function XT(n,e){for(let t=sT(n);t!==null;t=aT(t))for(let r=hn;r<t.length;r++){let i=t[r];eb(i,e)}}function SF(n){for(let e=sT(n);e!==null;e=aT(e)){if(!(e[ae]&Td.HasTransplantedViews))continue;let t=e[Cd];for(let r=0;r<t.length;r++){let i=t[r];AC(i)}}}function MF(n,e,t){let r=si(e,n);eb(r,t)}function eb(n,e){Wm(n)&&Dm(n,e)}function Dm(n,e){let r=n[me],i=n[ae],o=n[In],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&gg(o)),s||=!1,o&&(o.dirty=!1),n[ae]&=-9217,s)AF(r,n,r.template,n[Fn]);else if(i&8192){XT(n,1);let a=r.components;a!==null&&tb(n,a,1)}}function tb(n,e,t){for(let r=0;r<e.length;r++)MF(n,e[r],t)}function Ey(n,e){let t=PC()?64:1088;for(n[tr].changeDetectionScheduler?.notify(e);n;){n[ae]|=t;let r=Qi(n);if(bd(n)&&!r)return n;n=r}return null}var Xi=class{get rootNodes(){let e=this._lView,t=e[me];return Ld(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Fn]}set context(e){this._lView[Fn]=e}get destroyed(){return(this._lView[ae]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Rt];if(nr(e)){let t=e[Dd],r=t?t.indexOf(this):-1;r>-1&&(_m(e,r),wd(t,r))}this._attachedToViewContainer=!1}AT(this._lView[me],this._lView)}onDestroy(e){SC(this._lView,e)}markForCheck(){Ey(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ae]&=-129}reattach(){sm(this._lView),this._lView[ae]|=128}detectChanges(){this._lView[ae]|=1024,JT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=bd(this._lView),t=this._lView[gs];t!==null&&!e&&hy(t,this._lView),TT(this._lView[me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=e;let t=bd(this._lView),r=this._lView[gs];r!==null&&!t&&bT(r,this._lView),sm(this._lView)}},hh=(()=>{class n{static{this.__NG_ELEMENT_ID__=NF}}return n})(),xF=hh,RF=class extends xF{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=mF(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Xi(i)}};function NF(){return PF(Ht(),Fe())}function PF(n,e){return n.type&4?new RF(e,n,ih(n,e)):null}var kF=new RegExp(`^(\\d+)*(${dT}|${lT})*(.*)`);function OF(n){let e=n.match(kF),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[c,l,h]of o.matchAll(/(f|n)(\d*)/g)){let p=parseInt(h,10)||1;a.push(l,p)}return[s,...a]}function FF(n){return!n.prev&&n.parent?.type===8}function zg(n){return n.index-Yt}function VF(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function fh(n,e,t,r){let i=zg(r),o=VF(n,i);if(o===void 0){let s=n.data[tO];if(s?.[i])o=jF(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(FF(r)){let l=zg(r.parent);o=vm(n,l)}else{let l=gn(c,t);if(a)o=l.firstChild;else{let h=zg(c),p=vm(n,h);if(c.type===2&&p){let y=cy(n,h)+1;o=ph(y,p)}else o=l.nextSibling}}}}return o}function ph(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function LF(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case ym.FirstChild:t=t.firstChild;break;case ym.NextSibling:t=t.nextSibling;break}}return t}function jF(n,e){let[t,...r]=OF(n),i;if(t===lT)i=e[Dn][pn];else if(t===dT)i=EO(e[Dn][pn]);else{let o=Number(t);i=Vn(e[o+Yt])}return LF(i,r)}var UF=!1;function BF(n){UF=n}function $F(n){let e=n[er];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[He];for(let o of r.values())HF(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function HF(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Yt);i&&py(n,i,!1)}}function nb(n){let e=n[wc]??[],r=n[Rt][He];for(let i of e)qF(i,r);n[wc]=dn}function qF(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Od];for(;t<i;){let o=r.nextSibling;py(e,r,!1),r=o,t++}}}function rb(n){nb(n);let e=n[pn];kn(e)&&jd(e);for(let t=hn;t<n.length;t++)jd(n[t])}function jd(n){$F(n);let e=n[me];for(let t=Yt;t<e.bindingStartIndex;t++)if(nr(n[t])){let r=n[t];rb(r)}else kn(n[t])&&jd(n[t])}function GF(n){let e=n._views;for(let t of e){let r=sO(t);r!==null&&r[pn]!==null&&(kn(r)?jd(r):rb(r))}}function zF(n,e){let t=[];for(let r of e)for(let i=0;i<(r[hT]??1);i++){let o={data:r,firstChild:null};r[Od]>0&&(o.firstChild=n,n=ph(r[Od],n)),t.push(o)}return[n,t]}var ib=()=>null;function WF(n,e){let t=n[wc];return!e||t===null||t.length===0?null:t[0].data[eO]===e?t.shift():(nb(n),null)}function KF(){ib=WF}function R0(n,e){return ib(n,e)}var vs=class{},Iy=new z("",{providedIn:"root",factory:()=>!1});var ob=new z(""),sb=new z(""),Cm=class{},Ud=class{};function QF(n){let e=Error(`No component factory found for ${Bt(n)}.`);return e[ZF]=n,e}var ZF="ngComponent";var Tm=class{resolveComponentFactory(e){throw QF(e)}},_s=class{static{this.NULL=new Tm}},ws=class{},ro=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>YF()}}return n})();function YF(){let n=Fe(),e=Ht(),t=si(e.index,n);return(kn(t)?t:n)[He]}var JF=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>null})}}return n})();function bm(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=r0(i,a);else if(o==2){let c=a,l=e[++s];r=r0(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Bd=class extends _s{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ni(e);return new Es(t,this.ngModule)}};function N0(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:ti.None;e?t.push({propName:s,templateName:r,isSignal:(a&ti.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function XF(n){let e=n.toLowerCase();return e==="svg"?Zk:e==="math"?Yk:null}var Es=class extends Ud{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=N0(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return N0(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Sk(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ae(null);try{i=i||this.ngModule;let s=i instanceof fn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new cm(e,s):e,c=a.get(ws,null);if(c===null)throw new Y(407,!1);let l=a.get(JF,null),h=a.get(vs,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",D=r?HO(m,r,this.componentDef.encapsulation,a):dy(m,y,XF(y)),S=512;this.componentDef.signals?S|=4096:this.componentDef.onPush||(S|=16);let M=null;D!==null&&(M=ay(D,a,!0));let j=my(0,null,null,1,0,null,null,null,null,null,null),G=uh(null,j,null,S,null,null,p,m,a,null,M);Qm(G);let L,Z,re=null;try{let X=this.componentDef,E,v=null;X.findHostDirectiveDefs?(E=[],v=new Map,X.findHostDirectiveDefs(X,E,v),E.push(X)):E=[X];let w=eV(G,D);re=tV(w,D,X,E,G,p,m),Z=TC(j,Yt),D&&iV(m,X,D,r),t!==void 0&&oV(Z,this.ngContentSelectors,t),L=rV(re,X,E,v,G,[sV]),wy(j,G,null)}catch(X){throw re!==null&&gm(re),gm(G),X}finally{Zm()}return new Am(this.componentType,L,ih(Z,G),G,Z)}finally{Ae(o)}}},Am=class extends Cm{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Xi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;vy(o[me],o,i,e,t),this.previousInputValues.set(e,t);let s=si(this._tNode.index,o);Ey(s,1)}}get injector(){return new Wi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function eV(n,e){let t=n[me],r=Yt;return n[r]=e,lh(t,r,2,"#host",null)}function tV(n,e,t,r,i,o,s){let a=i[me];nV(r,n,e,s);let c=null;e!==null&&(c=ay(e,i[ps]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=uh(i,$T(t),null,h,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&Em(a,n,r.length-1),dh(i,p),i[n.index]=p}function nV(n,e,t,r){for(let i of n)e.mergedAttrs=yc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(bm(e,e.mergedAttrs,!0),t!==null&&PT(r,t,e))}function rV(n,e,t,r,i,o){let s=Ht(),a=i[me],c=gn(s,i);GT(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=ys(i,a,p,s);Ji(m,i)}zT(a,i,s),c&&Ji(c,i);let l=ys(i,a,s.directiveStart+s.componentOffset,s);if(n[Fn]=i[Fn]=l,o!==null)for(let h of o)h(l,e);return jT(a,s,i),l}function iV(n,e,t,r){if(r)tm(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=Mk(e.selectors[0]);i&&tm(n,t,i),o&&o.length>0&&NT(n,t,o.join(" "))}}function oV(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function sV(){let n=Ht();Jm(Fe()[me],n)}var As=(()=>{class n{static{this.__NG_ELEMENT_ID__=aV}}return n})();function aV(){let n=Ht();return uV(n,Fe())}var cV=As,ab=class extends cV{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ih(this._hostTNode,this._hostLView)}get injector(){return new Wi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Xm(this._hostTNode,this._hostLView);if(qC(e)){let t=Md(e,this._hostLView),r=Sd(e),i=t[me].data[r+8];return new Wi(i,t)}else return new Wi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=P0(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-hn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=R0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,x0(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!zk(e),a;if(s)a=t;else{let D=t||{};a=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let c=s?e:new Es(ni(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let S=(s?l:this.parentInjector).get(fn,null);S&&(o=S)}let h=ni(c.componentType??{}),p=R0(this._lContainer,h?.id??null),m=p?.firstChild??null,y=c.create(l,i,m,o);return this.insertImpl(y.hostView,a,x0(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Jk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Rt],l=new ab(c,c[jn],c[Rt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return yF(s,i,o,r),e.attachToViewContainerRef(),eC(Wg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=P0(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=_m(this._lContainer,t);r&&(wd(Wg(this._lContainer),t),AT(r[me],r))}detach(e){let t=this._adjustIndex(e,-1),r=_m(this._lContainer,t);return r&&wd(Wg(this._lContainer),t)!=null?new Xi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function P0(n){return n[Dd]}function Wg(n){return n[Dd]||(n[Dd]=[])}function uV(n,e){let t,r=e[n.index];return nr(r)?t=r:(t=WT(r,e,null,n),e[n.index]=t,dh(e,t)),cb(t,e,n,r),new ab(t,n,e)}function lV(n,e){let t=n[He],r=t.createComment(""),i=gn(e,n),o=MT(t,i);return Vd(t,o,r,NO(t,i),!1),r}var cb=ub,Dy=()=>!1;function dV(n,e,t){return Dy(n,e,t)}function ub(n,e,t,r){if(n[Cr])return;let i;t.type&8?i=Vn(r):i=lV(e,t),n[Cr]=i}function hV(n,e,t){if(n[Cr]&&n[wc])return!0;let r=t[er],i=e.index-Yt;if(!r||G1(e)||Rc(r,i))return!1;let s=vm(r,i),a=r.data[sy]?.[i],[c,l]=zF(s,a);return n[Cr]=c,n[wc]=l,!0}function fV(n,e,t,r){Dy(n,t,e)||ub(n,e,t,r)}function pV(){cb=fV,Dy=hV}var k0=new Set;function li(n){k0.has(n)||(k0.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function gV(n){return typeof n=="function"&&n[_r]!==void 0}function Pc(n,e){li("NgSignals");let t=PD(n),r=t[_r];return e?.equal&&(r.equal=e.equal),t.set=i=>yg(r,i),t.update=i=>kD(r,i),t.asReadonly=mV.bind(t),t}function mV(){let n=this[_r];if(n.readonlyFn===void 0){let e=()=>this();e[_r]=n,n.readonlyFn=e}return n.readonlyFn}function lb(n){return gV(n)&&typeof n.set=="function"}function yV(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(EV))}return o}return $d.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(y=>{a[l+m]=y,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>IV(o));e.push(c)}),_V(),Promise.all(e).then(()=>{})}var $d=new Map,vV=new Set;function _V(){let n=$d;return $d=new Map,n}function wV(){return $d.size===0}function EV(n){return typeof n=="string"?n:n.text()}function IV(n){vV.delete(n)}function DV(n){return Object.getPrototypeOf(n.prototype).constructor}function di(n){let e=DV(n.type),t=!0,r=[n];for(;e;){let i;if(ri(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Y(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=ud(n.inputs),s.inputTransforms=ud(n.inputTransforms),s.declaredInputs=ud(n.declaredInputs),s.outputs=ud(n.outputs);let a=i.hostBindings;a&&SV(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&bV(n,c),l&&AV(n,l),CV(n,i),ZP(n.outputs,i.outputs),ri(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===di&&(t=!1)}}e=Object.getPrototypeOf(e)}TV(r)}function CV(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function TV(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=yc(i.hostAttrs,t=yc(t,i.hostAttrs))}}function ud(n){return n===hs?{}:n===dn?[]:n}function bV(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function AV(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function SV(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Cy(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var ii=class{},Ec=class{};var Hd=class extends ii{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Bd(this);let o=uC(e);this._bootstrapComponents=IT(o.bootstrap),this._r3Injector=XC(e,t,[{provide:ii,useValue:this},{provide:_s,useValue:this.componentFactoryResolver},...r],Bt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},qd=class extends Ec{constructor(e){super(),this.moduleType=e}create(e){return new Hd(this.moduleType,e,[])}};function MV(n,e,t){return new Hd(n,e,t,!1)}var Sm=class extends ii{constructor(e){super(),this.componentFactoryResolver=new Bd(this),this.instance=null;let t=new vc([...e.providers,{provide:ii,useValue:this},{provide:_s,useValue:this.componentFactoryResolver}],e.parent||Gm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function gh(n,e,t=null){return new Sm({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function db(n){return RV(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function xV(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function RV(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function oi(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function hb(n,e,t,r){let i=oi(n,e,t);return oi(n,e+1,r)||i}function NV(n,e,t,r,i){let o=hb(n,e,t,r);return oi(n,e+2,i)||o}function kc(n){return(n.flags&32)===32}function PV(n,e,t,r,i,o,s,a,c){let l=e.consts,h=lh(e,n,4,s||null,a||null);qT(e,t,h,Ad(l,c)),Jm(e,h);let p=h.tView=my(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function kV(n,e,t,r,i,o,s,a,c,l){let h=t+Yt,p=e.firstCreatePass?PV(h,e,n,r,i,o,s,a,c):e.data[h];Sc(p,!1);let m=fb(e,n,p,t);Ym()&&fy(e,n,m,p),Ji(m,n);let y=WT(m,n,m,p);return n[h]=y,dh(n,y),dV(y,p,n),zm(p)&&UT(e,n,p),c!=null&&BT(n,p,l),p}function Ct(n,e,t,r,i,o,s,a){let c=Fe(),l=Xt(),h=Ad(l.consts,o);return kV(c,l,n,e,t,r,i,h,s,a),Ct}var fb=pb;function pb(n,e,t,r){return ci(!0),e[He].createComment("")}function OV(n,e,t,r){let i=e[er],o=!i||Ac()||kc(t)||Rc(i,r);if(ci(o),o)return pb(n,e,t,r);let s=i.data[X1]?.[r]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=fh(i,n,e,t);sh(i,r,a);let c=cy(i,r);return ph(c,a)}function FV(){fb=OV}var cs=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(cs||{}),gb=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Mm=class n{constructor(){this.ngZone=V(Ie),this.scheduler=V(vs),this.errorHandler=V(Tr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[cs.EarlyRead,cs.Write,cs.MixedReadWrite,cs.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}},xm=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Ty(n,e){!e?.injector&&qk(Ty);let t=e?.injector??V(Jt);return hc(t)?(li("NgAfterNextRender"),LV(n,t,e,!0)):jV}function VV(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function LV(n,e,t,r){let i=e.get(gb);i.impl??=e.get(Mm);let o=t?.phase??cs.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(ty):null,a=new xm(i.impl,VV(n,o),r,s);return i.impl.register(a),a}var jV={destroy(){}};function mh(n,e,t,r){let i=Fe(),o=nh();if(oi(i,o,e)){let s=Xt(),a=rh();aF(a,i,n,e,t,r)}return mh}function mb(n,e,t,r){return oi(n,nh(),t)?e+Dr(t)+r:Un}function UV(n,e,t,r,i,o){let s=kC(),a=hb(n,s,t,i);return Km(2),a?e+Dr(t)+r+Dr(i)+o:Un}function BV(n,e,t,r,i,o,s,a){let c=kC(),l=NV(n,c,t,i,s);return Km(3),l?e+Dr(t)+r+Dr(i)+o+Dr(s)+a:Un}function ld(n,e){return n<<17|e<<2}function eo(n){return n>>17&32767}function $V(n){return(n&2)==2}function HV(n,e){return n&131071|e<<17}function Rm(n){return n|2}function Is(n){return(n&131068)>>2}function Kg(n,e){return n&-131069|e<<2}function qV(n){return(n&1)===1}function Nm(n){return n|1}function GV(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=eo(s),c=Is(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Cc(p,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let m=eo(n[a+1]);n[r+1]=ld(m,a),m!==0&&(n[m+1]=Kg(n[m+1],r)),n[a+1]=HV(n[a+1],r)}else n[r+1]=ld(a,0),a!==0&&(n[a+1]=Kg(n[a+1],r)),a=r;else n[r+1]=ld(c,0),a===0?a=r:n[c+1]=Kg(n[c+1],r),c=r;l&&(n[r+1]=Rm(n[r+1])),O0(n,h,r,!0),O0(n,h,r,!1),zV(e,h,n,r,o),s=ld(a,c),o?e.classBindings=s:e.styleBindings=s}function zV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Cc(o,e)>=0&&(t[r+1]=Nm(t[r+1]))}function O0(n,e,t,r){let i=n[t+1],o=e===null,s=r?eo(i):Is(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];WV(c,e)&&(a=!0,n[s+1]=r?Nm(l):Rm(l)),s=r?eo(l):Is(l)}a&&(n[t+1]=r?Rm(i):Nm(i))}function WV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Cc(n,e)>=0:!1}function nt(n,e,t){let r=Fe(),i=nh();if(oi(r,i,e)){let o=Xt(),s=rh();yy(o,s,r,n,e,r[He],t,!1)}return nt}function F0(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";vy(n,t,o[s],s,r)}function yh(n,e){return KV(n,e,null,!0),yh}function KV(n,e,t,r){let i=Fe(),o=Xt(),s=Km(2);if(o.firstUpdatePass&&ZV(o,n,s,r),e!==Un&&oi(i,s,e)){let a=o.data[ai()];tL(o,a,i,i[He],n,i[s+1]=nL(e,t),r,s)}}function QV(n,e){return e>=n.expandoStartIndex}function ZV(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ai()],s=QV(n,t);rL(o,r)&&e===null&&!s&&(e=!1),e=YV(i,o,e,r),GV(i,o,e,t,s,r)}}function YV(n,e,t,r){let i=f1(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Qg(null,n,e,t,r),t=Ic(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Qg(i,n,e,t,r),o===null){let c=JV(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Qg(null,n,e,c[1],r),c=Ic(c,e.attrs,r),XV(n,e,r,c))}else o=eL(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function JV(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Is(r)!==0)return n[eo(r)]}function XV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[eo(i)]=r}function eL(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ic(r,s,t)}return Ic(r,e.attrs,t)}function Qg(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ic(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ic(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),mk(n,s,t?!0:e[++o]))}return n===void 0?null:n}function tL(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=qV(l)?V0(c,e,t,i,Is(l),s):void 0;if(!Gd(h)){Gd(o)||$V(l)&&(o=V0(c,null,t,i,a,s));let p=CC(ai(),t);LO(r,s,p,i,o)}}function V0(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,m=t[i+1];m===Un&&(m=p?dn:void 0);let y=p?Vg(m,r):h===r?m:void 0;if(l&&!Gd(y)&&(y=Vg(c,r)),Gd(y)&&(a=y,s))return a;let D=n[i+1];i=s?eo(D):Is(D)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Vg(c,r))}return a}function Gd(n){return n!==void 0}function nL(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Bt(Nc(n)))),n}function rL(n,e){return(n.flags&(e?8:16))!==0}function iL(n,e,t,r,i,o){let s=e.consts,a=Ad(s,i),c=lh(e,n,2,r,a);return qT(e,t,c,Ad(s,o)),c.attrs!==null&&bm(c,c.attrs,!1),c.mergedAttrs!==null&&bm(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function U(n,e,t,r){let i=Fe(),o=Xt(),s=Yt+n,a=i[He],c=o.firstCreatePass?iL(s,o,i,e,t,r):o.data[s],l=yb(o,i,c,a,e,n);i[s]=l;let h=zm(c);return Sc(c,!0),PT(a,l,c),!kc(c)&&Ym()&&fy(o,i,l,c),t1()===0&&Ji(l,i),n1(),h&&(UT(o,i,c),jT(o,c,i)),r!==null&&BT(i,c),U}function B(){let n=Ht();NC()?c1():(n=n.parent,Sc(n,!1));let e=n;i1(e)&&s1(),r1();let t=Xt();return t.firstCreatePass&&(Jm(t,n),_C(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&_1(e)&&F0(t,e,Fe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&w1(e)&&F0(t,e,Fe(),e.stylesWithoutHost,!1),B}function ie(n,e,t,r){return U(n,e,t,r),B(),ie}var yb=(n,e,t,r,i,o)=>(ci(!0),dy(r,i,BC()));function oL(n,e,t,r,i,o){let s=e[er],a=!s||Ac()||kc(t)||Rc(s,o);if(ci(a),a)return dy(r,i,BC());let c=fh(s,n,e,t);return mT(s,o)&&sh(s,o,c.nextSibling),s&&(rT(t)||iT(c))&&bc(t)&&(o1(t),RT(c)),c}function sL(){yb=oL}var aL=(n,e,t,r)=>(ci(!0),CT(e[He],""));function cL(n,e,t,r){let i,o=e[er],s=!o||Ac()||Rc(o,r)||kc(t);if(ci(s),s)return CT(e[He],"");let a=fh(o,n,e,t),c=uO(o,r);return sh(o,r,a),i=ph(c,a),i}function uL(){aL=cL}function Nt(){return Fe()}var zd="en-US";var lL=zd;function dL(n){typeof n=="string"&&(lL=n.toLowerCase().replace(/_/g,"-"))}var hL=(n,e,t)=>{};function Ce(n,e,t,r){let i=Fe(),o=Xt(),s=Ht();return vb(o,i,i[He],s,n,e,r),Ce}function fL(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Id],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function vb(n,e,t,r,i,o,s){let a=zm(r),l=n.firstCreatePass&&hF(n),h=e[Fn],p=dF(e),m=!0;if(r.type&3||s){let S=gn(r,e),M=s?s(S):S,j=p.length,G=s?Z=>s(Vn(Z[r.index])):r.index,L=null;if(!s&&a&&(L=fL(n,e,i,r.index)),L!==null){let Z=L.__ngLastListenerFn__||L;Z.__ngNextListenerFn__=o,L.__ngLastListenerFn__=o,m=!1}else{o=j0(r,e,h,o),hL(S,i,o);let Z=t.listen(M,i,o);p.push(o,Z),l&&l.push(i,G,j,j+1)}}else o=j0(r,e,h,o);let y=r.outputs,D;if(m&&y!==null&&(D=y[i])){let S=D.length;if(S)for(let M=0;M<S;M+=2){let j=D[M],G=D[M+1],re=e[j][G].subscribe(o),X=p.length;p.push(o,re),l&&l.push(i,r.index,X,-(X+1))}}}function L0(n,e,t,r){let i=Ae(null);try{return Yn(6,e,t),t(r)!==!1}catch(o){return QT(n,o),!1}finally{Yn(7,e,t),Ae(i)}}function j0(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?si(n.index,e):e;Ey(s,5);let a=L0(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=L0(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function Ne(n=1){return g1(n)}function io(n,e,t){return _b(n,"",e,"",t),io}function _b(n,e,t,r,i){let o=Fe(),s=mb(o,e,t,r);if(s!==Un){let a=Xt(),c=rh();yy(a,c,o,n,s,o[He],i,!1)}return _b}function ve(n,e=""){let t=Fe(),r=Xt(),i=n+Yt,o=r.firstCreatePass?lh(r,i,1,e,null):r.data[i],s=wb(r,t,o,e,n);t[i]=s,Ym()&&fy(r,t,s,o),Sc(o,!1)}var wb=(n,e,t,r,i)=>(ci(!0),DT(e[He],r));function pL(n,e,t,r,i){let o=e[er],s=!o||Ac()||kc(t)||Rc(o,i);return ci(s),s?DT(e[He],r):fh(o,n,e,t)}function gL(){wb=pL}function by(n){return Cn("",n,""),by}function Cn(n,e,t){let r=Fe(),i=mb(r,n,e,t);return i!==Un&&_y(r,ai(),i),Cn}function Oc(n,e,t,r,i){let o=Fe(),s=UV(o,n,e,t,r,i);return s!==Un&&_y(o,ai(),s),Oc}function Ay(n,e,t,r,i,o,s){let a=Fe(),c=BV(a,n,e,t,r,i,o,s);return c!==Un&&_y(a,ai(),c),Ay}function xe(n,e,t){lb(e)&&(e=e());let r=Fe(),i=nh();if(oi(r,i,e)){let o=Xt(),s=rh();yy(o,s,r,n,e,r[He],t,!1)}return xe}function Pe(n,e){let t=lb(n);return t&&n.set(e),t}function Re(n,e){let t=Fe(),r=Xt(),i=Ht();return vb(r,t,t[He],i,n,e),Re}function mL(n,e,t){let r=Xt();if(r.firstCreatePass){let i=ri(n);Pm(t,r.data,r.blueprint,i,!0),Pm(e,r.data,r.blueprint,i,!1)}}function Pm(n,e,t,r,i){if(n=Ut(n),Array.isArray(n))for(let o=0;o<n.length;o++)Pm(n[o],e,t,r,i);else{let o=Xt(),s=Fe(),a=Ht(),c=fs(n)?n:Ut(n.provide),l=gC(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(fs(n)||!n.multi){let y=new Yi(l,i,oe),D=Yg(c,e,i?h:h+m,p);D===-1?(lm(xd(a,s),o,c),Zg(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[D]=y,s[D]=y)}else{let y=Yg(c,e,h+m,p),D=Yg(c,e,h,h+m),S=y>=0&&t[y],M=D>=0&&t[D];if(i&&!M||!i&&!S){lm(xd(a,s),o,c);let j=_L(i?vL:yL,t.length,i,r,l);!i&&M&&(t[D].providerFactory=j),Zg(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),s.push(j)}else{let j=Eb(t[i?D:y],l,!i&&r);Zg(o,n,y>-1?y:D,j)}!i&&r&&M&&t[D].componentProviders++}}}function Zg(n,e,t,r){let i=fs(e),o=Vk(e);if(i||o){let c=(o?Ut(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function Eb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Yg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function yL(n,e,t,r){return km(this.multi,[])}function vL(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=ys(t,t[me],this.providerFactory.index,r);o=a.slice(0,s),km(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],km(i,o);return o}function km(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function _L(n,e,t,r,i){let o=new Yi(n,t,oe);return o.multi=[],o.index=e,o.componentProviders=0,Eb(o,i,r&&!t),o}function vh(n,e=[]){return t=>{t.providersResolver=(r,i)=>mL(r,i?i(n):n,e)}}var wL=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=hC(!1,t.type),i=r.length>0?gh([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=W({token:n,providedIn:"environment",factory:()=>new n(F(fn))})}}return n})();function Ib(n){li("NgStandalone"),n.getStandaloneInjector=e=>e.get(wL).getOrCreateStandaloneInjector(n)}var dd=null;function EL(n){dd!==null&&(n.defaultEncapsulation!==dd.defaultEncapsulation||n.preserveWhitespaces!==dd.preserveWhitespaces)||(dd=n)}var Ar=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Db=new Ar("18.2.13");var _h=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Sy=new z(""),Fc=new z(""),wh=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,My||(IL(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ie.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(F(Ie),F(Eh),F(Fc))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Eh=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return My?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function IL(n){My=n}var My;function oo(n){return!!n&&typeof n.then=="function"}function Cb(n){return!!n&&typeof n.subscribe=="function"}var Ih=new z(""),Tb=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=V(Ih,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(oo(o))t.push(o);else if(Cb(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ss=new z("");function DL(){ND(()=>{throw new Y(600,!1)})}function CL(n){return n.isBoundToModule}var TL=10;function bL(n,e,t){try{let r=t();return oo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function bb(n,e){return Array.isArray(e)?e.reduce(bb,n):P(P({},n),e)}var Bn=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(B1),this.afterRenderManager=V(gb),this.zonelessEnabled=V(Iy),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ze,this.afterTick=new ze,this.componentTypes=[],this.components=[],this.isStable=V(no).hasPendingTasks.pipe(K(t=>!t)),this._injector=V(fn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Ud;if(!this._injector.get(Tb).done){let m=!i&&cC(t),y=!1;throw new Y(405,y)}let s;i?s=t:s=this._injector.get(_s).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=CL(s)?void 0:this._injector.get(ii),c=r||s.selector,l=s.create(Jt.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(Sy,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),yd(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Y(101,!1);let t=Ae(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ae(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ws,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<TL;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)AL(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>eh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;yd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Ss,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>yd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Y(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var hd;function Dh(n){hd??=new WeakMap;let e=hd.get(n);if(e)return e;let t=n.isStable.pipe(ln(r=>r)).toPromise().then(()=>{});return hd.set(n,t),n.onDestroy(()=>hd?.delete(n)),t}function AL(n,e,t,r){if(!t&&!eh(n))return;JT(n,e,t&&!r?0:1)}var Om=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Ch=(()=>{class n{compileModuleSync(t){return new qd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=uC(t),o=IT(i.declarations).reduce((s,a)=>{let c=ni(a);return c&&s.push(new Es(c)),s},[]);return new Om(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),SL=new z("");function ML(n,e,t){let r=new qd(t);return Promise.resolve(r)}function U0(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var xL=(()=>{class n{constructor(){this.zone=V(Ie),this.changeDetectionScheduler=V(vs),this.applicationRef=V(Bn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function RL({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ie(pe(P({},Ab()),{scheduleInRootZone:t})),[{provide:Ie,useFactory:n},{provide:Ki,multi:!0,useFactory:()=>{let r=V(xL,{optional:!0});return()=>r.initialize()}},{provide:Ki,multi:!0,useFactory:()=>{let r=V(NL);return()=>{r.initialize()}}},e===!0?{provide:ob,useValue:!0}:[],{provide:sb,useValue:t??eT}]}function Ab(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var NL=(()=>{class n{constructor(){this.subscription=new Xe,this.initialized=!1,this.zone=V(Ie),this.pendingTasks=V(no)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ie.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ie.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var PL=(()=>{class n{constructor(){this.appRef=V(Bn),this.taskService=V(no),this.ngZone=V(Ie),this.zonelessEnabled=V(Iy),this.disableScheduling=V(ob,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Xe,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Nd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(V(sb,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Pd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?E0:tT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Nd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,E0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function kL(){return typeof $localize<"u"&&$localize.locale||zd}var xy=new z("",{providedIn:"root",factory:()=>V(xy,fe.Optional|fe.SkipSelf)||kL()});var Wd=new z("");function fd(n){return!n.moduleRef}function OL(n){let e=fd(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ie);return t.run(()=>{fd(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Tr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),fd(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Wd);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Wd);s.add(o),n.moduleRef.onDestroy(()=>{yd(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return bL(r,t,()=>{let o=e.get(Tb);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(xy,zd);if(dL(s||zd),fd(n)){let a=e.get(Bn);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return FL(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function FL(n,e){let t=n.injector.get(Bn);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Y(-403,!1);e.push(n)}var Sb=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>U1(r?.ngZone,pe(P({},Ab({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[RL({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:vs,useExisting:PL}],c=MV(t.moduleType,this.injector,a);return OL({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=bb({},r);return ML(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Y(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Wd,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(F(Jt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),gc=null,Mb=new z("");function VL(n){if(gc&&!gc.get(Mb,!1))throw new Y(400,!1);DL(),gc=n;let e=n.get(Sb);return UL(n),e}function Ry(n,e,t=[]){let r=`Platform: ${e}`,i=new z(r);return(o=[])=>{let s=xb();if(!s||s.injector.get(Mb,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):VL(LL(a,r))}return jL(i)}}function LL(n=[],e){return Jt.create({name:e,providers:[{provide:Jd,useValue:"platform"},{provide:Wd,useValue:new Set([()=>gc=null])},...n]})}function jL(n){let e=xb();if(!e)throw new Y(401,!1);return e}function xb(){return gc?.get(Sb)??null}function UL(n){n.get(iy,null)?.forEach(t=>t())}function Ny(){return!1}var so=(()=>{class n{static{this.__NG_ELEMENT_ID__=BL}}return n})();function BL(n){return $L(Ht(),Fe(),(n&16)===16)}function $L(n,e,t){if(bc(n)&&!t){let r=si(n.index,e);return new Xi(r,r)}else if(n.type&175){let r=e[Dn];return new Xi(r,e)}return null}var Fm=class{constructor(){}supports(e){return db(e)}create(e){return new Vm(e)}},HL=(n,e)=>e,Vm=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||HL}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<B0(r,i,o)?t:r,a=B0(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,D=y+m;h<=D&&D<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!db(e))throw new Y(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,xV(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Lm(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Kd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Kd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Lm=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},jm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Kd=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new jm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function B0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function $0(){return new Py([new Fm])}var Py=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:$0})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||$0()),deps:[[n,new Bm,new Cs]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Y(901,!1)}}return n})();var Rb=Ry(null,"core",[]),Nb=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(F(Bn))}}static{this.\u0275mod=_t({type:n})}static{this.\u0275inj=yt({})}}return n})();var H0=!1;function qL(){H0||(H0=!0,oO(),sL(),gL(),uL(),FV(),pV(),KF(),zO())}function GL(n,e){return Dh(n)}function Pb(){return Tc([{provide:ad,useFactory:()=>{let n=!0;return hc()&&(n=!!V(bs,{optional:!0})?.get(pT,null)),n&&li("NgHydration"),n}},{provide:Ki,useValue:()=>{BF(!1),hc()&&V(ad)&&(zL(),qL())},multi:!0},{provide:vT,useFactory:()=>hc()&&V(ad)},{provide:Ss,useFactory:()=>{if(hc()&&V(ad)){let n=V(Bn),e=V(Jt);return()=>{GL(n,e).then(()=>{GF(n)})}}return()=>{}},multi:!0}])}function zL(){let n=oh(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===rO){e=t;break}if(!e)throw new Y(-507,!1)}function ao(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Vc(n,e){li("NgSignals");let t=MD(n);return e?.equal&&(t[_r].equal=e.equal),t}function Sr(n){let e=Ae(null);try{return n()}finally{Ae(e)}}function kb(n){let e=ni(n);if(!e)return null;let t=new Es(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var jb=null;function rr(){return jb}function Ub(n){jb??=n}var Th=class{};var qt=new z(""),Ly=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>V(WL),providedIn:"platform"})}}return n})(),Bb=new z(""),WL=(()=>{class n extends Ly{constructor(){super(),this._doc=V(qt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return rr().getBaseHref(this._doc)}onPopState(t){let r=rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function jy(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function Ob(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Mr(n){return n&&n[0]!=="?"?"?"+n:n}var xr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>V(Uy),providedIn:"root"})}}return n})(),$b=new z(""),Uy=(()=>{class n extends xr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??V(qt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return jy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Mr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Mr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Mr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(F(Ly),F($b,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hb=(()=>{class n extends xr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=jy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Mr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Mr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(F(Ly),F($b,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Ms=(()=>{class n{constructor(t){this._subject=new ct,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=ZL(Ob(Fb(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Mr(r))}normalize(t){return n.stripTrailingSlash(QL(this._basePath,Fb(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Mr}static{this.joinWithSlash=jy}static{this.stripTrailingSlash=Ob}static{this.\u0275fac=function(r){return new(r||n)(F(xr))}}static{this.\u0275prov=W({token:n,factory:()=>KL(),providedIn:"root"})}}return n})();function KL(){return new Ms(F(xr))}function QL(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Fb(n){return n.replace(/\/index.html$/,"")}function ZL(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function By(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ky=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},en=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new ky(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Vb(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Vb(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(oe(As),oe(hh),oe(Py))}}static{this.\u0275dir=$t({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function Vb(n,e){n.context.$implicit=e.item}var qb=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Oy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Lb("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Lb("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(oe(As),oe(hh))}}static{this.\u0275dir=$t({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Oy=class{constructor(){this.$implicit=null,this.ngIf=null}};function Lb(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Bt(e)}'.`)}var Gb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=_t({type:n})}static{this.\u0275inj=yt({})}}return n})(),$y="browser",YL="server";function JL(n){return n===$y}function Rr(n){return n===YL}var zb=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>JL(V(Dt))?new Fy(V(qt),window):new Vy})}}return n})(),Fy=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=XL(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function XL(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Vy=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},bh=class{};var Sh=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var eA=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(eA||{}),Hy=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Sh,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Mh=class n extends Hy{constructor(e={}){super(e),this.type=eA.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var e2=new z("");var t2=new z(""),Wb="b",Kb="h",Qb="s",Zb="st",Yb="u",Jb="rt",Ah=new z(""),n2=["GET","HEAD"];function r2(n,e){let y=V(Ah),{isCacheActive:t}=y,r=dD(y,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!n2.includes(o)||!r.includeRequestsWithAuthHeaders&&i2(n)||r.filter?.(n)===!1)return e(n);let s=V(bs),a=V(t2,{optional:!0}),c=Rr(V(Dt));if(a&&!c)throw new Y(2803,!1);let l=c&&a?c2(n.url,a):n.url,h=s2(n,l),p=s.get(h,null),m=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(m=i.includeHeaders),p){let{[Wb]:D,[Jb]:S,[Kb]:M,[Qb]:j,[Zb]:G,[Yb]:L}=p,Z=D;switch(S){case"arraybuffer":Z=new TextEncoder().encode(D).buffer;break;case"blob":Z=new Blob([D]);break}let re=new Sh(M);return ee(new Mh({body:Z,headers:re,status:j,statusText:G,url:L}))}return e(n).pipe(tt(D=>{D instanceof Mh&&c&&s.set(h,{[Wb]:D.body,[Kb]:o2(D.headers,m),[Qb]:D.status,[Zb]:D.statusText,[Yb]:l,[Jb]:n.responseType})}))}function i2(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function o2(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function Xb(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function s2(n,e){let{params:t,method:r,responseType:i}=n,o=Xb(t),s=n.serializeBody();s instanceof URLSearchParams?s=Xb(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),c=a2(a);return c}function a2(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function tA(n){return[{provide:Ah,useFactory:()=>(li("NgHttpTransferCache"),P({isCacheActive:!0},n))},{provide:e2,useValue:r2,multi:!0,deps:[bs,Ah]},{provide:Ss,multi:!0,useFactory:()=>{let e=V(Bn),t=V(Ah);return()=>{Dh(e).then(()=>{t.isCacheActive=!1})}}}]}function c2(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var zy=class extends Th{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Wy=class n extends zy{static makeCurrent(){Ub(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=u2();return t==null?null:l2(t)}resetBaseElement(){Lc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return By(document.cookie,e)}},Lc=null;function u2(){return Lc=Lc||document.querySelector("base"),Lc?Lc.getAttribute("href"):null}function l2(n){return new URL(n,document.baseURI).pathname}var Ky=class{addToWindow(e){On.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new Y(5103,!1);return o},On.getAllAngularTestabilities=()=>e.getAllTestabilities(),On.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=On.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};On.frameworkStabilizers||(On.frameworkStabilizers=[]),On.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?rr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},d2=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Qy=new z(""),oA=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Y(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(F(Qy),F(Ie))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),xh=class{constructor(e){this._doc=e}},qy="ng-app-id",sA=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Rr(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${qy}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(qy),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(qy,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(F(qt),F(xc),F(oy,8),F(Dt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Gy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Jy=/%COMP%/g,aA="%COMP%",h2=`_nghost-${aA}`,f2=`_ngcontent-${aA}`,p2=!0,g2=new z("",{providedIn:"root",factory:()=>p2});function m2(n){return f2.replace(Jy,n)}function y2(n){return h2.replace(Jy,n)}function cA(n,e){return e.map(t=>t.replace(Jy,n))}var nA=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Rr(a),this.defaultRenderer=new jc(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Xn.ShadowDom&&(r=pe(P({},r),{encapsulation:Xn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Rh?i.applyToHost(t):i instanceof Uc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Xn.Emulated:o=new Rh(c,l,r,this.appId,h,s,a,p);break;case Xn.ShadowDom:return new Zy(c,l,t,r,s,a,this.nonce,p);default:o=new Uc(c,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(F(oA),F(sA),F(xc),F(g2),F(qt),F(Dt),F(Ie),F(oy))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),jc=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Gy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(rA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(rA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Y(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Gy[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Gy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(br.DashCase|br.Important)?e.style.setProperty(t,r,i&br.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&br.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=rr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function rA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Zy=class extends jc{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=cA(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Uc=class extends jc{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?cA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Rh=class extends Uc{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=m2(l),this.hostAttr=y2(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},v2=(()=>{class n extends xh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(F(qt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),iA=["alt","control","meta","shift"],_2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},w2={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},E2=(()=>{class n extends xh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>rr().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),iA.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=_2[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),iA.forEach(s=>{if(s!==i){let a=w2[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(F(qt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function I2(){Wy.makeCurrent()}function D2(){return new Tr}function C2(){return uT(document),document}var T2=[{provide:Dt,useValue:$y},{provide:iy,useValue:I2,multi:!0},{provide:qt,useFactory:C2,deps:[]}],uA=Ry(Rb,"browser",T2),b2=new z(""),A2=[{provide:Fc,useClass:Ky,deps:[]},{provide:Sy,useClass:wh,deps:[Ie,Eh,Fc]},{provide:wh,useClass:wh,deps:[Ie,Eh,Fc]}],S2=[{provide:Jd,useValue:"root"},{provide:Tr,useFactory:D2,deps:[]},{provide:Qy,useClass:v2,multi:!0,deps:[qt,Ie,Dt]},{provide:Qy,useClass:E2,multi:!0,deps:[qt]},nA,sA,oA,{provide:ws,useExisting:nA},{provide:bh,useClass:d2,deps:[]},[]],lA=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:xc,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(F(b2,12))}}static{this.\u0275mod=_t({type:n})}static{this.\u0275inj=yt({providers:[...S2,...A2],imports:[Gb,Nb]})}}return n})();var dA=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(F(qt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Yy=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(Yy||{});function hA(...n){let e=[],t=new Set,r=t.has(Yy.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);return Tc([[],Pb(),t.has(Yy.NoHttpTransferCache)||r?[]:tA({}),e])}var le="primary",eu=Symbol("RouteTitle"),rv=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Os(n){return new rv(n)}function M2(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function x2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ir(n[t],e[t]))return!1;return!0}function ir(n,e){let t=n?iv(n):void 0,r=e?iv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!CA(n[i],e[i]))return!1;return!0}function iv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function CA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function TA(n){return n.length>0?n[n.length-1]:null}function gi(n){return Mg(n)?n:oo(n)?De(Promise.resolve(n)):ee(n)}var R2={exact:AA,subset:SA},bA={exact:N2,subset:P2,ignored:()=>!0};function pA(n,e,t){return R2[t.paths](n.root,e.root,t.matrixParams)&&bA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function N2(n,e){return ir(n,e)}function AA(n,e,t){if(!uo(n.segments,e.segments)||!kh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!AA(n.children[r],e.children[r],t))return!1;return!0}function P2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>CA(n[t],e[t]))}function SA(n,e,t){return MA(n,e,e.segments,t)}function MA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!uo(i,t)||e.hasChildren()||!kh(i,t,r))}else if(n.segments.length===t.length){if(!uo(n.segments,t)||!kh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!SA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!uo(n.segments,i)||!kh(n.segments,i,r)||!n.children[le]?!1:MA(n.children[le],e,o,r)}}function kh(n,e,t){return e.every((r,i)=>bA[t](n[i].parameters,r.parameters))}var Pr=class{constructor(e=new ke([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Os(this.queryParams),this._queryParamMap}toString(){return F2.serialize(this)}},ke=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Oh(this)}},co=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Os(this.parameters),this._parameterMap}toString(){return RA(this)}};function k2(n,e){return uo(n,e)&&n.every((t,r)=>ir(t.parameters,e[r].parameters))}function uo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function O2(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===le&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==le&&(t=t.concat(e(i,r)))}),t}var tu=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new Fs,providedIn:"root"})}}return n})(),Fs=class{parse(e){let t=new sv(e);return new Pr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Bc(e.root,!0)}`,r=j2(e.queryParams),i=typeof e.fragment=="string"?`#${V2(e.fragment)}`:"";return`${t}${r}${i}`}},F2=new Fs;function Oh(n){return n.segments.map(e=>RA(e)).join("/")}function Bc(n,e){if(!n.hasChildren())return Oh(n);if(e){let t=n.children[le]?Bc(n.children[le],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==le&&r.push(`${i}:${Bc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=O2(n,(r,i)=>i===le?[Bc(n.children[le],!1)]:[`${i}:${Bc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[le]!=null?`${Oh(n)}/${t[0]}`:`${Oh(n)}/(${t.join("//")})`}}function xA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nh(n){return xA(n).replace(/%3B/gi,";")}function V2(n){return encodeURI(n)}function ov(n){return xA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fh(n){return decodeURIComponent(n)}function gA(n){return Fh(n.replace(/\+/g,"%20"))}function RA(n){return`${ov(n.path)}${L2(n.parameters)}`}function L2(n){return Object.entries(n).map(([e,t])=>`;${ov(e)}=${ov(t)}`).join("")}function j2(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Nh(t)}=${Nh(i)}`).join("&"):`${Nh(t)}=${Nh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var U2=/^[^\/()?;#]+/;function Xy(n){let e=n.match(U2);return e?e[0]:""}var B2=/^[^\/()?;=#]+/;function $2(n){let e=n.match(B2);return e?e[0]:""}var H2=/^[^=?&#]+/;function q2(n){let e=n.match(H2);return e?e[0]:""}var G2=/^[^&#]+/;function z2(n){let e=n.match(G2);return e?e[0]:""}var sv=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ke([],{}):new ke([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[le]=new ke(e,t)),r}parseSegment(){let e=Xy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Y(4009,!1);return this.capture(e),new co(Fh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=$2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Xy(this.remaining);i&&(r=i,this.capture(r))}e[Fh(t)]=Fh(r)}parseQueryParam(e){let t=q2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=z2(this.remaining);s&&(r=s,this.capture(r))}let i=gA(t),o=gA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Xy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Y(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=le);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[le]:new ke([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Y(4011,!1)}};function NA(n){return n.segments.length>0?new ke([],{[le]:n}):n}function PA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=PA(i);if(r===le&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ke(n.segments,e);return W2(t)}function W2(n){if(n.numberOfChildren===1&&n.children[le]){let e=n.children[le];return new ke(n.segments.concat(e.segments),e.children)}return n}function lo(n){return n instanceof Pr}function K2(n,e,t=null,r=null){let i=kA(n);return OA(i,e,t,r)}function kA(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new ke(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=NA(r);return e??i}function OA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return ev(i,i,i,t,r);let o=Q2(e);if(o.toRoot())return ev(i,i,new ke([],{}),t,r);let s=Z2(o,i,n),a=s.processChildren?qc(s.segmentGroup,s.index,o.commands):VA(s.segmentGroup,s.index,o.commands);return ev(i,s.segmentGroup,a,t,r)}function Vh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Wc(n){return typeof n=="object"&&n!=null&&n.outlets}function ev(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=FA(n,e,t);let a=NA(PA(s));return new Pr(a,o,i)}function FA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=FA(o,e,t)}),new ke(n.segments,r)}var Lh=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Vh(r[0]))throw new Y(4003,!1);let i=r.find(Wc);if(i&&i!==TA(r))throw new Y(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Q2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Lh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Lh(t,e,r)}var Ns=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Z2(n,e,t){if(n.isAbsolute)return new Ns(e,!0,0);if(!t)return new Ns(e,!1,NaN);if(t.parent===null)return new Ns(t,!0,0);let r=Vh(n.commands[0])?0:1,i=t.segments.length-1+r;return Y2(t,i,n.numberOfDoubleDots)}function Y2(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Y(4005,!1);i=r.segments.length}return new Ns(r,!1,i-o)}function J2(n){return Wc(n[0])?n[0].outlets:{[le]:n}}function VA(n,e,t){if(n??=new ke([],{}),n.segments.length===0&&n.hasChildren())return qc(n,e,t);let r=X2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ke(n.segments.slice(0,r.pathIndex),{});return o.children[le]=new ke(n.segments.slice(r.pathIndex),n.children),qc(o,0,i)}else return r.match&&i.length===0?new ke(n.segments,{}):r.match&&!n.hasChildren()?av(n,e,t):r.match?qc(n,0,i):av(n,e,t)}function qc(n,e,t){if(t.length===0)return new ke(n.segments,{});{let r=J2(t),i={};if(Object.keys(r).some(o=>o!==le)&&n.children[le]&&n.numberOfChildren===1&&n.children[le].segments.length===0){let o=qc(n.children[le],e,t);return new ke(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=VA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ke(n.segments,i)}}function X2(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Wc(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!yA(c,l,s))return o;r+=2}else{if(!yA(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function av(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Wc(o)){let c=ej(o.outlets);return new ke(r,c)}if(i===0&&Vh(t[0])){let c=n.segments[e];r.push(new co(c.path,mA(t[0]))),i++;continue}let s=Wc(o)?o.outlets[le]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Vh(a)?(r.push(new co(s,mA(a))),i+=2):(r.push(new co(s,{})),i++)}return new ke(r,{})}function ej(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=av(new ke([],{}),0,r))}),e}function mA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function yA(n,e,t){return n==t.path&&ir(e,t.parameters)}var Gc="imperative",wt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(wt||{}),Tn=class{constructor(e,t){this.id=e,this.url=t}},Vs=class extends Tn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=wt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},or=class extends Tn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=wt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},yn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(yn||{}),jh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(jh||{}),Nr=class extends Tn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=wt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},fi=class extends Tn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=wt.NavigationSkipped}},Kc=class extends Tn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=wt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Uh=class extends Tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=wt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cv=class extends Tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=wt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uv=class extends Tn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=wt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},lv=class extends Tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=wt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dv=class extends Tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=wt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hv=class{constructor(e){this.route=e,this.type=wt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},fv=class{constructor(e){this.route=e,this.type=wt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},pv=class{constructor(e){this.snapshot=e,this.type=wt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gv=class{constructor(e){this.snapshot=e,this.type=wt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mv=class{constructor(e){this.snapshot=e,this.type=wt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yv=class{constructor(e){this.snapshot=e,this.type=wt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bh=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=wt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Qc=class{},Ls=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function tj(n,e){return n.providers&&!n._injector&&(n._injector=gh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function $n(n){return n.outlet||le}function nj(n,e){let t=n.filter(r=>$n(r)===e);return t.push(...n.filter(r=>$n(r)!==e)),t}function nu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var vv=class{get injector(){return nu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ru(this.rootInjector),this.attachRef=null}},ru=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new vv(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(F(fn))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$h=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=_v(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=_v(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=wv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return wv(e,this._root).map(t=>t.value)}};function _v(n,e){if(n===e.value)return e;for(let t of e.children){let r=_v(n,t);if(r)return r}return null}function wv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=wv(n,t);if(r.length)return r.unshift(e),r}return[]}var mn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Rs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Hh=class extends $h{constructor(e,t){super(e),this.snapshot=t,Mv(this,e)}toString(){return this.snapshot.toString()}};function LA(n){let e=rj(n),t=new It([new co("",{})]),r=new It({}),i=new It({}),o=new It({}),s=new It(""),a=new ho(t,r,o,s,i,le,n,e.root);return a.snapshot=e.root,new Hh(new mn(a,[]),e)}function rj(n){let e={},t={},r={},i="",o=new Ps([],e,r,i,t,le,n,null,{});return new Gh("",new mn(o,[]))}var ho=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(K(l=>l[eu]))??ee(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(K(e=>Os(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(K(e=>Os(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function qh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:P(P({},e.params),n.params),data:P(P({},e.data),n.data),resolve:P(P(P(P({},n.data),e.data),i?.data),n._resolvedData)}:r={params:P({},n.params),data:P({},n.data),resolve:P(P({},n.data),n._resolvedData??{})},i&&UA(i)&&(r.resolve[eu]=i.title),r}var Ps=class{get title(){return this.data?.[eu]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Os(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Os(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Gh=class extends $h{constructor(e,t){super(t),this.url=e,Mv(this,t)}toString(){return jA(this._root)}};function Mv(n,e){e.value._routerState=n,e.children.forEach(t=>Mv(n,t))}function jA(n){let e=n.children.length>0?` { ${n.children.map(jA).join(", ")} } `:"";return`${n.value}${e}`}function tv(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ir(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ir(e.params,t.params)||n.paramsSubject.next(t.params),x2(e.url,t.url)||n.urlSubject.next(t.url),ir(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ev(n,e){let t=ir(n.params,e.params)&&k2(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Ev(n.parent,e.parent))}function UA(n){return typeof n.title=="string"||n.title===null}var xv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=le,this.activateEvents=new ct,this.deactivateEvents=new ct,this.attachEvents=new ct,this.detachEvents=new ct,this.parentContexts=V(ru),this.location=V(As),this.changeDetector=V(so),this.inputBinder=V(Zh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Y(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Y(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Y(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Y(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Iv(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=$t({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[to]})}}return n})(),Iv=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ho?this.route:e===ru?this.childContexts:this.parent.get(e,t)}},Zh=new z(""),vA=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=lc([r.queryParams,r.params,r.data]).pipe(Qe(([o,s,a],c)=>(a=P(P(P({},o),s),a),c===0?ee(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=kb(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function ij(n,e,t){let r=Zc(n,e._root,t?t._root:void 0);return new Hh(r,e)}function Zc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=oj(n,e,t);return new mn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Zc(n,a)),s}}let r=sj(e.value),i=e.children.map(o=>Zc(n,o));return new mn(r,i)}}function oj(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Zc(n,r,i);return Zc(n,r)})}function sj(n){return new ho(new It(n.url),new It(n.params),new It(n.queryParams),new It(n.fragment),new It(n.data),n.outlet,n.component,n)}var Yc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},BA="ngNavigationCancelingError";function zh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=lo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$A(!1,yn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function $A(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[BA]=!0,t.cancellationCode=e,t}function aj(n){return HA(n)&&lo(n.url)}function HA(n){return!!n&&n[BA]}var cj=(n,e,t,r)=>K(i=>(new Dv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Dv=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),tv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Rs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Rs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Rs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Rs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new yv(o.value.snapshot))}),e.children.length&&this.forwardEvent(new gv(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(tv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),tv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Wh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ks=class{constructor(e,t){this.component=e,this.route=t}};function uj(n,e,t){let r=n._root,i=e?e._root:null;return $c(r,i,t,[r.value])}function lj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Us(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!W0(n)?n:e.get(n):r}function $c(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Rs(e);return n.children.forEach(s=>{dj(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>zc(a,t.getContext(s),i)),i}function dj(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=hj(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Wh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?$c(n,e,a?a.children:null,r,i):$c(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ks(a.outlet.component,s))}else s&&zc(e,a,i),i.canActivateChecks.push(new Wh(r)),o.component?$c(n,null,a?a.children:null,r,i):$c(n,null,t,r,i);return i}function hj(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!uo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!uo(n.url,e.url)||!ir(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ev(n,e)||!ir(n.queryParams,e.queryParams);case"paramsChange":default:return!Ev(n,e)}}function zc(n,e,t){let r=Rs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?zc(s,e.children.getContext(o),t):zc(s,null,t):zc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ks(e.outlet.component,i)):t.canDeactivateChecks.push(new ks(null,i)):t.canDeactivateChecks.push(new ks(null,i))}function iu(n){return typeof n=="function"}function fj(n){return typeof n=="boolean"}function pj(n){return n&&iu(n.canLoad)}function gj(n){return n&&iu(n.canActivate)}function mj(n){return n&&iu(n.canActivateChild)}function yj(n){return n&&iu(n.canDeactivate)}function vj(n){return n&&iu(n.canMatch)}function qA(n){return n instanceof Er||n?.name==="EmptyError"}var Ph=Symbol("INITIAL_VALUE");function js(){return Qe(n=>lc(n.map(e=>e.pipe(Ir(1),zi(Ph)))).pipe(K(e=>{for(let t of e)if(t!==!0){if(t===Ph)return Ph;if(t===!1||_j(t))return t}return!0}),mt(e=>e!==Ph),Ir(1)))}function _j(n){return lo(n)||n instanceof Yc}function wj(n,e){return at(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ee(pe(P({},t),{guardsResult:!0})):Ej(s,r,i,n).pipe(at(a=>a&&fj(a)?Ij(r,o,n,e):ee(a)),K(a=>pe(P({},t),{guardsResult:a})))})}function Ej(n,e,t,r){return De(n).pipe(at(i=>Aj(i.component,i.route,t,e,r)),ln(i=>i!==!0,!0))}function Ij(n,e,t,r){return De(e).pipe(Yr(i=>ns(Cj(i.route.parent,r),Dj(i.route,r),bj(n,i.path,t),Tj(n,i.route,t))),ln(i=>i!==!0,!0))}function Dj(n,e){return n!==null&&e&&e(new mv(n)),ee(!0)}function Cj(n,e){return n!==null&&e&&e(new pv(n)),ee(!0)}function Tj(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(o=>nd(()=>{let s=nu(e)??t,a=Us(o,s),c=gj(a)?a.canActivate(e,n):Ln(s,()=>a(e,n));return gi(c).pipe(ln())}));return ee(i).pipe(js())}function bj(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>lj(s)).filter(s=>s!==null).map(s=>nd(()=>{let a=s.guards.map(c=>{let l=nu(s.node)??t,h=Us(c,l),p=mj(h)?h.canActivateChild(r,n):Ln(l,()=>h(r,n));return gi(p).pipe(ln())});return ee(a).pipe(js())}));return ee(o).pipe(js())}function Aj(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ee(!0);let s=o.map(a=>{let c=nu(e)??i,l=Us(a,c),h=yj(l)?l.canDeactivate(n,e,t,r):Ln(c,()=>l(n,e,t,r));return gi(h).pipe(ln())});return ee(s).pipe(js())}function Sj(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ee(!0);let o=i.map(s=>{let a=Us(s,n),c=pj(a)?a.canLoad(e,t):Ln(n,()=>a(e,t));return gi(c)});return ee(o).pipe(js(),GA(r))}function GA(n){return Dg(tt(e=>{if(typeof e!="boolean")throw zh(n,e)}),K(e=>e===!0))}function Mj(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ee(!0);let o=i.map(s=>{let a=Us(s,n),c=vj(a)?a.canMatch(e,t):Ln(n,()=>a(e,t));return gi(c)});return ee(o).pipe(js(),GA(r))}var Jc=class{constructor(e){this.segmentGroup=e||null}},Xc=class extends Error{constructor(e){super(),this.urlTree=e}};function xs(n){return ts(new Jc(n))}function xj(n){return ts(new Y(4e3,!1))}function Rj(n){return ts($A(!1,yn.GuardRejected))}var Cv=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[le])return xj(`${e.redirectTo}`);i=i.children[le]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:D,title:S}=i,M=Ln(o,()=>a({params:y,data:D,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:S}));if(M instanceof Pr)throw new Xc(M);t=M}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Xc(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Pr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new ke(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Y(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Tv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Nj(n,e,t,r,i){let o=zA(n,e,t);return o.matched?(r=tj(e,r),Mj(r,e,t,i).pipe(K(s=>s===!0?o:P({},Tv)))):ee(o)}function zA(n,e,t){if(e.path==="**")return Pj(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?P({},Tv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||M2)(t,n,e);if(!i)return P({},Tv);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?P(P({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Pj(n){return{matched:!0,parameters:n.length>0?TA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function _A(n,e,t,r){return t.length>0&&Fj(n,t,r)?{segmentGroup:new ke(e,Oj(r,new ke(t,n.children))),slicedSegments:[]}:t.length===0&&Vj(n,t,r)?{segmentGroup:new ke(n.segments,kj(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ke(n.segments,n.children),slicedSegments:t}}function kj(n,e,t,r){let i={};for(let o of t)if(Yh(n,e,o)&&!r[$n(o)]){let s=new ke([],{});i[$n(o)]=s}return P(P({},r),i)}function Oj(n,e){let t={};t[le]=e;for(let r of n)if(r.path===""&&$n(r)!==le){let i=new ke([],{});t[$n(r)]=i}return t}function Fj(n,e,t){return t.some(r=>Yh(n,e,r)&&$n(r)!==le)}function Vj(n,e,t){return t.some(r=>Yh(n,e,r))}function Yh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Lj(n,e,t){return e.length===0&&!n.children[t]}var bv=class{};function jj(n,e,t,r,i,o,s="emptyOnly"){return new Av(n,e,t,r,i,s,o).recognize()}var Uj=31,Av=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Cv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Y(4002,`'${e.segmentGroup}'`)}recognize(){let e=_A(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(K(({children:t,rootSnapshot:r})=>{let i=new mn(r,t),o=new Gh("",i),s=K2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ps([],Object.freeze({}),Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),le,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,le,t).pipe(K(r=>({children:r,rootSnapshot:t})),Zr(r=>{if(r instanceof Xc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Jc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(K(s=>s instanceof mn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return De(o).pipe(Yr(s=>{let a=r.children[s],c=nj(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Gi((s,a)=>(s.push(...a),s)),Jr(null),kg(),at(s=>{if(s===null)return xs(r);let a=WA(s);return Bj(a),ee(a)}))}processSegment(e,t,r,i,o,s,a){return De(t).pipe(Yr(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Zr(l=>{if(l instanceof Jc)return ee(null);throw l}))),ln(c=>!!c),Zr(c=>{if(qA(c))return Lj(r,i,o)?ee(new bv):xs(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return $n(r)!==s&&(s===le||!Yh(i,o,r))?xs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):xs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=zA(t,i,o);if(!c)return xs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Uj&&(this.allowRedirects=!1));let y=new Ps(o,l,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,wA(i),$n(i),i.component??i._loadedComponent??null,i,EA(i)),D=qh(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(D.params),y.data=Object.freeze(D.data);let S=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,S).pipe(at(M=>this.processSegment(e,r,t,M.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=Nj(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Qe(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Qe(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=c,D=new Ps(m,p,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,wA(r),$n(r),r.component??r._loadedComponent??null,r,EA(r)),S=qh(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(S.params),D.data=Object.freeze(S.data);let{segmentGroup:M,slicedSegments:j}=_A(t,m,y,l);if(j.length===0&&M.hasChildren())return this.processChildren(h,l,M,D).pipe(K(L=>new mn(D,L)));if(l.length===0&&j.length===0)return ee(new mn(D,[]));let G=$n(r)===o;return this.processSegment(h,l,M,j,G?le:o,!0,D).pipe(K(L=>new mn(D,L instanceof mn?[L]:[])))}))):xs(t)))}getChildConfig(e,t,r){return t.children?ee({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ee({routes:t._loadedRoutes,injector:t._loadedInjector}):Sj(e,t,r,this.urlSerializer).pipe(at(i=>i?this.configLoader.loadChildren(e,t).pipe(tt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Rj(t))):ee({routes:[],injector:e})}};function Bj(n){n.sort((e,t)=>e.value.outlet===le?-1:t.value.outlet===le?1:e.value.outlet.localeCompare(t.value.outlet))}function $j(n){let e=n.value.routeConfig;return e&&e.path===""}function WA(n){let e=[],t=new Set;for(let r of n){if(!$j(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=WA(r.children);e.push(new mn(r.value,i))}return e.filter(r=>!t.has(r))}function wA(n){return n.data||{}}function EA(n){return n.resolve||{}}function Hj(n,e,t,r,i,o){return at(s=>jj(n,e,t,r,s.extractedUrl,i,o).pipe(K(({state:a,tree:c})=>pe(P({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function qj(n,e){return at(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ee(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of KA(c))s.add(l);let a=0;return De(s).pipe(Yr(c=>o.has(c)?Gj(c,r,n,e):(c.data=qh(c,c.parent,n).resolve,ee(void 0))),tt(()=>a++),is(1),at(c=>a===s.size?ee(t):jt))})}function KA(n){let e=n.children.map(t=>KA(t)).flat();return[n,...e]}function Gj(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!UA(i)&&(o[eu]=i.title),zj(o,n,e,r).pipe(K(s=>(n._resolvedData=s,n.data=qh(n,n.parent,t).resolve,null)))}function zj(n,e,t,r){let i=iv(n);if(i.length===0)return ee({});let o={};return De(i).pipe(at(s=>Wj(n[s],e,t,r).pipe(ln(),tt(a=>{if(a instanceof Yc)throw zh(new Fs,a);o[s]=a}))),is(1),Ng(o),Zr(s=>qA(s)?jt:ts(s)))}function Wj(n,e,t,r){let i=nu(e)??r,o=Us(n,i),s=o.resolve?o.resolve(e,t):Ln(i,()=>o(e,t));return gi(s)}function nv(n){return Qe(e=>{let t=n(e);return t?De(t).pipe(K(()=>e)):ee(e)})}var QA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===le);return r}getResolvedTitleForRoute(t){return t.data[eu]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>V(Kj),providedIn:"root"})}}return n})(),Kj=(()=>{class n extends QA{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(F(dA))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ou=new z("",{providedIn:"root",factory:()=>({})}),Qj=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=vt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ib],decls:1,vars:0,template:function(r,i){r&1&&ie(0,"router-outlet")},dependencies:[xv],encapsulation:2})}}return n})();function Rv(n){let e=n.children&&n.children.map(Rv),t=e?pe(P({},n),{children:e}):P({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==le&&(t.component=Qj),t}var Kh=new z(""),Nv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(Ch)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ee(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=gi(t.loadComponent()).pipe(K(ZA),tt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),rs(()=>{this.componentLoaders.delete(t)})),i=new Yo(r,()=>new ze).pipe(Zo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ee({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Zj(r,this.compiler,t,this.onLoadEndListener).pipe(rs(()=>{this.childrenLoaders.delete(r)})),s=new Yo(o,()=>new ze).pipe(Zo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Zj(n,e,t,r){return gi(n.loadChildren()).pipe(K(ZA),at(i=>i instanceof Ec||Array.isArray(i)?ee(i):De(e.compileModuleAsync(i))),K(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Kh,[],{optional:!0,self:!0}).flat()),{routes:s.map(Rv),injector:o}}))}function Yj(n){return n&&typeof n=="object"&&"default"in n}function ZA(n){return Yj(n)?n.default:n}var Pv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>V(Jj),providedIn:"root"})}}return n})(),Jj=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),YA=new z(""),JA=new z("");function Xj(n,e,t){let r=n.get(JA),i=n.get(qt);return n.get(Ie).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),eU(n))),{onViewTransitionCreated:c}=r;return c&&Ln(n,()=>c({transition:a,from:e,to:t})),s})}function eU(n){return new Promise(e=>{Ty({read:()=>setTimeout(e)},{injector:n})})}var tU=new z(""),kv=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ze,this.transitionAbortSubject=new ze,this.configLoader=V(Nv),this.environmentInjector=V(fn),this.urlSerializer=V(tu),this.rootContexts=V(ru),this.location=V(Ms),this.inputBindingEnabled=V(Zh,{optional:!0})!==null,this.titleStrategy=V(QA),this.options=V(ou,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(Pv),this.createViewTransition=V(YA,{optional:!0}),this.navigationErrorHandler=V(tU,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ee(void 0),this.rootComponentType=null;let t=i=>this.events.next(new hv(i)),r=i=>this.events.next(new fv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(pe(P(P({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new It({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Gc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mt(o=>o.id!==0),K(o=>pe(P({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Qe(o=>{let s=!1,a=!1;return ee(o).pipe(Qe(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",yn.SupersededByNewNavigation),jt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?pe(P({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new fi(c.id,this.urlSerializer.serialize(c.rawUrl),p,jh.IgnoredSameUrlNavigation)),c.resolve(!1),jt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ee(c).pipe(Qe(p=>{let m=this.transitions?.getValue();return this.events.next(new Vs(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?jt:Promise.resolve(p)}),Hj(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),tt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=pe(P({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Uh(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:D,extras:S}=c,M=new Vs(p,this.urlSerializer.serialize(m),y,D);this.events.next(M);let j=LA(this.rootComponentType).snapshot;return this.currentTransition=o=pe(P({},c),{targetSnapshot:j,urlAfterRedirects:m,extras:pe(P({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ee(o)}else{let p="";return this.events.next(new fi(c.id,this.urlSerializer.serialize(c.extractedUrl),p,jh.IgnoredByUrlHandlingStrategy)),c.resolve(!1),jt}}),tt(c=>{let l=new cv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),K(c=>(this.currentTransition=o=pe(P({},c),{guards:uj(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),wj(this.environmentInjector,c=>this.events.next(c)),tt(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw zh(this.urlSerializer,c.guardsResult);let l=new uv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),mt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",yn.GuardRejected),!1)),nv(c=>{if(c.guards.canActivateChecks.length)return ee(c).pipe(tt(l=>{let h=new lv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Qe(l=>{let h=!1;return ee(l).pipe(qj(this.paramsInheritanceStrategy,this.environmentInjector),tt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",yn.NoDataFromResolver)}}))}),tt(l=>{let h=new dv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),nv(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(tt(m=>{h.component=m}),K(()=>{})));for(let m of h.children)p.push(...l(m));return p};return lc(l(c.targetSnapshot.root)).pipe(Jr(null),Ir(1))}),nv(()=>this.afterPreactivation()),Qe(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?De(h).pipe(K(()=>o)):ee(o)}),K(c=>{let l=ij(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=pe(P({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),tt(()=>{this.events.next(new Qc)}),cj(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Ir(1),tt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new or(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Fg(this.transitionAbortSubject.pipe(tt(c=>{throw c}))),rs(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",yn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Zr(c=>{if(a=!0,HA(c))this.events.next(new Nr(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),aj(c)?this.events.next(new Ls(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Kc(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let h=Ln(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Yc){let{message:p,cancellationCode:m}=zh(this.urlSerializer,h);this.events.next(new Nr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Ls(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return jt}))}))}cancelNavigationTransition(t,r,i){let o=new Nr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function nU(n){return n!==Gc}var rU=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>V(iU),providedIn:"root"})}}return n})(),Sv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},iU=(()=>{class n extends Sv{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Mc(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),XA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>V(oU),providedIn:"root"})}}return n})(),oU=(()=>{class n extends XA{constructor(){super(...arguments),this.location=V(Ms),this.urlSerializer=V(tu),this.options=V(ou,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(Pv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Pr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=LA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Vs)this.stateMemento=this.createStateMemento();else if(t instanceof fi)this.rawUrlTree=r.initialUrl;else if(t instanceof Uh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Qc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Nr&&(t.code===yn.GuardRejected||t.code===yn.NoDataFromResolver)?this.restoreHistory(r):t instanceof Kc?this.restoreHistory(r,!0):t instanceof or&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Pr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=P(P({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=P(P({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Mc(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Hc||{});function eS(n,e){n.events.pipe(mt(t=>t instanceof or||t instanceof Nr||t instanceof Kc||t instanceof fi),K(t=>t instanceof or||t instanceof fi?Hc.COMPLETE:(t instanceof Nr?t.code===yn.Redirect||t.code===yn.SupersededByNewNavigation:!1)?Hc.REDIRECTING:Hc.FAILED),mt(t=>t!==Hc.REDIRECTING),Ir(1)).subscribe(()=>{e()})}function sU(n){throw n}var aU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},pi=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=V(_h),this.stateManager=V(XA),this.options=V(ou,{optional:!0})||{},this.pendingTasks=V(no),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(kv),this.urlSerializer=V(tu),this.location=V(Ms),this.urlHandlingStrategy=V(Pv),this._events=new ze,this.errorHandler=this.options.errorHandler||sU,this.navigated=!1,this.routeReuseStrategy=V(rU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(Kh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(Zh,{optional:!0}),this.eventsSubscription=new Xe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Nr&&r.code!==yn.Redirect&&r.code!==yn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof or)this.navigated=!0;else if(r instanceof Ls){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=P({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||nU(i.source)},s);this.scheduleNavigation(a,Gc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}lU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Gc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=P({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Rv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=P(P({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=kA(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return OA(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=lo(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Gc,null,r)}navigate(t,r={skipLocationChange:!1}){return uU(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=P({},aU):r===!1?i=P({},cU):i=r,lo(t))return pA(this.currentUrlTree,t,i);let o=this.parseUrl(t);return pA(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return eS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function uU(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Y(4008,!1)}function lU(n){return!(n instanceof Qc)&&!(n instanceof Ls)}var tS=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new ze,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof or&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(lo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:wT(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:lo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(oe(pi),oe(ho),ey("tabindex"),oe(ro),oe(ui),oe(xr))}}static{this.\u0275dir=$t({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Ce("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&mh("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ao],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ao],replaceUrl:[2,"replaceUrl","replaceUrl",ao],routerLink:"routerLink"},standalone:!0,features:[Cy,to]})}}return n})();var Qh=class{};var dU=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(mt(t=>t instanceof or),Yr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=gh(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return De(i).pipe(Qr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ee(null);let o=i.pipe(at(s=>s===null?ee(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return De([o,s]).pipe(Qr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(F(pi),F(Ch),F(fn),F(Qh),F(Nv))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),nS=new z(""),hU=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Vs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof or?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof fi&&t.code===jh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Bh&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Bh(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){OT()}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function fU(n){return n.routerState.root}function su(n,e){return{\u0275kind:n,\u0275providers:e}}function pU(){let n=V(Jt);return e=>{let t=n.get(Bn);if(e!==t.components[0])return;let r=n.get(pi),i=n.get(rS);n.get(Ov)===1&&r.initialNavigation(),n.get(iS,null,fe.Optional)?.setUpPreloading(),n.get(nS,null,fe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var rS=new z("",{factory:()=>new ze}),Ov=new z("",{providedIn:"root",factory:()=>1});function gU(){return su(2,[{provide:Ov,useValue:0},{provide:Ih,multi:!0,deps:[Jt],useFactory:e=>{let t=e.get(Bb,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(pi),o=e.get(rS);eS(i,()=>{r(!0)}),e.get(kv).afterPreactivation=()=>(r(!0),o.closed?ee(void 0):o),i.initialNavigation()}))}}])}function mU(){return su(3,[{provide:Ih,multi:!0,useFactory:()=>{let e=V(pi);return()=>{e.setUpLocationChangeListener()}}},{provide:Ov,useValue:2}])}var iS=new z("");function yU(n){return su(0,[{provide:iS,useExisting:dU},{provide:Qh,useExisting:n}])}function vU(){return su(8,[vA,{provide:Zh,useExisting:vA}])}function _U(n){let e=[{provide:YA,useValue:Xj},{provide:JA,useValue:P({skipNextTransition:!!n?.skipInitialTransition},n)}];return su(9,e)}var IA=new z("ROUTER_FORROOT_GUARD"),wU=[Ms,{provide:tu,useClass:Fs},pi,ru,{provide:ho,useFactory:fU,deps:[pi]},Nv,[]],Fv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[wU,[],{provide:Kh,multi:!0,useValue:t},{provide:IA,useFactory:CU,deps:[[pi,new Cs,new Bm]]},{provide:ou,useValue:r||{}},r?.useHash?IU():DU(),EU(),r?.preloadingStrategy?yU(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?TU(r):[],r?.bindToComponentInputs?vU().\u0275providers:[],r?.enableViewTransitions?_U().\u0275providers:[],bU()]}}static forChild(t){return{ngModule:n,providers:[{provide:Kh,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(F(IA,8))}}static{this.\u0275mod=_t({type:n})}static{this.\u0275inj=yt({})}}return n})();function EU(){return{provide:nS,useFactory:()=>{let n=V(zb),e=V(Ie),t=V(ou),r=V(kv),i=V(tu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new hU(i,r,n,e,t)}}}function IU(){return{provide:xr,useClass:Hb}}function DU(){return{provide:xr,useClass:Uy}}function CU(n){return"guarded"}function TU(n){return[n.initialNavigation==="disabled"?mU().\u0275providers:[],n.initialNavigation==="enabledBlocking"?gU().\u0275providers:[]]}var DA=new z("");function bU(){return[{provide:DA,useFactory:pU},{provide:Ss,multi:!0,useExisting:DA}]}var au=class{constructor(){this.name="",this.goalLife="",this.photoUrl="",this.email="",this.phoneNumber="",this.location="",this.socialNetwork=""}};var SU="firebase",MU="10.14.1";Kr(SU,MU,"app");var cu=new Ar("ANGULARFIRE2_VERSION");var xU=(n,e)=>{let t=e?[e]:wD(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},fo=class{constructor(){return xU(RU)}},RU="app-check";function Vv(){}var Jh=class{zone;delegate;constructor(e,t=Ag){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Lv=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vv,{},Vv,Vv)),t.pipe(tt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Xh=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Jh(Zone.current)),this.insideAngular=t.run(()=>new Jh(Zone.current,uc)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(F(Ie))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function NU(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function tn(n){return PU(NU())(n)}function PU(n){return function(t){return t=t.lift(new Lv(n.ngZone)),t.pipe(Rn(n.outsideAngular),wn(n.insideAngular))}}var FU=new Map,VU={activated:!1,tokenObservers:[]},LU={initialized:!1,enabled:!1};function Hn(n){return FU.get(n)||Object.assign({},VU)}function lS(){return LU}var jU="https://content-firebaseappcheck.googleapis.com/v1";var UU="exchangeDebugToken",sS={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},e5=24*60*60*1e3;var Uv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new cg,this.pending.promise.catch(t=>{}),yield BU(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new cg,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function BU(n){return new Promise(e=>{setTimeout(e,n)})}var $U={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},mi=new vD("appCheck","AppCheck",$U);function dS(n){if(!Hn(n).activated)throw mi.create("use-before-activation",{appName:n.name})}function hS(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(y){throw mi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(c.status!==200)throw mi.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(y){throw mi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw mi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function fS(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${jU}/projects/${t}/apps/${r}:${UU}?key=${i}`,body:{debug_token:e}}}var HU="firebase-app-check-database",qU=1,Bv="firebase-app-check-store";var ef=null;function GU(){return ef||(ef=new Promise((n,e)=>{try{let t=indexedDB.open(HU,qU);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(mi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Bv,{keyPath:"compositeKey"})}}}catch(t){e(mi.create("storage-open",{originalErrorMessage:t?.message}))}}),ef)}function zU(n,e){return WU(KU(n),e)}function WU(n,e){return N(this,null,function*(){let r=(yield GU()).transaction(Bv,"readwrite"),o=r.objectStore(Bv).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(mi.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function KU(n){return`${n.options.appId}-${n.name}`}var $v=new bl("@firebase/app-check");function jv(n,e){return Tl()?zU(n,e).catch(t=>{$v.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function pS(){return lS().enabled}function gS(){return N(this,null,function*(){let n=lS();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var QU={error:"UNKNOWN_ERROR"};function ZU(n){return gD.encodeString(JSON.stringify(n),!1)}function Hv(n,e=!1){return N(this,null,function*(){let t=n.app;dS(t);let r=Hn(t),i=r.token,o;if(i&&!uu(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(uu(c)?i=c:yield jv(t,void 0))}if(!e&&i&&uu(i))return{token:i.token};let s=!1;if(pS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=hS(fS(t,yield gS()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield jv(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Hn(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?$v.warn(c.message):$v.error(c),o=c}let a;return i?o?uu(i)?a={token:i.token,internalError:o}:a=cS(o):(a={token:i.token},r.token=i,yield jv(t,i)):a=cS(o),s&&eB(t,a),a})}function YU(n){return N(this,null,function*(){let e=n.app;dS(e);let{provider:t}=Hn(e);if(pS()){let r=yield gS(),{token:i}=yield hS(fS(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function JU(n,e,t,r){let{app:i}=n,o=Hn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&uu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),aS(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>aS(n))}function mS(n,e){let t=Hn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function aS(n){let{app:e}=n,t=Hn(e),r=t.tokenRefresher;r||(r=XU(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function XU(n){let{app:e}=n;return new Uv(()=>N(this,null,function*(){let t=Hn(e),r;if(t.token?r=yield Hv(n,!0):r=yield Hv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Hn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},sS.RETRIAL_MIN_WAIT,sS.RETRIAL_MAX_WAIT)}function eB(n,e){let t=Hn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function uu(n){return n.expireTimeMillis-Date.now()>0}function cS(n){return{token:ZU(QU),error:n}}var qv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Hn(this.app);for(let t of e)mS(this.app,t.next);return Promise.resolve()}};function tB(n,e){return new qv(n,e)}function nB(n){return{getToken:e=>Hv(n,e),getLimitedUseToken:()=>YU(n),addTokenListener:e=>JU(n,"INTERNAL",e),removeTokenListener:e=>mS(n.app,e)}}var rB="@firebase/app-check",iB="0.8.8";var oB="app-check",uS="app-check-internal";function sB(){rc(new Bi(oB,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return tB(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(uS).initialize()})),rc(new Bi(uS,n=>{let e=n.getProvider("app-check").getImmediate();return nB(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Kr(rB,iB)}sB();var aB=["localhost","0.0.0.0","127.0.0.1"],h5=typeof window<"u"&&aB.includes(window.location.hostname);var cB="firebase",uB="10.14.1";un.registerVersion(cB,uB,"app-compat");var lB=["ngOnDestroy"],_S=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(lB.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var tf=class{constructor(e){return e}},Bs=new z("angularfire2.app.options"),$s=new z("angularfire2.app.name");function lu(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=un.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>un.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;dB("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new tf(s)}var dB=(n,...e)=>{Ny()&&typeof console<"u"&&console[n](...e)},hB={provide:tf,useFactory:lu,deps:[Bs,Ie,[new Cs,$s]]},wS=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Bs,useValue:t},{provide:$s,useValue:r}]}}constructor(t){un.registerVersion("angularfire",cu.full,"core"),un.registerVersion("angularfire",cu.full,"app-compat"),un.registerVersion("angular",Db.full,t.toString())}static \u0275fac=function(r){return new(r||n)(F(Dt))};static \u0275mod=_t({type:n});static \u0275inj=yt({providers:[hB]})}return n})();function nf(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return fB(i,s)||(vS("error",`${e} was already initialized on the ${t} Firebase App with different settings.${pB?" You may need to reload as Firebase is not HMR aware.":""}`),vS("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function fB(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var pB=typeof module<"u"&&!!module.hot,vS=(n,...e)=>{Ny()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Gv=new z("angularfire2.auth.use-emulator"),zv=new z("angularfire2.auth.settings"),Wv=new z("angularfire2.auth.tenant-id"),Kv=new z("angularfire2.auth.langugage-code"),Qv=new z("angularfire2.auth.use-device-language"),Zv=new z("angularfire.auth.persistence"),Yv=(n,e,t,r,i,o,s,a)=>nf(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))c.settings[l]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),ES=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,h,p,m,y){let D=new ze,S=ee(void 0).pipe(wn(s.outsideAngular),Qe(()=>o.runOutsideAngular(()=>import("./chunk-SJDVR6DC.js"))),K(()=>lu(t,o,r)),K(M=>Yv(M,o,a,l,h,p,c,m)),id({bufferSize:1,refCount:!1}));if(Rr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ee(null);else{S.pipe(ln()).subscribe();let M=S.pipe(Qe(L=>L.getRedirectResult().then(Z=>Z,()=>null)),tn,id({bufferSize:1,refCount:!1})),j=S.pipe(Qe(L=>new ge(Z=>({unsubscribe:o.runOutsideAngular(()=>L.onAuthStateChanged(re=>Z.next(re),re=>Z.error(re),()=>Z.complete()))})))),G=S.pipe(Qe(L=>new ge(Z=>({unsubscribe:o.runOutsideAngular(()=>L.onIdTokenChanged(re=>Z.next(re),re=>Z.error(re),()=>Z.complete()))}))));this.authState=M.pipe(od(j),Rn(s.outsideAngular),wn(s.insideAngular)),this.user=M.pipe(od(G),Rn(s.outsideAngular),wn(s.insideAngular)),this.idToken=this.user.pipe(Qe(L=>L?De(L.getIdToken()):ee(null))),this.idTokenResult=this.user.pipe(Qe(L=>L?De(L.getIdTokenResult()):ee(null))),this.credential=Rg(M,D,this.authState.pipe(mt(L=>!L))).pipe(K(L=>L?.user?L:null),Rn(s.outsideAngular),wn(s.insideAngular))}return _S(this,S,o,{spy:{apply:(M,j,G)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&G.then(L=>D.next(L))}}})}static \u0275fac=function(r){return new(r||n)(F(Bs),F($s,8),F(Dt),F(Ie),F(Xh),F(Gv,8),F(zv,8),F(Wv,8),F(Kv,8),F(Qv,8),F(Zv,8),F(fo,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var IS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},DS={};var yi,Jv;(function(){var n;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,C,b){for(var _=Array(arguments.length-2),mr=2;mr<arguments.length;mr++)_[mr-2]=arguments[mr];return v.prototype[C].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)I[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;16>C;++C)I[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],C=E.g[2];var b=E.g[3],_=v+(b^w&(C^b))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=b+(C^v&(w^C))+I[1]+3905402710&4294967295,b=v+(_<<12&4294967295|_>>>20),_=C+(w^b&(v^w))+I[2]+606105819&4294967295,C=b+(_<<17&4294967295|_>>>15),_=w+(v^C&(b^v))+I[3]+3250441966&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(b^w&(C^b))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=b+(C^v&(w^C))+I[5]+1200080426&4294967295,b=v+(_<<12&4294967295|_>>>20),_=C+(w^b&(v^w))+I[6]+2821735955&4294967295,C=b+(_<<17&4294967295|_>>>15),_=w+(v^C&(b^v))+I[7]+4249261313&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(b^w&(C^b))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=b+(C^v&(w^C))+I[9]+2336552879&4294967295,b=v+(_<<12&4294967295|_>>>20),_=C+(w^b&(v^w))+I[10]+4294925233&4294967295,C=b+(_<<17&4294967295|_>>>15),_=w+(v^C&(b^v))+I[11]+2304563134&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(b^w&(C^b))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=b+(C^v&(w^C))+I[13]+4254626195&4294967295,b=v+(_<<12&4294967295|_>>>20),_=C+(w^b&(v^w))+I[14]+2792965006&4294967295,C=b+(_<<17&4294967295|_>>>15),_=w+(v^C&(b^v))+I[15]+1236535329&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(C^b&(w^C))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=b+(w^C&(v^w))+I[6]+3225465664&4294967295,b=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(b^v))+I[11]+643717713&4294967295,C=b+(_<<14&4294967295|_>>>18),_=w+(b^v&(C^b))+I[0]+3921069994&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^b&(w^C))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=b+(w^C&(v^w))+I[10]+38016083&4294967295,b=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(b^v))+I[15]+3634488961&4294967295,C=b+(_<<14&4294967295|_>>>18),_=w+(b^v&(C^b))+I[4]+3889429448&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^b&(w^C))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=b+(w^C&(v^w))+I[14]+3275163606&4294967295,b=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(b^v))+I[3]+4107603335&4294967295,C=b+(_<<14&4294967295|_>>>18),_=w+(b^v&(C^b))+I[8]+1163531501&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^b&(w^C))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=b+(w^C&(v^w))+I[2]+4243563512&4294967295,b=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(b^v))+I[7]+1735328473&4294967295,C=b+(_<<14&4294967295|_>>>18),_=w+(b^v&(C^b))+I[12]+2368359562&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(w^C^b)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=b+(v^w^C)+I[8]+2272392833&4294967295,b=v+(_<<11&4294967295|_>>>21),_=C+(b^v^w)+I[11]+1839030562&4294967295,C=b+(_<<16&4294967295|_>>>16),_=w+(C^b^v)+I[14]+4259657740&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^b)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=b+(v^w^C)+I[4]+1272893353&4294967295,b=v+(_<<11&4294967295|_>>>21),_=C+(b^v^w)+I[7]+4139469664&4294967295,C=b+(_<<16&4294967295|_>>>16),_=w+(C^b^v)+I[10]+3200236656&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^b)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=b+(v^w^C)+I[0]+3936430074&4294967295,b=v+(_<<11&4294967295|_>>>21),_=C+(b^v^w)+I[3]+3572445317&4294967295,C=b+(_<<16&4294967295|_>>>16),_=w+(C^b^v)+I[6]+76029189&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^b)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=b+(v^w^C)+I[12]+3873151461&4294967295,b=v+(_<<11&4294967295|_>>>21),_=C+(b^v^w)+I[15]+530742520&4294967295,C=b+(_<<16&4294967295|_>>>16),_=w+(C^b^v)+I[2]+3299628645&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(C^(w|~b))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=b+(w^(v|~C))+I[7]+1126891415&4294967295,b=v+(_<<10&4294967295|_>>>22),_=C+(v^(b|~w))+I[14]+2878612391&4294967295,C=b+(_<<15&4294967295|_>>>17),_=w+(b^(C|~v))+I[5]+4237533241&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~b))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=b+(w^(v|~C))+I[3]+2399980690&4294967295,b=v+(_<<10&4294967295|_>>>22),_=C+(v^(b|~w))+I[10]+4293915773&4294967295,C=b+(_<<15&4294967295|_>>>17),_=w+(b^(C|~v))+I[1]+2240044497&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~b))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=b+(w^(v|~C))+I[15]+4264355552&4294967295,b=v+(_<<10&4294967295|_>>>22),_=C+(v^(b|~w))+I[6]+2734768916&4294967295,C=b+(_<<15&4294967295|_>>>17),_=w+(b^(C|~v))+I[13]+1309151649&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~b))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=b+(w^(v|~C))+I[11]+3174756917&4294967295,b=v+(_<<10&4294967295|_>>>22),_=C+(v^(b|~w))+I[2]+718787259&4294967295,C=b+(_<<15&4294967295|_>>>17),_=w+(b^(C|~v))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+b&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,I=this.B,C=this.h,b=0;b<v;){if(C==0)for(;b<=w;)i(this,E,b),b+=this.blockSize;if(typeof E=="string"){for(;b<v;)if(I[C++]=E.charCodeAt(b++),C==this.blockSize){i(this,I),C=0;break}}else for(;b<v;)if(I[C++]=E[b++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)E[w++]=this.g[v]>>>I&255;return E};function o(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function s(E,v){this.h=v;for(var w=[],I=!0,C=E.length-1;0<=C;C--){var b=E[C]|0;I&&b==v||(w[C]=b,I=!1)}this.g=w}var a={};function c(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return M(l(-E));for(var v=[],w=1,I=0;E>=w;I++)v[I]=E/w|0,w*=4294967296;return new s(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return M(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),I=p,C=0;C<E.length;C+=8){var b=Math.min(8,E.length-C),_=parseInt(E.substring(C,C+b),v);8>b?(b=l(Math.pow(v,b)),I=I.j(b).add(l(_))):(I=I.j(w),I=I.add(l(_)))}return I}var p=c(0),m=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(S(this))return-M(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D(this))return"0";if(S(this))return"-"+M(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,I="";;){var C=Z(w,v).g;w=j(w,C.j(v));var b=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=C,D(w))return b+I;for(;6>b.length;)b="0"+b;I=b+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function D(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function S(E){return E.h==-1}n.l=function(E){return E=j(this,E),S(E)?-1:D(E)?0:1};function M(E){for(var v=E.g.length,w=[],I=0;I<v;I++)w[I]=~E.g[I];return new s(w,~E.h).add(m)}n.abs=function(){return S(this)?M(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0,C=0;C<=v;C++){var b=I+(this.i(C)&65535)+(E.i(C)&65535),_=(b>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);I=_>>>16,b&=65535,_&=65535,w[C]=_<<16|b}return new s(w,w[w.length-1]&-2147483648?-1:0)};function j(E,v){return E.add(M(v))}n.j=function(E){if(D(this)||D(E))return p;if(S(this))return S(E)?M(this).j(M(E)):M(M(this).j(E));if(S(E))return M(this.j(M(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<E.g.length;C++){var b=this.i(I)>>>16,_=this.i(I)&65535,mr=E.i(C)>>>16,Va=E.i(C)&65535;w[2*I+2*C]+=_*Va,G(w,2*I+2*C),w[2*I+2*C+1]+=b*Va,G(w,2*I+2*C+1),w[2*I+2*C+1]+=_*mr,G(w,2*I+2*C+1),w[2*I+2*C+2]+=b*mr,G(w,2*I+2*C+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new s(w,0)};function G(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function L(E,v){this.g=E,this.h=v}function Z(E,v){if(D(v))throw Error("division by zero");if(D(E))return new L(p,p);if(S(E))return v=Z(M(E),v),new L(M(v.g),M(v.h));if(S(v))return v=Z(E,M(v)),new L(M(v.g),v.h);if(30<E.g.length){if(S(E)||S(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,I=v;0>=I.l(E);)w=re(w),I=re(I);var C=X(w,1),b=X(I,1);for(I=X(I,2),w=X(w,2);!D(I);){var _=b.add(I);0>=_.l(E)&&(C=C.add(w),b=_),I=X(I,1),w=X(w,1)}return v=j(E,C.j(v)),new L(C,v)}for(C=p;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),b=l(w),_=b.j(v);S(_)||0<_.l(E);)w-=I,b=l(w),_=b.j(v);D(b)&&(b=m),C=C.add(b),E=j(E,_)}return new L(C,E)}n.A=function(E){return Z(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&E.i(I);return new s(w,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|E.i(I);return new s(w,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^E.i(I);return new s(w,this.h^E.h)};function re(E){for(var v=E.g.length+1,w=[],I=0;I<v;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new s(w,E.h)}function X(E,v){var w=v>>5;v%=32;for(var I=E.g.length-w,C=[],b=0;b<I;b++)C[b]=0<v?E.i(b+w)>>>v|E.i(b+w+1)<<32-v:E.i(b+w);return new s(C,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Jv=DS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,yi=DS.Integer=s}).apply(typeof IS<"u"?IS:typeof self<"u"?self:typeof window<"u"?window:{});var rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kr={};var Xv,mB,Hs,e_,du,of,t_,n_,r_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof rf=="object"&&rf];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var T=u[g];if(!(T in f))break e;f=f[T]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,g=!1,T={next:function(){if(!g&&f<u.length){var x=f++;return{value:d(x,u[x]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),u.apply(d,T)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function D(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,T,x){for(var $=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)$[Ve-2]=arguments[Ve];return d.prototype[T].apply(g,$)}}function S(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function M(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let T=u.length||0,x=g.length||0;u.length=T+x;for(let $=0;$<x;$++)u[T+$]=g[$]}else u.push(g)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function G(u){return/^[\s\xa0]*$/.test(u)}function L(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Z(u){return Z[" "](u),u}Z[" "]=function(){};var re=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function X(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function E(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function v(u){let d={};for(let f in u)d[f]=u[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(u,d){let f,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(f in g)u[f]=g[f];for(let x=0;x<w.length;x++)f=w[x],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function C(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function b(u){a.setTimeout(()=>{throw u},0)}function _(){var u=Fp;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class mr{constructor(){this.h=this.g=null}add(d,f){let g=Va.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Va=new j(()=>new BN,u=>u.reset());class BN{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let La,ja=!1,Fp=new mr,lI=()=>{let u=a.Promise.resolve(void 0);La=()=>{u.then($N)}};var $N=()=>{for(var u;u=_();){try{u.h.call(u.g)}catch(f){b(f)}var d=Va;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}ja=!1};function qr(){this.s=this.s,this.C=this.C}qr.prototype.s=!1,qr.prototype.ma=function(){this.s||(this.s=!0,this.N())},qr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function At(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var HN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function Ua(u,d){if(At.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(re){e:{try{Z(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:qN[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ua.aa.h.call(this)}}D(Ua,At);var qN={2:"touch",3:"pen",4:"mouse"};Ua.prototype.h=function(){Ua.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ba="closure_listenable_"+(1e6*Math.random()|0),GN=0;function zN(u,d,f,g,T){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=T,this.key=++GN,this.da=this.fa=!1}function al(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function cl(u){this.src=u,this.g={},this.h=0}cl.prototype.add=function(u,d,f,g,T){var x=u.toString();u=this.g[x],u||(u=this.g[x]=[],this.h++);var $=Lp(u,d,g,T);return-1<$?(d=u[$],f||(d.fa=!1)):(d=new zN(d,this.src,x,!!g,T),d.fa=f,u.push(d)),d};function Vp(u,d){var f=d.type;if(f in u.g){var g=u.g[f],T=Array.prototype.indexOf.call(g,d,void 0),x;(x=0<=T)&&Array.prototype.splice.call(g,T,1),x&&(al(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function Lp(u,d,f,g){for(var T=0;T<u.length;++T){var x=u[T];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==g)return T}return-1}var jp="closure_lm_"+(1e6*Math.random()|0),Up={};function dI(u,d,f,g,T){if(g&&g.once)return fI(u,d,f,g,T);if(Array.isArray(d)){for(var x=0;x<d.length;x++)dI(u,d[x],f,g,T);return null}return f=qp(f),u&&u[Ba]?u.K(d,f,l(g)?!!g.capture:!!g,T):hI(u,d,f,!1,g,T)}function hI(u,d,f,g,T,x){if(!d)throw Error("Invalid event type");var $=l(T)?!!T.capture:!!T,Ve=$p(u);if(Ve||(u[jp]=Ve=new cl(u)),f=Ve.add(d,f,g,$,x),f.proxy)return f;if(g=WN(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)HN||(T=$),T===void 0&&(T=!1),u.addEventListener(d.toString(),g,T);else if(u.attachEvent)u.attachEvent(gI(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function WN(){function u(f){return d.call(u.src,u.listener,f)}let d=KN;return u}function fI(u,d,f,g,T){if(Array.isArray(d)){for(var x=0;x<d.length;x++)fI(u,d[x],f,g,T);return null}return f=qp(f),u&&u[Ba]?u.L(d,f,l(g)?!!g.capture:!!g,T):hI(u,d,f,!0,g,T)}function pI(u,d,f,g,T){if(Array.isArray(d))for(var x=0;x<d.length;x++)pI(u,d[x],f,g,T);else g=l(g)?!!g.capture:!!g,f=qp(f),u&&u[Ba]?(u=u.i,d=String(d).toString(),d in u.g&&(x=u.g[d],f=Lp(x,f,g,T),-1<f&&(al(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete u.g[d],u.h--)))):u&&(u=$p(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Lp(d,f,g,T)),(f=-1<u?d[u]:null)&&Bp(f))}function Bp(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Ba])Vp(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(gI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=$p(d))?(Vp(f,u),f.h==0&&(f.src=null,d[jp]=null)):al(u)}}}function gI(u){return u in Up?Up[u]:Up[u]="on"+u}function KN(u,d){if(u.da)u=!0;else{d=new Ua(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&Bp(u),u=f.call(g,d)}return u}function $p(u){return u=u[jp],u instanceof cl?u:null}var Hp="__closure_events_fn_"+(1e9*Math.random()>>>0);function qp(u){return typeof u=="function"?u:(u[Hp]||(u[Hp]=function(d){return u.handleEvent(d)}),u[Hp])}function St(){qr.call(this),this.i=new cl(this),this.M=this,this.F=null}D(St,qr),St.prototype[Ba]=!0,St.prototype.removeEventListener=function(u,d,f,g){pI(this,u,d,f,g)};function Ft(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new At(d,u);else if(d instanceof At)d.target=d.target||u;else{var T=d;d=new At(g,u),I(d,T)}if(T=!0,f)for(var x=f.length-1;0<=x;x--){var $=d.g=f[x];T=ul($,g,!0,d)&&T}if($=d.g=u,T=ul($,g,!0,d)&&T,T=ul($,g,!1,d)&&T,f)for(x=0;x<f.length;x++)$=d.g=f[x],T=ul($,g,!1,d)&&T}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)al(f[g]);delete u.g[d],u.h--}}this.F=null},St.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},St.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function ul(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,x=0;x<d.length;++x){var $=d[x];if($&&!$.da&&$.capture==f){var Ve=$.listener,Et=$.ha||$.src;$.fa&&Vp(u.i,$),T=Ve.call(Et,g)!==!1&&T}}return T&&!g.defaultPrevented}function mI(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function yI(u){u.g=mI(()=>{u.g=null,u.i&&(u.i=!1,yI(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class QN extends qr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:yI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $a(u){qr.call(this),this.h=u,this.g={}}D($a,qr);var vI=[];function _I(u){X(u.g,function(d,f){this.g.hasOwnProperty(f)&&Bp(d)},u),u.g={}}$a.prototype.N=function(){$a.aa.N.call(this),_I(this)},$a.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gp=a.JSON.stringify,ZN=a.JSON.parse,YN=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function zp(){}zp.prototype.h=null;function wI(u){return u.h||(u.h=u.i())}function EI(){}var Ha={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wp(){At.call(this,"d")}D(Wp,At);function Kp(){At.call(this,"c")}D(Kp,At);var Vi={},II=null;function ll(){return II=II||new St}Vi.La="serverreachability";function DI(u){At.call(this,Vi.La,u)}D(DI,At);function qa(u){let d=ll();Ft(d,new DI(d))}Vi.STAT_EVENT="statevent";function CI(u,d){At.call(this,Vi.STAT_EVENT,u),this.stat=d}D(CI,At);function Vt(u){let d=ll();Ft(d,new CI(d,u))}Vi.Ma="timingevent";function TI(u,d){At.call(this,Vi.Ma,u),this.size=d}D(TI,At);function Ga(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function za(){this.g=!0}za.prototype.xa=function(){this.g=!1};function JN(u,d,f,g,T,x){u.info(function(){if(u.g)if(x)for(var $="",Ve=x.split("&"),Et=0;Et<Ve.length;Et++){var Me=Ve[Et].split("=");if(1<Me.length){var Mt=Me[0];Me=Me[1];var xt=Mt.split("_");$=2<=xt.length&&xt[1]=="type"?$+(Mt+"="+Me+"&"):$+(Mt+"=redacted&")}}else $=null;else $=x;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+f+`
`+$})}function XN(u,d,f,g,T,x,$){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+f+`
`+x+" "+$})}function $o(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+tP(u,f)+(g?" "+g:"")})}function eP(u,d){u.info(function(){return"TIMEOUT: "+d})}za.prototype.info=function(){};function tP(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var x=T[0];if(x!="noop"&&x!="stop"&&x!="close")for(var $=1;$<T.length;$++)T[$]=""}}}}return Gp(f)}catch{return d}}var dl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qp;function hl(){}D(hl,zp),hl.prototype.g=function(){return new XMLHttpRequest},hl.prototype.i=function(){return{}},Qp=new hl;function Gr(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new $a(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new AI}function AI(){this.i=null,this.g="",this.h=!1}var SI={},Zp={};function Yp(u,d,f){u.L=1,u.v=ml(yr(d)),u.m=f,u.P=!0,MI(u,null)}function MI(u,d){u.F=Date.now(),fl(u),u.A=yr(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),HI(f.i,"t",g),u.C=0,f=u.j.J,u.h=new AI,u.g=aD(u.j,f?d:null,!u.m),0<u.O&&(u.M=new QN(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var T="readystatechange";Array.isArray(T)||(T&&(vI[0]=T.toString()),T=vI);for(var x=0;x<T.length;x++){var $=dI(f,T[x],g||d.handleEvent,!1,d.h||d);if(!$)break;d.g[$.key]=$}d=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),qa(),JN(u.i,u.u,u.A,u.l,u.R,u.m)}Gr.prototype.ca=function(u){u=u.target;let d=this.M;d&&vr(u)==3?d.j():this.Y(u)},Gr.prototype.Y=function(u){try{if(u==this.g)e:{let xt=vr(this.g);var d=this.g.Ba();let Go=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||ZI(this.g)))){this.J||xt!=4||d==7||(d==8||0>=Go?qa(3):qa(2)),Jp(this);var f=this.g.Z();this.X=f;t:if(xI(this)){var g=ZI(this.g);u="";var T=g.length,x=vr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Li(this),Wa(this);var $="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(x&&d==T-1)});g.length=0,this.h.g+=u,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=f==200,XN(this.i,this.u,this.A,this.l,this.R,xt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,Et=this.g;if((Ve=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Ve)){var Me=Ve;break t}}Me=null}if(f=Me)$o(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xp(this,f);else{this.o=!1,this.s=3,Vt(12),Li(this),Wa(this);break e}}if(this.P){f=!0;let Mn;for(;!this.J&&this.C<$.length;)if(Mn=nP(this,$),Mn==Zp){xt==4&&(this.s=4,Vt(14),f=!1),$o(this.i,this.l,null,"[Incomplete Response]");break}else if(Mn==SI){this.s=4,Vt(15),$o(this.i,this.l,$,"[Invalid Chunk]"),f=!1;break}else $o(this.i,this.l,Mn,null),Xp(this,Mn);if(xI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||$.length!=0||this.h.h||(this.s=1,Vt(16),f=!1),this.o=this.o&&f,!f)$o(this.i,this.l,$,"[Invalid Chunked Response]"),Li(this),Wa(this);else if(0<$.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),og(Mt),Mt.M=!0,Vt(11))}}else $o(this.i,this.l,$,null),Xp(this,$);xt==4&&Li(this),this.o&&!this.J&&(xt==4?rD(this.j,this):(this.o=!1,fl(this)))}else _P(this.g),f==400&&0<$.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),Li(this),Wa(this)}}}catch{}finally{}};function xI(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function nP(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?Zp:(f=Number(d.substring(f,g)),isNaN(f)?SI:(g+=1,g+f>d.length?Zp:(d=d.slice(g,g+f),u.C=g+f,d)))}Gr.prototype.cancel=function(){this.J=!0,Li(this)};function fl(u){u.S=Date.now()+u.I,RI(u,u.I)}function RI(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ga(m(u.ba,u),d)}function Jp(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Gr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(eP(this.i,this.A),this.L!=2&&(qa(),Vt(17)),Li(this),this.s=2,Wa(this)):RI(this,this.S-u)};function Wa(u){u.j.G==0||u.J||rD(u.j,u)}function Li(u){Jp(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,_I(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Xp(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||eg(f.h,u))){if(!u.K&&eg(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)El(f),_l(f);else break e;ig(f),Vt(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ga(m(f.Za,f),6e3));if(1>=kI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ui(f,11)}else if((u.K||f.g==u)&&El(f),!G(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let Me=T[d];if(f.T=Me[0],Me=Me[1],f.G==2)if(Me[0]=="c"){f.K=Me[1],f.ia=Me[2];let Mt=Me[3];Mt!=null&&(f.la=Mt,f.j.info("VER="+f.la));let xt=Me[4];xt!=null&&(f.Aa=xt,f.j.info("SVER="+f.Aa));let Go=Me[5];Go!=null&&typeof Go=="number"&&0<Go&&(g=1.5*Go,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Mn=u.g;if(Mn){let Dl=Mn.g?Mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dl){var x=g.h;x.g||Dl.indexOf("spdy")==-1&&Dl.indexOf("quic")==-1&&Dl.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(tg(x,x.h),x.h=null))}if(g.D){let sg=Mn.g?Mn.g.getResponseHeader("X-HTTP-Session-Id"):null;sg&&(g.ya=sg,Be(g.I,g.D,sg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var $=u;if(g.qa=sD(g,g.J?g.ia:null,g.W),$.K){OI(g.h,$);var Ve=$,Et=g.L;Et&&(Ve.I=Et),Ve.B&&(Jp(Ve),fl(Ve)),g.g=$}else tD(g);0<f.i.length&&wl(f)}else Me[0]!="stop"&&Me[0]!="close"||Ui(f,7);else f.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?Ui(f,7):rg(f):Me[0]!="noop"&&f.l&&f.l.ta(Me),f.v=0)}}qa(4)}catch{}}var rP=class{constructor(u,d){this.g=u,this.map=d}};function NI(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function PI(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function kI(u){return u.h?1:u.g?u.g.size:0}function eg(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function tg(u,d){u.g?u.g.add(d):u.h=d}function OI(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}NI.prototype.cancel=function(){if(this.i=FI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function FI(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return S(u.i)}function iP(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function oP(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function VI(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=oP(u),g=iP(u),T=g.length,x=0;x<T;x++)d.call(void 0,g[x],f&&f[x],u)}var LI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sP(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),T=null;if(0<=g){var x=u[f].substring(0,g);T=u[f].substring(g+1)}else x=u[f];d(x,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function ji(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ji){this.h=u.h,pl(this,u.j),this.o=u.o,this.g=u.g,gl(this,u.s),this.l=u.l;var d=u.i,f=new Za;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),jI(this,f),this.m=u.m}else u&&(d=String(u).match(LI))?(this.h=!1,pl(this,d[1]||"",!0),this.o=Ka(d[2]||""),this.g=Ka(d[3]||"",!0),gl(this,d[4]),this.l=Ka(d[5]||"",!0),jI(this,d[6]||"",!0),this.m=Ka(d[7]||"")):(this.h=!1,this.i=new Za(null,this.h))}ji.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Qa(d,UI,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Qa(d,UI,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(Qa(f,f.charAt(0)=="/"?uP:cP,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",Qa(f,dP)),u.join("")};function yr(u){return new ji(u)}function pl(u,d,f){u.j=f?Ka(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function gl(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function jI(u,d,f){d instanceof Za?(u.i=d,hP(u.i,u.h)):(f||(d=Qa(d,lP)),u.i=new Za(d,u.h))}function Be(u,d,f){u.i.set(d,f)}function ml(u){return Be(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ka(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qa(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,aP),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function aP(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var UI=/[#\/\?@]/g,cP=/[#\?:]/g,uP=/[#\?]/g,lP=/[#\?@]/g,dP=/#/g;function Za(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function zr(u){u.g||(u.g=new Map,u.h=0,u.i&&sP(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Za.prototype,n.add=function(u,d){zr(this),this.i=null,u=Ho(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function BI(u,d){zr(u),d=Ho(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function $I(u,d){return zr(u),d=Ho(u,d),u.g.has(d)}n.forEach=function(u,d){zr(this),this.g.forEach(function(f,g){f.forEach(function(T){u.call(d,T,g,this)},this)},this)},n.na=function(){zr(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let T=u[g];for(let x=0;x<T.length;x++)f.push(d[g])}return f},n.V=function(u){zr(this);let d=[];if(typeof u=="string")$I(this,u)&&(d=d.concat(this.g.get(Ho(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return zr(this),this.i=null,u=Ho(this,u),$I(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function HI(u,d,f){BI(u,d),0<f.length&&(u.i=null,u.g.set(Ho(u,d),S(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let x=encodeURIComponent(String(g)),$=this.V(g);for(g=0;g<$.length;g++){var T=x;$[g]!==""&&(T+="="+encodeURIComponent(String($[g]))),u.push(T)}}return this.i=u.join("&")};function Ho(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function hP(u,d){d&&!u.j&&(zr(u),u.i=null,u.g.forEach(function(f,g){var T=g.toLowerCase();g!=T&&(BI(this,g),HI(this,T,f))},u)),u.j=d}function fP(u,d){let f=new za;if(a.Image){let g=new Image;g.onload=y(Wr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Wr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Wr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Wr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function pP(u,d){let f=new za,g=new AbortController,T=setTimeout(()=>{g.abort(),Wr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(x=>{clearTimeout(T),x.ok?Wr(f,"TestPingServer: ok",!0,d):Wr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Wr(f,"TestPingServer: error",!1,d)})}function Wr(u,d,f,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(f)}catch{}}function gP(){this.g=new YN}function mP(u,d,f){let g=f||"";try{VI(u,function(T,x){let $=T;l(T)&&($=Gp(T)),d.push(g+x+"="+encodeURIComponent($))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function Ya(u){this.l=u.Ub||null,this.j=u.eb||!1}D(Ya,zp),Ya.prototype.g=function(){return new yl(this.l,this.j)},Ya.prototype.i=function(u){return function(){return u}}({});function yl(u,d){St.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(yl,St),n=yl.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Xa(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ja(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Xa(this)),this.g&&(this.readyState=3,Xa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qI(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function qI(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Ja(this):Xa(this),this.readyState==3&&qI(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ja(this))},n.Qa=function(u){this.g&&(this.response=u,Ja(this))},n.ga=function(){this.g&&Ja(this)};function Ja(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Xa(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function Xa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(yl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function GI(u){let d="";return X(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function ng(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=GI(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Be(u,d,f))}function Je(u){St.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Je,St);var yP=/^https?$/i,vP=["POST","PUT"];n=Je.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qp.g(),this.v=this.o?wI(this.o):wI(Qp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(x){zI(this,x);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)f.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let x of g.keys())f.set(x,g.get(x));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),T=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(vP,d,void 0))||g||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,$]of f)this.g.setRequestHeader(x,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{QI(this),this.u=!0,this.g.send(u),this.u=!1}catch(x){zI(this,x)}};function zI(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,WI(u),vl(u)}function WI(u){u.A||(u.A=!0,Ft(u,"complete"),Ft(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ft(this,"complete"),Ft(this,"abort"),vl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vl(this,!0)),Je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?KI(this):this.bb())},n.bb=function(){KI(this)};function KI(u){if(u.h&&typeof s<"u"&&(!u.v[1]||vr(u)!=4||u.Z()!=2)){if(u.u&&vr(u)==4)mI(u.Ea,0,u);else if(Ft(u,"readystatechange"),vr(u)==4){u.h=!1;try{let $=u.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=$===0){var T=String(u.D).match(LI)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),g=!yP.test(T?T.toLowerCase():"")}f=g}if(f)Ft(u,"complete"),Ft(u,"success");else{u.m=6;try{var x=2<vr(u)?u.g.statusText:""}catch{x=""}u.l=x+" ["+u.Z()+"]",WI(u)}}finally{vl(u)}}}}function vl(u,d){if(u.g){QI(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||Ft(u,"ready");try{f.onreadystatechange=g}catch{}}}function QI(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function vr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<vr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),ZN(d)}};function ZI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function _P(u){let d={};u=(u.g&&2<=vr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(G(u[g]))continue;var f=C(u[g]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[T]||[];d[T]=x,x.push(f)}E(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ec(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function YI(u){this.Aa=0,this.i=[],this.j=new za,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ec("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ec("baseRetryDelayMs",5e3,u),this.cb=ec("retryDelaySeedMs",1e4,u),this.Wa=ec("forwardChannelMaxRetries",2,u),this.wa=ec("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new NI(u&&u.concurrentRequestLimit),this.Da=new gP,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=YI.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){Vt(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=sD(this,null,this.W),wl(this)};function rg(u){if(JI(u),u.G==3){var d=u.U++,f=yr(u.I);if(Be(f,"SID",u.K),Be(f,"RID",d),Be(f,"TYPE","terminate"),tc(u,f),d=new Gr(u,u.j,d),d.L=2,d.v=ml(yr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=aD(d.j,null),d.g.ea(d.v)),d.F=Date.now(),fl(d)}oD(u)}function _l(u){u.g&&(og(u),u.g.cancel(),u.g=null)}function JI(u){_l(u),u.u&&(a.clearTimeout(u.u),u.u=null),El(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function wl(u){if(!PI(u.h)&&!u.s){u.s=!0;var d=u.Ga;La||lI(),ja||(La(),ja=!0),Fp.add(d,u),u.B=0}}function wP(u,d){return kI(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ga(m(u.Ga,u,d),iD(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let T=new Gr(this,this.j,u),x=this.o;if(this.S&&(x?(x=v(x),I(x,this.S)):x=this.S),this.m!==null||this.O||(T.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=eD(this,T,d),f=yr(this.I),Be(f,"RID",u),Be(f,"CVER",22),this.D&&Be(f,"X-HTTP-Session-Id",this.D),tc(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(GI(x)))+"&"+d:this.m&&ng(f,this.m,x)),tg(this.h,T),this.Ua&&Be(f,"TYPE","init"),this.P?(Be(f,"$req",d),Be(f,"SID","null"),T.T=!0,Yp(T,f,null)):Yp(T,f,d),this.G=2}}else this.G==3&&(u?XI(this,u):this.i.length==0||PI(this.h)||XI(this))};function XI(u,d){var f;d?f=d.l:f=u.U++;let g=yr(u.I);Be(g,"SID",u.K),Be(g,"RID",f),Be(g,"AID",u.T),tc(u,g),u.m&&u.o&&ng(g,u.m,u.o),f=new Gr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=eD(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),tg(u.h,f),Yp(f,g,d)}function tc(u,d){u.H&&X(u.H,function(f,g){Be(d,g,f)}),u.l&&VI({},function(f,g){Be(d,g,f)})}function eD(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var T=u.i;let x=-1;for(;;){let $=["count="+f];x==-1?0<f?(x=T[0].g,$.push("ofs="+x)):x=0:$.push("ofs="+x);let Ve=!0;for(let Et=0;Et<f;Et++){let Me=T[Et].g,Mt=T[Et].map;if(Me-=x,0>Me)x=Math.max(0,T[Et].g-100),Ve=!1;else try{mP(Mt,$,"req"+Me+"_")}catch{g&&g(Mt)}}if(Ve){g=$.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function tD(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;La||lI(),ja||(La(),ja=!0),Fp.add(d,u),u.v=0}}function ig(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ga(m(u.Fa,u),iD(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,nD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ga(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vt(10),_l(this),nD(this))};function og(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function nD(u){u.g=new Gr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=yr(u.qa);Be(d,"RID","rpc"),Be(d,"SID",u.K),Be(d,"AID",u.T),Be(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Be(d,"TO",u.ja),Be(d,"TYPE","xmlhttp"),tc(u,d),u.m&&u.o&&ng(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=ml(yr(d)),f.m=null,f.P=!0,MI(f,u)}n.Za=function(){this.C!=null&&(this.C=null,_l(this),ig(this),Vt(19))};function El(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function rD(u,d){var f=null;if(u.g==d){El(u),og(u),u.g=null;var g=2}else if(eg(u.h,d))f=d.D,OI(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=u.B;g=ll(),Ft(g,new TI(g,f)),wl(u)}else tD(u);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&wP(u,d)||g==2&&ig(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),T){case 1:Ui(u,5);break;case 4:Ui(u,10);break;case 3:Ui(u,6);break;default:Ui(u,2)}}}function iD(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function Ui(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let T=!g;g=new ji(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||pl(g,"https"),ml(g),T?fP(g.toString(),f):pP(g.toString(),f)}else Vt(2);u.G=0,u.l&&u.l.sa(d),oD(u),JI(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function oD(u){if(u.G=0,u.ka=[],u.l){let d=FI(u.h);(d.length!=0||u.i.length!=0)&&(M(u.ka,d),M(u.ka,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.ra()}}function sD(u,d,f){var g=f instanceof ji?yr(f):new ji(f);if(g.g!="")d&&(g.g=d+"."+g.g),gl(g,g.s);else{var T=a.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var x=new ji(null);g&&pl(x,g),d&&(x.g=d),T&&gl(x,T),f&&(x.l=f),g=x}return f=u.D,d=u.ya,f&&d&&Be(g,f,d),Be(g,"VER",u.la),tc(u,g),g}function aD(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Je(new Ya({eb:f})):new Je(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function cD(){}n=cD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Il(){}Il.prototype.g=function(u,d){return new cn(u,d)};function cn(u,d){St.call(this),this.g=new YI(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!G(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!G(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new qo(this)}D(cn,St),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){rg(this.g)},cn.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=Gp(u),u=f);d.i.push(new rP(d.Ya++,u)),d.G==3&&wl(d)},cn.prototype.N=function(){this.g.l=null,delete this.j,rg(this.g),delete this.g,cn.aa.N.call(this)};function uD(u){Wp.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}D(uD,Wp);function lD(){Kp.call(this),this.status=1}D(lD,Kp);function qo(u){this.g=u}D(qo,cD),qo.prototype.ua=function(){Ft(this.g,"a")},qo.prototype.ta=function(u){Ft(this.g,new uD(u))},qo.prototype.sa=function(u){Ft(this.g,new lD)},qo.prototype.ra=function(){Ft(this.g,"b")},Il.prototype.createWebChannel=Il.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,r_=kr.createWebChannelTransport=function(){return new Il},n_=kr.getStatEventTarget=function(){return ll()},t_=kr.Event=Vi,of=kr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dl.NO_ERROR=0,dl.TIMEOUT=8,dl.HTTP_ERROR=6,du=kr.ErrorCode=dl,bI.COMPLETE="complete",e_=kr.EventType=bI,EI.EventType=Ha,Ha.OPEN="a",Ha.CLOSE="b",Ha.ERROR="c",Ha.MESSAGE="d",St.prototype.listen=St.prototype.K,Hs=kr.WebChannel=EI,mB=kr.FetchXmlHttpFactory=Ya,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,Xv=kr.XhrIo=Je}).apply(typeof rf<"u"?rf:typeof self<"u"?self:typeof window<"u"?window:{});var CS="@firebase/firestore";var dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");var wa="10.14.0";var Ci=new bl("@firebase/firestore");function Ks(){return Ci.logLevel}function AM(n){Ci.setLogLevel(n)}function O(n,...e){if(Ci.logLevel<=Qn.DEBUG){let t=e.map(cE);Ci.debug(`Firestore (${wa}): ${n}`,...t)}}function rt(n,...e){if(Ci.logLevel<=Qn.ERROR){let t=e.map(cE);Ci.error(`Firestore (${wa}): ${n}`,...t)}}function qn(n,...e){if(Ci.logLevel<=Qn.WARN){let t=e.map(cE);Ci.warn(`Firestore (${wa}): ${n}`,...t)}}function cE(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Q(n="Unexpected state"){let e=`FIRESTORE (${wa}) INTERNAL ASSERTION FAILED: `+n;throw rt(e),new Error(e)}function J(n,e){n||Q()}function SM(n,e){n||Q()}function H(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends yD{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var pt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var gf=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},u_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(dt.UNAUTHENTICATED))}shutdown(){}},l_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},d_=class{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){J(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new pt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new pt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>N(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new pt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(J(typeof r.accessToken=="string"),new gf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return J(e===null||typeof e=="string"),new dt(e)}},h_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},f_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new h_(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},p_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},g_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){J(this.o===void 0);let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(J(typeof t.token=="string"),this.R=t.token,new p_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function yB(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var mf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=yB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ce(n,e){return n<e?-1:n>e?1:0}function ra(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function MM(n){return n+"\0"}var Ze=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ne=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ze(0,0))}static max(){return new n(new Ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var yf=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Q(),r===void 0?r=e.length-t:r>e.length-t&&Q(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},be=class n extends yf{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},vB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,it=class n extends yf{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return vB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new k(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var q=class n{constructor(e){this.path=e}static fromPath(e){return new n(be.fromString(e))}static fromName(e){return new n(be.fromString(e).popFirst(5))}static empty(){return new n(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new be(e.slice()))}};var ia=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function m_(n){return n.fields.find(e=>e.kind===2)}function go(n){return n.fields.filter(e=>e.kind!==2)}ia.UNKNOWN_ID=-1;var ea=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Du=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,An.min())}};function xM(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new Ze(t+1,0):new Ze(t,r));return new An(i,q.empty(),e)}function RM(n){return new An(n.readTime,n.key,-1)}var An=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ne.min(),q.empty(),-1)}static max(){return new n(ne.max(),q.empty(),-1)}};function uE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=q.comparator(n.documentKey,e.documentKey),t!==0?t:ce(n.largestBatchId,e.largestBatchId))}var NM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ki(n){return N(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==NM)throw n;O("LocalStore","Unexpectedly lost primary lease")})}var A=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var _f=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new pt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Eo(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=lE(r.target.error);this.V.reject(new Eo(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Eo(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new v_(t)}},Ti=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(nc())===12.2&&rt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),mo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Tl())return!1;if(n.v())return!0;let e=nc(),t=n.S(e),r=0<t&&t<10,i=PM(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Eo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Eo(e,s))},i.onupgradeneeded=o=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=_f.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),A.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(O("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function PM(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var y_=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return mo(this.B.delete())}},Eo=class extends k{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Oi(n){return n.name==="IndexedDbTransactionError"}var v_=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(O("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),mo(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),mo(this.store.add(e))}get(e){return mo(this.store.get(e)).next(t=>(t===void 0&&(t=null),O("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),mo(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),mo(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new A((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new A((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new A((r,i)=>{t.onerror=o=>{let s=lE(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new A((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new y_(a),l=t(a.primaryKey,a.value,c);if(l instanceof A){let h=l.catch(p=>(c.done(),A.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>A.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function mo(n){return new A((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=lE(r.target.error);t(i)}})}var TS=!1;function lE(n){let e=Ti.S(nc());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return TS||(TS=!0,setTimeout(()=>{throw r},0)),r}}return n}var __=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Oi(t)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield ki(t)}yield this.X(6e4)}))}},w_=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return A.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return O("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=RM(o);uE(s,r)>0&&(r=s)}),new An(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var vn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function qu(n){return n==null}function Cu(n){return n===0&&1/n==-1/0}function kM(n){return typeof n=="number"&&Number.isInteger(n)&&!Cu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Gt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bS(e)),e=_B(n.get(t),e);return bS(e)}function _B(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function bS(n){return n+""}function sr(n){let e=n.length;if(J(e>=2),e===2)return J(n.charAt(0)===""&&n.charAt(1)===""),be.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&Q(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:Q()}o=s+2}return new be(r)}var AS=["userId","batchId"];function lf(n,e){return[n,Gt(e)]}function OM(n,e,t){return[n,Gt(e),t]}var wB={},EB=["prefixPath","collectionGroup","readTime","documentId"],IB=["prefixPath","collectionGroup","documentId"],DB=["collectionGroup","readTime","prefixPath","documentId"],CB=["canonicalId","targetId"],TB=["targetId","path"],bB=["path","targetId"],AB=["collectionId","parent"],SB=["indexId","uid"],MB=["uid","sequenceNumber"],xB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],RB=["indexId","uid","orderedDocumentKey"],NB=["userId","collectionPath","documentId"],PB=["userId","collectionPath","largestBatchId"],kB=["userId","collectionGroup","largestBatchId"],FM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],OB=[...FM,"documentOverlays"],VM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],LM=VM,dE=[...LM,"indexConfiguration","indexState","indexEntries"],FB=dE,VB=[...dE,"globals"];var Tu=class extends vf{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function gt(n,e){let t=H(n);return Ti.F(t._e,e)}function SS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Po(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ge=class n{constructor(e,t){this.comparator=e,this.root=t||cr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xs(this.root,e,this.comparator,!0)}},Xs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},cr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();let e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}};cr.EMPTY=null,cr.RED=!0,cr.BLACK=!1;cr.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,t,r,i,o){return this}insert(e,t,r){return new cr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var je=class n{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wf(this.data.getIterator())}getIteratorFrom(e){return new wf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},wf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function qs(n){return n.hasNext()?n.getNext():void 0}var _n=class n{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new n([])}unionWith(e){let t=new je(it.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ra(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ef=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function UM(){return typeof atob<"u"}var st=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ef("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};st.EMPTY_BYTE_STRING=new st("");var LB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vr(n){if(J(!!n),typeof n=="string"){let e=0,t=LB.exec(n);if(J(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(n.seconds),nanos:We(n.nanos)}}function We(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function bi(n){return typeof n=="string"?st.fromBase64String(n):st.fromUint8Array(n)}function hp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function hE(n){let e=n.mapValue.fields.__previous_value__;return hp(e)?hE(e):e}function bu(n){let e=Vr(n.mapValue.fields.__local_write_time__.timestampValue);return new Ze(e.seconds,e.nanos)}var E_=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Ai=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ii={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},df={nullValue:"NULL_VALUE"};function Io(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hp(n)?4:BM(n)?9007199254740991:fp(n)?10:11:Q()}function dr(n,e){if(n===e)return!0;let t=Io(n);if(t!==Io(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return bu(n).isEqual(bu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Vr(i.timestampValue),a=Vr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return bi(i.bytesValue).isEqual(bi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return We(i.geoPointValue.latitude)===We(o.geoPointValue.latitude)&&We(i.geoPointValue.longitude)===We(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return We(i.integerValue)===We(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=We(i.doubleValue),a=We(o.doubleValue);return s===a?Cu(s)===Cu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ra(n.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(SS(s)!==SS(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!dr(s[c],a[c])))return!1;return!0}(n,e);default:return Q()}}function Au(n,e){return(n.values||[]).find(t=>dr(t,e))!==void 0}function Si(n,e){if(n===e)return 0;let t=Io(n),r=Io(e);if(t!==r)return ce(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ce(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=We(o.integerValue||o.doubleValue),c=We(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return MS(n.timestampValue,e.timestampValue);case 4:return MS(bu(n),bu(e));case 5:return ce(n.stringValue,e.stringValue);case 6:return function(o,s){let a=bi(o),c=bi(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=ce(a[l],c[l]);if(h!==0)return h}return ce(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ce(We(o.latitude),We(s.latitude));return a!==0?a:ce(We(o.longitude),We(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return xS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,D=(c=m.value)===null||c===void 0?void 0:c.arrayValue,S=ce(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:xS(y,D)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Ii.mapValue&&s===Ii.mapValue)return 0;if(o===Ii.mapValue)return 1;if(s===Ii.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=ce(c[p],h[p]);if(m!==0)return m;let y=Si(a[c[p]],l[h[p]]);if(y!==0)return y}return ce(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Q()}}function MS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ce(n,e);let t=Vr(n),r=Vr(e),i=ce(t.seconds,r.seconds);return i!==0?i:ce(t.nanos,r.nanos)}function xS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Si(t[i],r[i]);if(o)return o}return ce(t.length,r.length)}function oa(n){return I_(n)}function I_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Vr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return bi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=I_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${I_(t.fields[s])}`;return i+"}"}(n.mapValue):Q()}function Do(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function D_(n){return!!n&&"integerValue"in n}function Su(n){return!!n&&"arrayValue"in n}function RS(n){return!!n&&"nullValue"in n}function NS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hf(n){return!!n&&"mapValue"in n}function fp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function vu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Po(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function BM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var $M={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function jB(n){return"nullValue"in n?df:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Do(Ai.empty(),q.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?fp(n)?$M:{mapValue:{}}:Q()}function UB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Do(Ai.empty(),q.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?$M:"mapValue"in n?fp(n)?{mapValue:{}}:Ii:Q()}function PS(n,e){let t=Si(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function kS(n,e){let t=Si(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var kt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!hf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vu(t)}setAll(e){let t=it.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=vu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());hf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];hf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Po(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(vu(this.value))}};function HM(n){let e=[];return Po(n.fields,(t,r)=>{let i=new it([t]);if(hf(r)){let o=HM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new _n(e)}var ht=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ne.min(),ne.min(),ne.min(),kt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ne.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ne.min(),ne.min(),kt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ne.min(),ne.min(),kt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var hr=class{constructor(e,t){this.position=e,this.inclusive=t}};function OS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),t.key):r=Si(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function FS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!dr(n.position[t],e.position[t]))return!1;return!0}var Co=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function BB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var If=class{},Ee=class n extends If{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new b_(e,t,r):t==="array-contains"?new M_(e,r):t==="in"?new Df(e,r):t==="not-in"?new x_(e,r):t==="array-contains-any"?new R_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new A_(e,r):new S_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Si(t,this.value)):t!==null&&Io(this.value)===Io(t)&&this.matchesComparison(Si(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Oe=class n extends If{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return sa(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function sa(n){return n.op==="and"}function C_(n){return n.op==="or"}function fE(n){return qM(n)&&sa(n)}function qM(n){for(let e of n.filters)if(e instanceof Oe)return!1;return!0}function T_(n){if(n instanceof Ee)return n.field.canonicalString()+n.op.toString()+oa(n.value);if(fE(n))return n.filters.map(e=>T_(e)).join(",");{let e=n.filters.map(t=>T_(t)).join(",");return`${n.op}(${e})`}}function GM(n,e){return n instanceof Ee?function(r,i){return i instanceof Ee&&r.op===i.op&&r.field.isEqual(i.field)&&dr(r.value,i.value)}(n,e):n instanceof Oe?function(r,i){return i instanceof Oe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&GM(s,i.filters[a]),!0):!1}(n,e):void Q()}function zM(n,e){let t=n.filters.concat(e);return Oe.create(t,n.op)}function WM(n){return n instanceof Ee?function(t){return`${t.field.canonicalString()} ${t.op} ${oa(t.value)}`}(n):n instanceof Oe?function(t){return t.op.toString()+" {"+t.getFilters().map(WM).join(" ,")+"}"}(n):"Filter"}var b_=class extends Ee{constructor(e,t,r){super(e,t,r),this.key=q.fromName(r.referenceValue)}matches(e){let t=q.comparator(e.key,this.key);return this.matchesComparison(t)}},A_=class extends Ee{constructor(e,t){super(e,"in",t),this.keys=KM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},S_=class extends Ee{constructor(e,t){super(e,"not-in",t),this.keys=KM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function KM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>q.fromName(r.referenceValue))}var M_=class extends Ee{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Su(t)&&Au(t.arrayValue,this.value)}},Df=class extends Ee{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Au(this.value.arrayValue,t)}},x_=class extends Ee{constructor(e,t){super(e,"not-in",t)}matches(e){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Au(this.value.arrayValue,t)}},R_=class extends Ee{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Su(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Au(this.value.arrayValue,r))}};var N_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function P_(n,e=null,t=[],r=[],i=null,o=null,s=null){return new N_(n,e,t,r,i,o,s)}function To(n){let e=H(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>T_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),qu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>oa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>oa(r)).join(",")),e.ue=t}return e.ue}function Gu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!BB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!GM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!FS(n.startAt,e.startAt)&&FS(n.endAt,e.endAt)}function Cf(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Tf(n,e){return n.filters.filter(t=>t instanceof Ee&&t.field.isEqual(e))}function VS(n,e,t){let r=df,i=!0;for(let o of Tf(n,e)){let s=df,a=!0;switch(o.op){case"<":case"<=":s=jB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=df}PS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];PS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function LS(n,e,t){let r=Ii,i=!0;for(let o of Tf(n,e)){let s=Ii,a=!0;switch(o.op){case">=":case">":s=UB(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Ii}kS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];kS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Gn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function QM(n,e,t,r,i,o,s,a){return new Gn(n,e,t,r,i,o,s,a)}function Ea(n){return new Gn(n)}function jS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pE(n){return n.collectionGroup!==null}function ta(n){let e=H(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new je(it.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Co(o,r))}),t.has(it.keyField().canonicalString())||e.ce.push(new Co(it.keyField(),r))}return e.ce}function zt(n){let e=H(n);return e.le||(e.le=$B(e,ta(n))),e.le}function $B(n,e){if(n.limitType==="F")return P_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Co(i.field,o)});let t=n.endAt?new hr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new hr(n.startAt.position,n.startAt.inclusive):null;return P_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function k_(n,e){let t=n.filters.concat([e]);return new Gn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function bf(n,e,t){return new Gn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zu(n,e){return Gu(zt(n),zt(e))&&n.limitType===e.limitType}function ZM(n){return`${To(zt(n))}|lt:${n.limitType}`}function Qs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>WM(i)).join(", ")}]`),qu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>oa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>oa(i)).join(",")),`Target(${r})`}(zt(n))}; limitType=${n.limitType})`}function Wu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of ta(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=OS(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,ta(r),i)||r.endAt&&!function(s,a,c){let l=OS(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,ta(r),i))}(n,e)}function YM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function JM(n){return(e,t)=>{let r=!1;for(let i of ta(n)){let o=HB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function HB(n,e,t){let r=n.field.isKeyField()?q.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Si(c,l):Q()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}var fr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Po(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return jM(this.inner)}size(){return this.innerSize}};var qB=new Ge(q.comparator);function nn(){return qB}var XM=new Ge(q.comparator);function mu(...n){let e=XM;for(let t of n)e=e.insert(t.key,t);return e}function ex(n){let e=XM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ar(){return _u()}function tx(){return _u()}function _u(){return new fr(n=>n.toString(),(n,e)=>n.isEqual(e))}var GB=new Ge(q.comparator),zB=new je(q.comparator);function ue(...n){let e=zB;for(let t of n)e=e.add(t);return e}var WB=new je(ce);function gE(){return WB}function mE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cu(e)?"-0":e}}function nx(n){return{integerValue:""+n}}function rx(n,e){return kM(e)?nx(e):mE(n,e)}var aa=class{constructor(){this._=void 0}};function KB(n,e,t){return n instanceof Mi?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&hp(o)&&(o=hE(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Lr?ox(n,e):n instanceof jr?sx(n,e):function(i,o){let s=ix(i,o),a=US(s)+US(i.Pe);return D_(s)&&D_(i.Pe)?nx(a):mE(i.serializer,a)}(n,e)}function QB(n,e,t){return n instanceof Lr?ox(n,e):n instanceof jr?sx(n,e):t}function ix(n,e){return n instanceof xi?function(r){return D_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Mi=class extends aa{},Lr=class extends aa{constructor(e){super(),this.elements=e}};function ox(n,e){let t=ax(e);for(let r of n.elements)t.some(i=>dr(i,r))||t.push(r);return{arrayValue:{values:t}}}var jr=class extends aa{constructor(e){super(),this.elements=e}};function sx(n,e){let t=ax(e);for(let r of n.elements)t=t.filter(i=>!dr(i,r));return{arrayValue:{values:t}}}var xi=class extends aa{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function US(n){return We(n.integerValue||n.doubleValue)}function ax(n){return Su(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var bo=class{constructor(e,t){this.field=e,this.transform=t}};function ZB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Lr&&i instanceof Lr||r instanceof jr&&i instanceof jr?ra(r.elements,i.elements,dr):r instanceof xi&&i instanceof xi?dr(r.Pe,i.Pe):r instanceof Mi&&i instanceof Mi}(n.transform,e.transform)}var O_=class{constructor(e,t){this.version=e,this.transformResults=t}},et=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ff(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ca=class{};function cx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ni(n.key,et.none()):new Ri(n.key,n.data,et.none());{let t=n.data,r=kt.empty(),i=new je(it.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new zn(n.key,r,new _n(i.toArray()),et.none())}}function YB(n,e,t){n instanceof Ri?function(i,o,s){let a=i.value.clone(),c=$S(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof zn?function(i,o,s){if(!ff(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=$S(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(ux(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function wu(n,e,t,r){return n instanceof Ri?function(o,s,a,c){if(!ff(o.precondition,s))return a;let l=o.value.clone(),h=HS(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof zn?function(o,s,a,c){if(!ff(o.precondition,s))return a;let l=HS(o.fieldTransforms,c,s),h=s.data;return h.setAll(ux(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return ff(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function JB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=ix(r.transform,i||null);o!=null&&(t===null&&(t=kt.empty()),t.set(r.field,o))}return t||null}function BS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ra(r,i,(o,s)=>ZB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ri=class extends ca{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},zn=class extends ca{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function ux(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function $S(n,e,t){let r=new Map;J(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,QB(s,a,t[i]))}return r}function HS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,KB(o,s,e))}return r}var Ni=class extends ca{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Mu=class extends ca{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var xu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&YB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=wu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=wu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=tx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=cx(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ue())}isEqual(e){return this.batchId===e.batchId&&ra(this.mutations,e.mutations,(t,r)=>BS(t,r))&&ra(this.baseMutations,e.baseMutations,(t,r)=>BS(t,r))}},F_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){J(e.mutations.length===r.length);let i=function(){return GB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Ru=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var V_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ut,Te;function lx(n){switch(n){default:return Q();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function dx(n){if(n===void 0)return rt("GRPC error has no .code"),R.UNKNOWN;switch(n){case ut.OK:return R.OK;case ut.CANCELLED:return R.CANCELLED;case ut.UNKNOWN:return R.UNKNOWN;case ut.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case ut.INTERNAL:return R.INTERNAL;case ut.UNAVAILABLE:return R.UNAVAILABLE;case ut.UNAUTHENTICATED:return R.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case ut.NOT_FOUND:return R.NOT_FOUND;case ut.ALREADY_EXISTS:return R.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return R.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case ut.ABORTED:return R.ABORTED;case ut.OUT_OF_RANGE:return R.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return R.UNIMPLEMENTED;case ut.DATA_LOSS:return R.DATA_LOSS;default:return Q()}}(Te=ut||(ut={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";var qS=null;function hx(){return new TextEncoder}var XB=new yi([4294967295,4294967295],0);function GS(n){let e=hx().encode(n),t=new Jv;return t.update(e),new Uint8Array(t.digest())}function zS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new yi([t,r],0),new yi([i,o],0)]}var L_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new wo(`Invalid padding: ${t}`);if(r<0)throw new wo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new wo(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=yi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(yi.fromNumber(r)));return i.compare(XB)===1&&(i=new yi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=GS(e),[r,i]=zS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=GS(e),[r,i]=zS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},wo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Nu=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Pu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ne.min(),i,new Ge(ce),nn(),ue())}},Pu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ue(),ue(),ue())}};var na=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Af=class{constructor(e,t){this.targetId=e,this.me=t}},Sf=class{constructor(e,t,r=st.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Mf=class{constructor(){this.fe=0,this.ge=KS(),this.pe=st.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),t=ue(),r=ue();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new Pu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=KS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,J(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},j_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=nn(),this.qe=WS(),this.Qe=new Ge(ce)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Cf(o))if(r===0){let s=new q(o.path);this.Ue(t,s,ht.newNoDocument(s,ne.min()))}else J(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}qS?.et(function(h,p,m,y,D){var S,M,j,G,L,Z;let re={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},X=p.unchangedNames;return X&&(re.bloomFilter={applied:D===0,hashCount:(S=X?.hashCount)!==null&&S!==void 0?S:0,bitmapLength:(G=(j=(M=X?.bits)===null||M===void 0?void 0:M.bitmap)===null||j===void 0?void 0:j.length)!==null&&G!==void 0?G:0,padding:(Z=(L=X?.bits)===null||L===void 0?void 0:L.padding)!==null&&Z!==void 0?Z:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),re}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=bi(r).toUint8Array()}catch(c){if(c instanceof Ef)return qn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new L_(s,i,o)}catch(c){return qn(c instanceof wo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Cf(a.target)){let c=new q(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,ht.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ue();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Nu(e,t,this.Qe,this.ke,r);return this.ke=nn(),this.qe=WS(),this.Qe=new Ge(ce),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Mf,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new je(ce),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||O("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Mf),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function WS(){return new Ge(q.comparator)}function KS(){return new Ge(q.comparator)}var e$={asc:"ASCENDING",desc:"DESCENDING"},t$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},n$={and:"AND",or:"OR"},U_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function B_(n,e){return n.useProto3Json||qu(e)?e:{value:e}}function ua(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function r$(n,e){return ua(n,e.toTimestamp())}function ot(n){return J(!!n),ne.fromTimestamp(function(t){let r=Vr(t);return new Ze(r.seconds,r.nanos)}(n))}function yE(n,e){return $_(n,e).canonicalString()}function $_(n,e){let t=function(i){return new be(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function px(n){let e=be.fromString(n);return J(Cx(e)),e}function ku(n,e){return yE(n.databaseId,e.path)}function ur(n,e){let t=px(e);if(t.get(1)!==n.databaseId.projectId)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new q(yx(t))}function gx(n,e){return yE(n.databaseId,e)}function mx(n){let e=px(n);return e.length===4?be.emptyPath():yx(e)}function H_(n){return new be(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yx(n){return J(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function QS(n,e,t){return{name:ku(n,e),fields:t.value.mapValue.fields}}function vx(n,e,t){let r=ur(n,e.name),i=ot(e.updateTime),o=e.createTime?ot(e.createTime):ne.min(),s=new kt({mapValue:{fields:e.fields}}),a=ht.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function i$(n,e){return"found"in e?function(r,i){J(!!i.found),i.found.name,i.found.updateTime;let o=ur(r,i.found.name),s=ot(i.found.updateTime),a=i.found.createTime?ot(i.found.createTime):ne.min(),c=new kt({mapValue:{fields:i.found.fields}});return ht.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){J(!!i.missing),J(!!i.readTime);let o=ur(r,i.missing),s=ot(i.readTime);return ht.newNoDocument(o,s)}(n,e):Q()}function o$(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(J(h===void 0||typeof h=="string"),st.fromBase64String(h||"")):(J(h===void 0||h instanceof Buffer||h instanceof Uint8Array),st.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?R.UNKNOWN:dx(l.code);return new k(h,l.message||"")}(s);t=new Sf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ur(n,r.document.name),o=ot(r.document.updateTime),s=r.document.createTime?ot(r.document.createTime):ne.min(),a=new kt({mapValue:{fields:r.document.fields}}),c=ht.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new na(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ur(n,r.document),o=r.readTime?ot(r.readTime):ne.min(),s=ht.newNoDocument(i,o),a=r.removedTargetIds||[];t=new na([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ur(n,r.document),o=r.removedTargetIds||[];t=new na([],o,i,null)}else{if(!("filter"in e))return Q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new V_(i,o),a=r.targetId;t=new Af(a,s)}}return t}function Ou(n,e){let t;if(e instanceof Ri)t={update:QS(n,e.key,e.value)};else if(e instanceof Ni)t={delete:ku(n,e.key)};else if(e instanceof zn)t={update:QS(n,e.key,e.data),updateMask:d$(e.fieldMask)};else{if(!(e instanceof Mu))return Q();t={verify:ku(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Mi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Lr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof jr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof xi)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Q()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:r$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Q()}(n,e.precondition)),t}function q_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?et.updateTime(ot(o.updateTime)):o.exists!==void 0?et.exists(o.exists):et.none()}(e.currentDocument):et.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)J(a.setToServerValue==="REQUEST_TIME"),c=new Mi;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new Lr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new jr(h)}else"increment"in a?c=new xi(s,a.increment):Q();let l=it.fromServerFormat(a.fieldPath);return new bo(l,c)}(n,i)):[];if(e.update){e.update.name;let i=ur(n,e.update.name),o=new kt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new _n(l.map(h=>it.fromServerFormat(h)))}(e.updateMask);return new zn(i,o,s,t,r)}return new Ri(i,o,t,r)}if(e.delete){let i=ur(n,e.delete);return new Ni(i,t)}if(e.verify){let i=ur(n,e.verify);return new Mu(i,t)}return Q()}function s$(n,e){return n&&n.length>0?(J(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?ot(i.updateTime):ot(o);return s.isEqual(ne.min())&&(s=ot(o)),new O_(s,i.transformResults||[])}(t,e))):[]}function _x(n,e){return{documents:[gx(n,e.path)]}}function wx(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=gx(n,i);let o=function(l){if(l.length!==0)return Dx(Oe.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Zs(m.field),direction:c$(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=B_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function Ex(n){let e=mx(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){J(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=Ix(p);return m instanceof Oe&&fE(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(D){return new Co(Ys(D.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,qu(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,y=p.values||[];return new hr(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new hr(y,m)}(t.endAt)),QM(e,i,s,o,a,"F",c,l)}function a$(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ix(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ys(t.unaryFilter.field);return Ee.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ys(t.unaryFilter.field);return Ee.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ys(t.unaryFilter.field);return Ee.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ys(t.unaryFilter.field);return Ee.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(n):n.fieldFilter!==void 0?function(t){return Ee.create(Ys(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Oe.create(t.compositeFilter.filters.map(r=>Ix(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(t.compositeFilter.op))}(n):Q()}function c$(n){return e$[n]}function u$(n){return t$[n]}function l$(n){return n$[n]}function Zs(n){return{fieldPath:n.canonicalString()}}function Ys(n){return it.fromServerFormat(n.fieldPath)}function Dx(n){return n instanceof Ee?function(t){if(t.op==="=="){if(NS(t.value))return{unaryFilter:{field:Zs(t.field),op:"IS_NAN"}};if(RS(t.value))return{unaryFilter:{field:Zs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(NS(t.value))return{unaryFilter:{field:Zs(t.field),op:"IS_NOT_NAN"}};if(RS(t.value))return{unaryFilter:{field:Zs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zs(t.field),op:u$(t.op),value:t.value}}}(n):n instanceof Oe?function(t){let r=t.getFilters().map(i=>Dx(i));return r.length===1?r[0]:{compositeFilter:{op:l$(t.op),filters:r}}}(n):Q()}function d$(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Cx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var la=class n{constructor(e,t,r,i,o=ne.min(),s=ne.min(),a=st.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var xf=class{constructor(e){this.ct=e}};function h$(n,e){let t;if(e.document)t=vx(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=q.fromSegments(e.noDocument.path),i=So(e.noDocument.readTime);t=ht.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Q();{let r=q.fromSegments(e.unknownDocument.path),i=So(e.unknownDocument.version);t=ht.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ze(i[0],i[1]);return ne.fromTimestamp(o)}(e.readTime)),t}function ZS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Rf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:ku(o,s.key),fields:s.data.value.mapValue.fields,updateTime:ua(o,s.version.toTimestamp()),createTime:ua(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ao(e.version)};else{if(!e.isUnknownDocument())return Q();r.unknownDocument={path:t.path.toArray(),version:Ao(e.version)}}return r}function Rf(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ao(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function So(n){let e=new Ze(n.seconds,n.nanoseconds);return ne.fromTimestamp(e)}function yo(n,e){let t=(e.baseMutations||[]).map(o=>q_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>q_(n.ct,o)),i=Ze.fromMillis(e.localWriteTimeMs);return new xu(e.batchId,i,t,r)}function yu(n){let e=So(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?So(n.lastLimboFreeSnapshotVersion):ne.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return J(o.documents.length===1),zt(Ea(mx(o.documents[0])))}(n.query):function(o){return zt(Ex(o))}(n.query),new la(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,st.fromBase64String(n.resumeToken))}function Tx(n,e){let t=Ao(e.snapshotVersion),r=Ao(e.lastLimboFreeSnapshotVersion),i;i=Cf(e.target)?_x(n.ct,e.target):wx(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:To(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function vE(n){let e=Ex({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?bf(e,e.limit,"L"):e}function i_(n,e){return new Ru(e.largestBatchId,q_(n.ct,e.overlayMutation))}function YS(n,e){let t=e.path.lastSegment();return[n,Gt(e.path.popLast()),t]}function JS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ao(r.readTime),documentKey:Gt(r.documentKey.path),largestBatchId:r.largestBatchId}}var G_=class{getBundleMetadata(e,t){return XS(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:So(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return XS(e).put(function(i){return{bundleId:i.id,createTime:Ao(ot(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return eM(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:vE(o.bundledQuery),readTime:So(o.readTime)}}(r)})}saveNamedQuery(e,t){return eM(e).put(function(i){return{name:i.name,readTime:Ao(ot(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function XS(n){return gt(n,"bundles")}function eM(n){return gt(n,"namedQueries")}var Nf=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return hu(e).get(YS(this.userId,t)).next(r=>r?i_(this.serializer,r):null)}getOverlays(e,t){let r=ar();return A.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Ru(t,s);i.push(this.ht(e,a))}),A.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Gt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(hu(e).j("collectionPathOverlayIndex",a))}),A.waitFor(o)}getOverlaysForCollection(e,t,r){let i=ar(),o=Gt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return hu(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=i_(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=ar(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return hu(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=i_(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return hu(e).put(function(i,o,s){let[a,c,l]=YS(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ou(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function hu(n){return gt(n,"documentOverlays")}var z_=class{Pt(e){return gt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?st.fromUint8Array(r):st.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Or=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(We(e.integerValue));else if("doubleValue"in e){let r=We(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Cu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Vr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(bi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?BM(e)?this.dt(t,Number.MAX_SAFE_INTEGER):fp(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Q()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(We(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),q.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Or.vt=new Or;function f$(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function tM(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=f$(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var W_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=tM(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=tM(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},K_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Q_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},vo=class{constructor(){this.jt=new W_,this.Ht=new K_(this.jt),this.Jt=new Q_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var _o=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function vi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=nM(n.arrayValue,e.arrayValue),t!==0?t:(t=nM(n.directionalValue,e.directionalValue),t!==0?t:q.comparator(n.documentKey,e.documentKey)))}function nM(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Pf=class{constructor(e){this.Xt=new je((t,r)=>it.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(J(e.collectionGroup===this.collectionId),this.nn)return!1;let t=m_(e);if(t!==void 0&&!this.sn(t))return!1;let r=go(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new je(it.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new ea(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new ea(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new ea(r.field,r.dir==="asc"?0:1)));return new ia(ia.UNKNOWN_ID,this.collectionId,t,Du.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function bx(n){var e,t;if(J(n instanceof Ee||n instanceof Oe),n instanceof Ee){if(n instanceof Df){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>Ee.create(n.field,"==",o)))||[];return Oe.create(i,"or")}return n}let r=n.filters.map(i=>bx(i));return Oe.create(r,n.op)}function p$(n){if(n.getFilters().length===0)return[];let e=J_(bx(n));return J(Ax(e)),Z_(e)||Y_(e)?[e]:e.getFilters()}function Z_(n){return n instanceof Ee}function Y_(n){return n instanceof Oe&&fE(n)}function Ax(n){return Z_(n)||Y_(n)||function(t){if(t instanceof Oe&&C_(t)){for(let r of t.getFilters())if(!Z_(r)&&!Y_(r))return!1;return!0}return!1}(n)}function J_(n){if(J(n instanceof Ee||n instanceof Oe),n instanceof Ee)return n;if(n.filters.length===1)return J_(n.filters[0]);let e=n.filters.map(r=>J_(r)),t=Oe.create(e,n.op);return t=kf(t),Ax(t)?t:(J(t instanceof Oe),J(sa(t)),J(t.filters.length>1),t.filters.reduce((r,i)=>_E(r,i)))}function _E(n,e){let t;return J(n instanceof Ee||n instanceof Oe),J(e instanceof Ee||e instanceof Oe),t=n instanceof Ee?e instanceof Ee?function(i,o){return Oe.create([i,o],"and")}(n,e):rM(n,e):e instanceof Ee?rM(e,n):function(i,o){if(J(i.filters.length>0&&o.filters.length>0),sa(i)&&sa(o))return zM(i,o.getFilters());let s=C_(i)?i:o,a=C_(i)?o:i,c=s.filters.map(l=>_E(l,a));return Oe.create(c,"or")}(n,e),kf(t)}function rM(n,e){if(sa(e))return zM(e,n.getFilters());{let t=e.filters.map(r=>_E(n,r));return Oe.create(t,"or")}}function kf(n){if(J(n instanceof Ee||n instanceof Oe),n instanceof Ee)return n;let e=n.getFilters();if(e.length===1)return kf(e[0]);if(qM(n))return n;let t=e.map(i=>kf(i)),r=[];return t.forEach(i=>{i instanceof Ee?r.push(i):i instanceof Oe&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Oe.create(r,n.op)}var X_=class{constructor(){this.un=new Fu}addToCollectionParentIndex(e,t){return this.un.add(t),A.resolve()}getCollectionParents(e,t){return A.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return A.resolve()}deleteFieldIndex(e,t){return A.resolve()}deleteAllFieldIndexes(e){return A.resolve()}createTargetIndexes(e,t){return A.resolve()}getDocumentsMatchingTarget(e,t){return A.resolve(null)}getIndexType(e,t){return A.resolve(0)}getFieldIndexes(e,t){return A.resolve([])}getNextCollectionGroupToUpdate(e){return A.resolve(null)}getMinOffset(e,t){return A.resolve(An.min())}getMinOffsetFromCollectionGroup(e,t){return A.resolve(An.min())}updateCollectionGroup(e,t,r){return A.resolve()}updateIndexEntries(e,t){return A.resolve()}},Fu=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new je(be.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new je(be.comparator)).toArray()}};var sf=new Uint8Array(0),ew=class{constructor(e,t){this.databaseId=t,this.cn=new Fu,this.ln=new fr(r=>To(r),(r,i)=>Gu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Gt(i)};return iM(e).put(o)}return A.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[MM(t),""],!1,!0);return iM(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(sr(s.parent))}return r})}addFieldIndex(e,t){let r=fu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=zs(e);return o.next(a=>{s.put(JS(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=fu(e),i=zs(e),o=Gs(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=fu(e),r=Gs(e),i=zs(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return A.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Pf(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Gs(e),i=!0,o=new Map;return A.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ue(),a=[];return A.forEach(o,(c,l)=>{O("IndexedDbIndexManager",`Using index ${function(L){return`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map(Z=>`${Z.fieldPath}:${Z.kind}`).join(",")}`}(c)} to execute ${To(t)}`);let h=function(L,Z){let re=m_(Z);if(re===void 0)return null;for(let X of Tf(L,re.fieldPath))switch(X.op){case"array-contains-any":return X.value.arrayValue.values||[];case"array-contains":return[X.value]}return null}(l,c),p=function(L,Z){let re=new Map;for(let X of go(Z))for(let E of Tf(L,X.fieldPath))switch(E.op){case"==":case"in":re.set(X.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return re.set(X.fieldPath.canonicalString(),E.value),Array.from(re.values())}return null}(l,c),m=function(L,Z){let re=[],X=!0;for(let E of go(Z)){let v=E.kind===0?VS(L,E.fieldPath,L.startAt):LS(L,E.fieldPath,L.startAt);re.push(v.value),X&&(X=v.inclusive)}return new hr(re,X)}(l,c),y=function(L,Z){let re=[],X=!0;for(let E of go(Z)){let v=E.kind===0?LS(L,E.fieldPath,L.endAt):VS(L,E.fieldPath,L.endAt);re.push(v.value),X&&(X=v.inclusive)}return new hr(re,X)}(l,c),D=this.In(c,l,m),S=this.In(c,l,y),M=this.Tn(c,l,p),j=this.En(c.indexId,h,D,m.inclusive,S,y.inclusive,M);return A.forEach(j,G=>r.G(G,t.limit).next(L=>{L.forEach(Z=>{let re=q.fromSegments(Z.documentKey);s.has(re)||(s=s.add(re),a.push(re))})}))}).next(()=>a)}return A.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=p$(Oe.create(e.filters,"and")).map(r=>P_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let m=t?this.dn(t[p/l]):sf,y=this.An(e,m,r[p%l],i),D=this.Rn(e,m,o[p%l],s),S=a.map(M=>this.An(e,m,M,!0));h.push(...this.createRange(y,D,S))}return h}An(e,t,r,i){let o=new _o(e,q.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new _o(e,q.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Pf(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return A.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new je(it.comparator),h=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new vo;for(let i of go(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Or.vt.It(o,s)}return r.zt()}dn(e){let t=new vo;return Or.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new vo;return Or.vt.It(Do(this.databaseId,t),r.Yt(function(o){let s=go(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new vo);let o=0;for(let s of go(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&Su(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);Or.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new vo;c.seed(a.zt()),Or.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof Ee&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=fu(e),i=zs(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return A.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,p){let m=p?new Du(p.sequenceNumber,new An(So(p.readTime),new q(sr(p.documentKey)),p.largestBatchId)):Du.empty(),y=h.fields.map(([D,S])=>new ea(it.fromServerFormat(D),S));return new ia(h.indexId,h.collectionGroup,y,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ce(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=fu(e),o=zs(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>A.forEach(a,c=>o.put(JS(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return A.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?A.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),A.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(o,c);return l.isEqual(h)?A.resolve():this.bn(e,o,c,l,h)}))))})}Dn(e,t,r,i){return Gs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Gs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Gs(e),o=new je(vi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new _o(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new je(vi),i=this.Vn(t,e);if(i==null)return r;let o=m_(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Su(s))for(let a of s.arrayValue.values||[])r=r.add(new _o(t.indexId,e.key,this.dn(a),i))}else r=r.add(new _o(t.indexId,e.key,sf,i));return r}bn(e,t,r,i,o){O("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,h,p,m){let y=c.getIterator(),D=l.getIterator(),S=qs(y),M=qs(D);for(;S||M;){let j=!1,G=!1;if(S&&M){let L=h(S,M);L<0?G=!0:L>0&&(j=!0)}else S!=null?G=!0:j=!0;j?(p(M),M=qs(D)):G?(m(S),S=qs(y)):(S=qs(y),M=qs(D))}}(i,o,vi,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),A.waitFor(s)}yn(e){let t=1;return zs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>vi(s,a)).filter((s,a,c)=>!a||vi(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=vi(s,e),c=vi(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,sf,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,sf,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return vi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(oM)}getMinOffset(e,t){return A.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Q())).next(oM)}};function iM(n){return gt(n,"collectionParents")}function Gs(n){return gt(n,"indexEntries")}function fu(n){return gt(n,"indexConfiguration")}function zs(n){return gt(n,"indexState")}function oM(n){J(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;uE(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new An(e.readTime,e.documentKey,t)}var sM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Sx(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(c.next(()=>{J(a===1)}));let l=[];for(let h of t.mutations){let p=OM(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return A.waitFor(o).next(()=>l)}function Of(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Q();e=n.noDocument}return JSON.stringify(e).length}bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(41943040,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);var Ff=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){J(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _i(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Js(e),s=_i(e);return s.add({}).next(a=>{J(typeof a=="number");let c=new xu(a,t,r,i),l=function(y,D,S){let M=S.baseMutations.map(G=>Ou(y.ct,G)),j=S.mutations.map(G=>Ou(y.ct,G));return{userId:D,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:M,mutations:j}}(this.serializer,this.userId,c),h=[],p=new je((m,y)=>ce(m.canonicalString(),y.canonicalString()));for(let m of i){let y=OM(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,wB))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),A.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return _i(e).get(t).next(r=>r?(J(r.userId===this.userId),yo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?A.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return _i(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(J(a.batchId>=r),o=yo(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return _i(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _i(e).U("userMutationsIndex",t).next(r=>r.map(i=>yo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=lf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Js(e).J({range:i},(s,a,c)=>{let[l,h,p]=s,m=sr(h);if(l===this.userId&&t.path.isEqual(m))return _i(e).get(p).next(y=>{if(!y)throw Q();J(y.userId===this.userId),o.push(yo(this.serializer,y))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new je(ce),i=[];return t.forEach(o=>{let s=lf(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Js(e).J({range:a},(l,h,p)=>{let[m,y,D]=l,S=sr(y);m===this.userId&&o.path.isEqual(S)?r=r.add(D):p.done()});i.push(c)}),A.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=lf(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new je(ce);return Js(e).J({range:s},(c,l,h)=>{let[p,m,y]=c,D=sr(m);p===this.userId&&r.isPrefixOf(D)?D.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(_i(e).get(o).next(s=>{if(s===null)throw Q();J(s.userId===this.userId),r.push(yo(this.serializer,s))}))}),A.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Sx(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),A.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return A.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Js(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=sr(o[1]);i.push(c)}else a.done()}).next(()=>{J(i.length===0)})})}containsKey(e,t){return Mx(e,this.userId,t)}Nn(e){return xx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Mx(n,e,t){let r=lf(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Js(n).J({range:o,H:!0},(a,c,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function _i(n){return gt(n,"mutations")}function Js(n){return gt(n,"documentMutations")}function xx(n){return gt(n,"mutationQueues")}var da=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var tw=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new da(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ne.fromTimestamp(new Ze(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ws(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(J(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Ws(e).J((s,a)=>{let c=yu(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>A.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ws(e).J((r,i)=>{let o=yu(i);t(o)})}qn(e){return aM(e).get("targetGlobalKey").next(t=>(J(t!==null),t))}Qn(e,t){return aM(e).put("targetGlobalKey",t)}Kn(e,t){return Ws(e).put(Tx(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=To(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ws(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=yu(a);Gu(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=wi(e);return t.forEach(s=>{let a=Gt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),A.waitFor(i)}removeMatchingKeys(e,t,r){let i=wi(e);return A.forEach(t,o=>{let s=Gt(o.path);return A.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=wi(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=wi(e),o=ue();return i.J({range:r,H:!0},(s,a,c)=>{let l=sr(s[1]),h=new q(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=Gt(t.path),i=IDBKeyRange.bound([r],[MM(r)],!1,!0),o=0;return wi(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Ws(e).get(t).next(r=>r?yu(r):null)}};function Ws(n){return gt(n,"targets")}function aM(n){return gt(n,"targetGlobal")}function wi(n){return gt(n,"targetDocuments")}function cM([n,e],[t,r]){let i=ce(n,t);return i===0?ce(e,r):i}var nw=class{constructor(e){this.Un=e,this.buffer=new je(cM),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();cM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},rw=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Oi(t)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield ki(t)}yield this.Hn(3e5)}))}},iw=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return A.resolve(vn.oe);let r=new nw(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),A.resolve(sM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sM):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ks()<=Qn.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),A.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function g$(n,e){return new iw(n,e)}var ow=class{constructor(e,t){this.db=e,this.garbageCollector=g$(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return af(e,r)}removeReference(e,t,r){return af(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return af(e,t)}nr(e,t){return function(i,o){let s=!1;return xx(i).Y(a=>Mx(i,a,o).next(c=>(c&&(s=!0),A.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ne.min()),wi(e).delete(function(p){return[0,Gt(p.path)]}(s))))});i.push(c)}}).next(()=>A.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return af(e,t)}tr(e,t){let r=wi(e),i,o=vn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==vn.oe&&t(new q(sr(i)),o),o=l,i=c):o=vn.oe}).next(()=>{o!==vn.oe&&t(new q(sr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function af(n,e){return wi(n).put(function(r,i){return{targetId:0,path:Gt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Vf=class{constructor(){this.changes=new fr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?A.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var sw=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return po(e).put(r)}removeEntry(e,t,r){return po(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Rf(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=ht.newInvalidDocument(t);return po(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(pu(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:ht.newInvalidDocument(t)};return po(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(pu(t))},(i,o)=>{r={document:this.ir(t,o),size:Of(o)}}).next(()=>r)}getEntries(e,t){let r=nn();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=nn(),i=new Ge(q.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Of(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return A.resolve();let i=new je(dM);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(pu(i.first()),pu(i.last())),s=i.getIterator(),a=s.getNext();return po(e).J({index:"documentKeyIndex",range:o},(c,l,h)=>{let p=q.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&dM(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(pu(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Rf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return po(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=nn();for(let p of l){let m=this.ir(q.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Wu(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=nn(),s=lM(t,r),a=lM(t,An.max());return po(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{let p=this.ir(q.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new aw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return uM(e).get("remoteDocumentGlobalKey").next(t=>(J(!!t),t))}rr(e,t){return uM(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=h$(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ne.min())))return r}return ht.newInvalidDocument(e)}};function Rx(n){return new sw(n)}var aw=class extends Vf{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new fr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new je((o,s)=>ce(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=ZS(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Of(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=ZS(this.cr.serializer,s.convertToNoDocument(ne.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),A.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function uM(n){return gt(n,"remoteDocumentGlobal")}function po(n){return gt(n,"remoteDocumentsV14")}function pu(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function lM(n,e){let t=e.documentKey.path.toArray();return[n,Rf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function dM(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ce(t[o],r[o]),i)return i;return i=ce(t.length,r.length),i||(i=ce(t[t.length-2],r[r.length-2]),i||ce(t[t.length-1],r[r.length-1]))}var cw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Lf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&wu(r.mutation,i,_n.empty(),Ze.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ue()){let i=ar();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=mu();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=ar();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ue()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=nn(),s=_u(),a=function(){return _u()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof zn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),wu(h.mutation,l,h.mutation.getFieldMask(),Ze.now())):s.set(l.key,_n.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new cw(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=_u(),i=new Ge((s,a)=>s-a),o=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||_n.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||ue()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=tx();h.forEach(m=>{if(!o.has(m)){let y=cx(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return A.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):A.resolve(ar()),a=-1,c=o;return s.next(l=>A.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?A.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ue())).next(h=>({batchId:a,changes:ex(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new q(t)).next(r=>{let i=mu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=mu();return this.indexManager.getCollectionParents(e,o).next(a=>A.forEach(a,c=>{let l=function(p,m){return new Gn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,ht.newInvalidDocument(h)))});let a=mu();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&wu(h.mutation,l,_n.empty(),Ze.now()),Wu(t,l)&&(a=a.insert(c,l))}),a})}};var uw=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return A.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ot(i.createTime)}}(t)),A.resolve()}getNamedQuery(e,t){return A.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:vE(i.bundledQuery),readTime:ot(i.readTime)}}(t)),A.resolve()}};var lw=class{constructor(){this.overlays=new Ge(q.comparator),this.Ir=new Map}getOverlay(e,t){return A.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ar();return A.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),A.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),A.resolve()}getOverlaysForCollection(e,t,r){let i=ar(),o=t.length+1,s=new q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return A.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ge((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=ar(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ar(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return A.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ru(t,r));let o=this.Ir.get(t);o===void 0&&(o=ue(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var dw=class{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return A.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,A.resolve()}};var Vu=class{constructor(){this.Tr=new je(lt.Er),this.dr=new je(lt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new lt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new lt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new q(new be([])),r=new lt(t,e),i=new lt(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new q(new be([])),r=new lt(t,e),i=new lt(t,e+1),o=ue();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new lt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},lt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return q.comparator(e.key,t.key)||ce(e.wr,t.wr)}static Ar(e,t){return ce(e.wr,t.wr)||q.comparator(e.key,t.key)}};var hw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new je(lt.Er)}checkEmpty(e){return A.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new xu(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new lt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return A.resolve(s)}lookupMutationBatch(e,t){return A.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return A.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return A.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new lt(t,0),i=new lt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),A.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new je(ce);return t.forEach(i=>{let o=new lt(i,0),s=new lt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),A.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new lt(new q(o),0),a=new je(ce);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),A.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){J(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return A.forEach(t.mutations,i=>{let o=new lt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new lt(t,0),i=this.br.firstAfterOrEqual(r);return A.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,A.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var fw=class{constructor(e){this.Mr=e,this.docs=function(){return new Ge(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return A.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(t))}getEntries(e,t){let r=nn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ht.newInvalidDocument(i))}),A.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=nn(),s=t.path,a=new q(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||uE(RM(h),r)<=0||(i.has(h.key)||Wu(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return A.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Q()}Or(e,t){return A.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new pw(this)}getSize(e){return A.resolve(this.size)}},pw=class extends Vf{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),A.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var gw=class{constructor(e){this.persistence=e,this.Nr=new fr(t=>To(t),Gu),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Vu,this.targetCount=0,this.kr=da.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),A.resolve()}getLastRemoteSnapshotVersion(e){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return A.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),A.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new da(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,A.resolve()}updateTargetData(e,t){return this.Kn(t),A.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,A.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),A.waitFor(o).next(()=>i)}getTargetCount(e){return A.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return A.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),A.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),A.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),A.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return A.resolve(r)}containsKey(e,t){return A.resolve(this.Br.containsKey(t))}};var jf=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new vn(0),this.Kr=!1,this.Kr=!0,this.$r=new dw,this.referenceDelegate=e(this),this.Ur=new gw(this),this.indexManager=new X_,this.remoteDocumentCache=function(i){return new fw(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new xf(t),this.Gr=new uw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new hw(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("MemoryPersistence","Starting transaction:",e);let i=new mw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return A.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},mw=class extends vf{constructor(e){super(),this.currentSequenceNumber=e}},Uf=class n{constructor(e){this.persistence=e,this.Jr=new Vu,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),A.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),A.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),A.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ne.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return A.or([()=>A.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var yw=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new _f("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",AS,{unique:!0}),c.createObjectStore("documentMutations")}(e),hM(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=A.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),hM(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ne.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",AS,{unique:!0});let p=l.store("mutations"),m=h.map(y=>p.put(y));return A.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:NB});l.createIndex("collectionPathOverlayIndex",PB,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",kB,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:EB});l.createIndex("documentKeyIndex",IB),l.createIndex("collectionGroupIndex",DB)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:SB}).createIndex("sequenceNumberIndex",MB,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:xB}).createIndex("documentKeyIndex",RB,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Of(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>A.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>A.forEach(a,c=>{J(c.userId===o.userId);let l=yo(this.serializer,c);return Sx(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new be(s),l=function(p){return[0,Gt(p)]}(c);o.push(t.get(l).next(h=>h?A.resolve():(p=>t.put({targetId:0,path:Gt(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>A.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:AB});let r=t.store("collectionParents"),i=new Fu,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Gt(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new be(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let h=sr(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=yu(i),s=Tx(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new q(be.fromString(p.document.name).popFirst(5)):p.noDocument?q.fromSegments(p.noDocument.path):p.unknownDocument?q.fromSegments(p.unknownDocument.path):Q()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>A.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=Rx(this.serializer),o=new jf(Uf.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:ue();yo(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),A.forEach(a,(c,l)=>{let h=new dt(l),p=Nf.lt(this.serializer,h),m=o.getIndexManager(h),y=Ff.lt(h,this.serializer,m,o.referenceDelegate);return new Lf(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Tu(t,vn.oe),c).next()})})}};function hM(n){n.createObjectStore("targetDocuments",{keyPath:TB}).createIndex("documentTargetsIndex",bB,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",CB,{unique:!0}),n.createObjectStore("targetGlobal")}var o_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",vw=class n{constructor(e,t,r,i,o,s,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new k(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ow(this,i),this.Ai=t+"main",this.serializer=new xf(c),this.Ri=new Ti(this.Ai,this.hi,new yw(this.serializer)),this.$r=new z_,this.Ur=new tw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Rx(this.serializer),this.Gr=new G_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&rt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,o_);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new vn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Oi(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return gu(e).get("owner").next(t=>A.resolve(this.vi(t)))}Ci(e){return cf(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=gt(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return A.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?A.resolve(!0):gu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,o_);return!1}}return!(!this.networkEnabled||!this.inForeground)||cf(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&O("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Tu(e,vn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>cf(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Ff.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ew(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Nf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?VB:c===16?FB:c===15?dE:c===14?LM:c===13?VM:c===12?OB:c===11?FM:void Q()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Tu(a,this.Qr?this.Qr.next():vn.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw rt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new k(R.FAILED_PRECONDITION,NM);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return gu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new k(R.FAILED_PRECONDITION,o_)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gu(e).put("owner",t)}static D(){return Ti.D()}bi(e){let t=gu(e);return t.get("owner").next(r=>this.vi(r)?(O("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):A.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(rt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;ug()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return rt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){rt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function gu(n){return gt(n,"owner")}function cf(n){return gt(n,"clientMetadata")}function wE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var _w=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ue(),i=ue();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var ww=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Bf=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ug()?8:PM(nc())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new ww;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ks()<=Qn.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",Qs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),A.resolve()):(Ks()<=Qn.DEBUG&&O("QueryEngine","Query:",Qs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ks()<=Qn.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",Qs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zt(t))):A.resolve())}Yi(e,t){if(jS(t))return A.resolve(null);let r=zt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=bf(t,null,"F"),r=zt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ue(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,bf(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return jS(t)||i.isEqual(ne.min())?A.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?A.resolve(null):(Ks()<=Qn.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qs(t)),this.rs(e,s,t,xM(i,-1)).next(a=>a))})}ts(e,t){let r=new je(JM(e));return t.forEach((i,o)=>{Wu(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Ks()<=Qn.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Qs(t)),this.Ji.getDocumentsMatchingQuery(e,t,An.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Ew=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ge(ce),this._s=new fr(o=>To(o),Gu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Nx(n,e,t,r){return new Ew(n,e,t,r)}function Px(n,e){return N(this,null,function*(){let t=H(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ue();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function m$(n,e){let t=H(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),y=A.resolve();return m.forEach(D=>{y=y.next(()=>h.getEntry(c,D)).next(S=>{let M=l.docVersions.get(D);J(M!==null),S.version.compareTo(M)<0&&(p.applyToRemoteDocument(S,l),S.isValidDocument()&&(S.setReadTime(l.commitVersion),h.addEntry(S)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ue();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function kx(n){let e=H(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function y$(n,e){let t=H(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(st.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(S,M,j){return S.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(m,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let c=nn(),l=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Ox(o,s,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(ne.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return A.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function Ox(n,e,t){let r=ue(),i=ue();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=nn();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ne.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function v$(n,e){let t=H(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ha(n,e){let t=H(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,A.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new la(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function fa(n,e,t){return N(this,null,function*(){let r=H(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Oi(s))throw s;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function $f(n,e,t){let r=H(n),i=ne.min(),o=ue();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=H(c),m=p._s.get(h);return m!==void 0?A.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,zt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:ne.min(),t?o:ue())).next(a=>(Lx(r,YM(e),a),{documents:a,Ts:o})))}function Fx(n,e){let t=H(n),r=H(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function Vx(n,e){let t=H(n),r=t.us.get(e)||ne.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,xM(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Lx(t,e,i),i))}function Lx(n,e,t){let r=n.us.get(e)||ne.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function _$(n,e,t,r){return N(this,null,function*(){let i=H(n),o=ue(),s=nn();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield ha(i,function(h){return zt(Ea(be.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>Ox(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function w$(r,i){return N(this,arguments,function*(n,e,t=ue()){let o=yield ha(n,zt(vE(e.bundledQuery))),s=H(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=ot(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(st.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function fM(n,e){return`firestore_clients_${n}_${e}`}function pM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function s_(n,e){return`firestore_targets_${n}_${e}`}var Hf=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(rt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Eu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new n(e,r.state,i):(rt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},qf=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=gE();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=kM(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(rt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},Iw=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(rt("SharedClientState",`Failed to parse online state: ${e}`),null)}},Lu=class{constructor(){this.activeTargetIds=gE()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Iu=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ge(ce),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=fM(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Lu),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(fM(this.persistenceKey,r));if(i){let o=qf.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(s_(this.persistenceKey,e));if(i){let o=Eu.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(s_(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return O("SharedClientState","READ",e,t),t}setItem(e,t){O("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(O("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void rt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=vn.oe;if(o!=null)try{let a=JSON.parse(o);J(typeof a=="number"),s=a}catch(a){rt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==vn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Hf(this.currentUser,e,t,r),o=pM(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=pM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=s_(this.persistenceKey,e),o=new Eu(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return qf.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Hf.Rs(new dt(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Eu.Rs(i,t)}Ls(e){return Iw.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=gE();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Gf=class{constructor(){this.so=new Lu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Lu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Dw=class{_o(e){}shutdown(){}};var zf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var uf=null;function a_(){return uf===null?uf=function(){return 268435456+Math.round(2147483648*Math.random())}():uf++,"0x"+uf.toString(16)}var E$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Cw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Pt="WebChannelConnection",Tw=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=a_(),c=this.xo(t,r.toUriEncodedString());O("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(h=>(O("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw qn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=E$[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=a_();return new Promise((s,a)=>{let c=new Xv;c.setWithCredentials(!0),c.listenOnce(e_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case du.NO_ERROR:let h=c.getResponseJson();O(Pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case du.TIMEOUT:O(Pt,`RPC '${e}' ${o} timed out`),a(new k(R.DEADLINE_EXCEEDED,"Request time out"));break;case du.HTTP_ERROR:let p=c.getStatus();if(O(Pt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let D=function(M){let j=M.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(j)>=0?j:R.UNKNOWN}(y.status);a(new k(D,y.message))}else a(new k(R.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new k(R.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{O(Pt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);O(Pt,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=a_(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=r_(),a=n_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");O(Pt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c),m=!1,y=!1,D=new Cw({Io:M=>{y?O(Pt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(O(Pt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),O(Pt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},To:()=>p.close()}),S=(M,j,G)=>{M.listen(j,L=>{try{G(L)}catch(Z){setTimeout(()=>{throw Z},0)}})};return S(p,Hs.EventType.OPEN,()=>{y||(O(Pt,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),S(p,Hs.EventType.CLOSE,()=>{y||(y=!0,O(Pt,`RPC '${e}' stream ${i} transport closed`),D.So())}),S(p,Hs.EventType.ERROR,M=>{y||(y=!0,qn(Pt,`RPC '${e}' stream ${i} transport errored:`,M),D.So(new k(R.UNAVAILABLE,"The operation could not be completed")))}),S(p,Hs.EventType.MESSAGE,M=>{var j;if(!y){let G=M.data[0];J(!!G);let L=G,Z=L.error||((j=L[0])===null||j===void 0?void 0:j.error);if(Z){O(Pt,`RPC '${e}' stream ${i} received error:`,Z);let re=Z.status,X=function(w){let I=ut[w];if(I!==void 0)return dx(I)}(re),E=Z.message;X===void 0&&(X=R.INTERNAL,E="Unknown error status: "+re+" with message "+Z.message),y=!0,D.So(new k(X,E)),p.close()}else O(Pt,`RPC '${e}' stream ${i} received:`,G),D.bo(G)}}),S(a,t_.STAT_EVENT,M=>{M.stat===of.PROXY?O(Pt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===of.NOPROXY&&O(Pt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function jx(){return typeof window<"u"?window:null}function pf(){return typeof document<"u"?document:null}function Ku(n){return new U_(n,!0)}var ju=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Wf=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ju(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(rt(t.toString()),rt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new k(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},bw=class extends Wf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=o$(this.serializer,e),r=function(o){if(!("targetChange"in o))return ne.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ne.min():s.readTime?ot(s.readTime):ne.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=H_(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=Cf(c)?{documents:_x(o,c)}:{query:wx(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=fx(o,s.resumeToken);let l=B_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ne.min())>0){a.readTime=ua(o,s.snapshotVersion.toTimestamp());let l=B_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=a$(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=H_(this.serializer),t.removeTarget=e,this.a_(t)}},Aw=class extends Wf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return J(!!e.streamToken),this.lastStreamToken=e.streamToken,J(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){J(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=s$(e.writeResults,e.commitTime),r=ot(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=H_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Ou(this.serializer,r))};this.a_(t)}};var Sw=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,$_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(R.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,$_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Mw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rt(t),this.D_=!1):O("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var xw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){Fi(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(c){return N(this,null,function*(){let l=H(c);l.L_.add(4),yield Ia(l),l.q_.set("Unknown"),l.L_.delete(4),yield Qu(l)})}(this))}))}),this.q_=new Mw(r,i)}};function Qu(n){return N(this,null,function*(){if(Fi(n))for(let e of n.B_)yield e(!0)})}function Ia(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function pp(n,e){let t=H(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),DE(t)?IE(t):Ca(t).r_()&&EE(t,e))}function pa(n,e){let t=H(n),r=Ca(t);t.N_.delete(e),r.r_()&&Ux(t,e),t.N_.size===0&&(r.r_()?r.o_():Fi(t)&&t.q_.set("Unknown"))}function EE(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ca(n).A_(e)}function Ux(n,e){n.Q_.xe(e),Ca(n).R_(e)}function IE(n){n.Q_=new j_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ca(n).start(),n.q_.v_()}function DE(n){return Fi(n)&&!Ca(n).n_()&&n.N_.size>0}function Fi(n){return H(n).L_.size===0}function Bx(n){n.Q_=void 0}function I$(n){return N(this,null,function*(){n.q_.set("Online")})}function D$(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{EE(n,e)})})}function C$(n,e){return N(this,null,function*(){Bx(n),DE(n)?(n.q_.M_(e),IE(n)):n.q_.set("Unknown")})}function T$(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof Sf&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Kf(n,r)}else if(e instanceof na?n.Q_.Ke(e):e instanceof Af?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ne.min()))try{let r=yield kx(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(st.EMPTY_BYTE_STRING,h.snapshotVersion)),Ux(o,c);let p=new la(h.target,c,l,h.sequenceNumber);EE(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield Kf(n,r)}})}function Kf(n,e,t){return N(this,null,function*(){if(!Oi(e))throw e;n.L_.add(1),yield Ia(n),n.q_.set("Offline"),t||(t=()=>kx(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Qu(n)}))})}function $x(n,e){return e().catch(t=>Kf(n,t,e))}function Da(n){return N(this,null,function*(){let e=H(n),t=Pi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;b$(e);)try{let i=yield v$(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,A$(e,i)}catch(i){yield Kf(e,i)}Hx(e)&&qx(e)})}function b$(n){return Fi(n)&&n.O_.length<10}function A$(n,e){n.O_.push(e);let t=Pi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Hx(n){return Fi(n)&&!Pi(n).n_()&&n.O_.length>0}function qx(n){Pi(n).start()}function S$(n){return N(this,null,function*(){Pi(n).p_()})}function M$(n){return N(this,null,function*(){let e=Pi(n);for(let t of n.O_)e.m_(t.mutations)})}function x$(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=F_.from(r,e,t);yield $x(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Da(n)})}function R$(n,e){return N(this,null,function*(){e&&Pi(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return lx(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();Pi(r).s_(),yield $x(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Da(r)}})}(n,e)),Hx(n)&&qx(n)})}function gM(n,e){return N(this,null,function*(){let t=H(n);t.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=Fi(t);t.L_.add(3),yield Ia(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Qu(t)})}function Rw(n,e){return N(this,null,function*(){let t=H(n);e?(t.L_.delete(2),yield Qu(t)):e||(t.L_.add(2),yield Ia(t),t.q_.set("Unknown"))})}function Ca(n){return n.K_||(n.K_=function(t,r,i){let o=H(t);return o.w_(),new bw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:I$.bind(null,n),Ro:D$.bind(null,n),mo:C$.bind(null,n),d_:T$.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),DE(n)?IE(n):n.q_.set("Unknown")):(yield n.K_.stop(),Bx(n))}))),n.K_}function Pi(n){return n.U_||(n.U_=function(t,r,i){let o=H(t);return o.w_(),new Aw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:S$.bind(null,n),mo:R$.bind(null,n),f_:M$.bind(null,n),g_:x$.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield Da(n)):(yield n.U_.stop(),n.O_.length>0&&(O("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Nw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new pt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ta(n,e){if(rt("AsyncQueue",`${e}: ${n}`),Oi(n))return new k(R.UNAVAILABLE,`${e}: ${n}`);throw n}var Qf=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||q.comparator(t.key,r.key):(t,r)=>q.comparator(t.key,r.key),this.keyedMap=mu(),this.sortedSet=new Ge(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Zf=class{constructor(){this.W_=new Ge(q.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ga=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Qf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Pw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},kw=class{constructor(){this.queries=mM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=H(t),o=i.queries;i.queries=mM(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new k(R.ABORTED,"Firestore shutting down"))}};function mM(){return new fr(n=>ZM(n),zu)}function CE(n,e){return N(this,null,function*(){let t=H(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Pw,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Ta(s,`Initialization of query '${Qs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&bE(t)})}function TE(n,e){return N(this,null,function*(){let t=H(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function N$(n,e){let t=H(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&bE(t)}function P$(n,e,t){let r=H(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function bE(n){n.Y_.forEach(e=>{e.next()})}var Ow,yM;(yM=Ow||(Ow={})).ea="default",yM.Cache="cache";var Uu=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ga(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ga.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ow.Cache}};var Fw=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Yf=class{constructor(e){this.serializer=e}Es(e){return ur(this.serializer,e)}ds(e){return e.metadata.exists?vx(this.serializer,e.document,!1):ht.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ot(e)}},Vw=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Gx(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=be.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Yf(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ue()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield _$(this.localStore,new Yf(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield w$(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function Gx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Jf=class{constructor(e){this.key=e}},Xf=class{constructor(e){this.key=e}},ep=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=JM(e),this.Ra=new Qf(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Zf,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Wu(this.query,p)?p:null,D=!!m&&this.mutatedKeys.has(m.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;m&&y?m.data.isEqual(y.data)?D!==S&&(r.track({type:3,doc:y}),M=!0):this.ga(m,y)||(r.track({type:2,doc:y}),M=!0,(c&&this.Aa(y,c)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(c||l)&&(a=!0)),M&&(y?(s=s.add(y),o=S?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(y,D){let S=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return S(y)-S(D)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new ga(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Zf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ue(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Xf(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Jf(r))}),t}ba(e){this.Ta=e.Ts,this.da=ue();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ga.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Lw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},jw=class{constructor(e){this.key=e,this.va=!1}},Uw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new fr(a=>ZM(a),zu),this.Ma=new Map,this.xa=new Set,this.Oa=new Ge(q.comparator),this.Na=new Map,this.La=new Vu,this.Ba={},this.ka=new Map,this.qa=da.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function k$(n,e,t=!0){return N(this,null,function*(){let r=gp(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield zx(r,e,t,!0),i})}function O$(n,e){return N(this,null,function*(){let t=gp(n);yield zx(t,e,!0,!1)})}function zx(n,e,t,r){return N(this,null,function*(){let i=yield ha(n.localStore,zt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield AE(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&pp(n.remoteStore,i),a})}function AE(n,e,t,r,i){return N(this,null,function*(){n.Ka=(p,m,y)=>function(S,M,j,G){return N(this,null,function*(){let L=M.view.ma(j);L.ns&&(L=yield $f(S.localStore,M.query,!1).then(({documents:E})=>M.view.ma(E,L)));let Z=G&&G.targetChanges.get(M.targetId),re=G&&G.targetMismatches.get(M.targetId)!=null,X=M.view.applyChanges(L,S.isPrimaryClient,Z,re);return Bw(S,M.targetId,X.wa),X.snapshot})}(n,p,m,y);let o=yield $f(n.localStore,e,!0),s=new ep(e,o.Ts),a=s.ma(o.documents),c=Pu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);Bw(n,t,l.wa);let h=new Lw(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function F$(n,e,t){return N(this,null,function*(){let r=H(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!zu(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield fa(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&pa(r.remoteStore,i.targetId),ma(r,i.targetId)}).catch(ki))):(ma(r,i.targetId),yield fa(r.localStore,i.targetId,!0))})}function V$(n,e){return N(this,null,function*(){let t=H(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),pa(t.remoteStore,r.targetId))})}function L$(n,e,t){return N(this,null,function*(){let r=RE(n);try{let i=yield function(s,a){let c=H(s),l=Ze.now(),h=a.reduce((y,D)=>y.add(D.key),ue()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=nn(),S=ue();return c.cs.getEntries(y,h).next(M=>{D=M,D.forEach((j,G)=>{G.isValidDocument()||(S=S.add(j))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,D)).next(M=>{p=M;let j=[];for(let G of a){let L=JB(G,p.get(G.key).overlayedDocument);L!=null&&j.push(new zn(G.key,L,HM(L.value.mapValue),et.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,j,a)}).next(M=>{m=M;let j=M.applyToLocalDocumentSet(p,S);return c.documentOverlayCache.saveOverlays(y,M.batchId,j)})}).then(()=>({batchId:m.batchId,changes:ex(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new Ge(ce)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield $r(r,i.changes),yield Da(r.remoteStore)}catch(i){let o=Ta(i,"Failed to persist write");t.reject(o)}})}function Wx(n,e){return N(this,null,function*(){let t=H(n);try{let r=yield y$(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(J(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?J(s.va):i.removedDocuments.size>0&&(J(s.va),s.va=!1))}),yield $r(t,r,e)}catch(r){yield ki(r)}})}function vM(n,e,t){let r=H(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=H(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&bE(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function j$(n,e,t){return N(this,null,function*(){let r=H(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Ge(q.comparator);s=s.insert(o,ht.newNoDocument(o,ne.min()));let a=ue().add(o),c=new Nu(ne.min(),new Map,new Ge(ce),s,a);yield Wx(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),xE(r)}else yield fa(r.localStore,e,!1).then(()=>ma(r,e,t)).catch(ki)})}function U$(n,e){return N(this,null,function*(){let t=H(n),r=e.batch.batchId;try{let i=yield m$(t.localStore,e);ME(t,r,null),SE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield $r(t,i)}catch(i){yield ki(i)}})}function B$(n,e,t){return N(this,null,function*(){let r=H(n);try{let i=yield function(s,a){let c=H(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(J(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);ME(r,e,t),SE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield $r(r,i)}catch(i){yield ki(i)}})}function $$(n,e){return N(this,null,function*(){let t=H(n);Fi(t.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=H(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Ta(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function SE(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function ME(n,e,t){let r=H(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ma(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Kx(n,r)})}function Kx(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(pa(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),xE(n))}function Bw(n,e,t){for(let r of t)r instanceof Jf?(n.La.addReference(r.key,e),H$(n,r)):r instanceof Xf?(O("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Kx(n,r.key)):Q()}function H$(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(O("SyncEngine","New document in limbo: "+t),n.xa.add(r),xE(n))}function xE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new q(be.fromString(e)),r=n.qa.next();n.Na.set(r,new jw(t)),n.Oa=n.Oa.insert(t,r),pp(n.remoteStore,new la(zt(Ea(t.path)),r,"TargetPurposeLimboResolution",vn.oe))}}function $r(n,e,t){return N(this,null,function*(){let r=H(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=_w.Wi(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return N(this,null,function*(){let h=H(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>A.forEach(l,m=>A.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>A.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Oi(p))throw p;O("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),D=y.snapshotVersion,S=y.withLastLimboFreeSnapshotVersion(D);h.os=h.os.insert(m,S)}}})}(r.localStore,o))})}function q$(n,e){return N(this,null,function*(){let t=H(n);if(!t.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield Px(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new k(R.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $r(t,r.hs)}})}function G$(n,e){let t=H(n),r=t.Na.get(e);if(r&&r.va)return ue().add(r.key);{let i=ue(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function z$(n,e){return N(this,null,function*(){let t=H(n),r=yield $f(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Bw(t,e.targetId,i.wa),i})}function W$(n,e){return N(this,null,function*(){let t=H(n);return Vx(t.localStore,e).then(r=>$r(t,r))})}function K$(n,e,t,r){return N(this,null,function*(){let i=H(n),o=yield function(a,c){let l=H(a),h=H(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,c).next(m=>m?l.localDocuments.getDocuments(p,m):A.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Da(i.remoteStore):t==="acknowledged"||t==="rejected"?(ME(i,e,r||null),SE(i,e),function(a,c){H(H(a).mutationQueue).On(c)}(i.localStore,e)):Q(),yield $r(i,o)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function Q$(n,e){return N(this,null,function*(){let t=H(n);if(gp(t),RE(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield _M(t,r.toArray());t.Qa=!0,yield Rw(t.remoteStore,!0);for(let o of i)pp(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(ma(t,s),fa(t.localStore,s,!0))),pa(t.remoteStore,s)}),yield i,yield _M(t,r),function(s){let a=H(s);a.Na.forEach((c,l)=>{pa(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Ge(q.comparator)}(t),t.Qa=!1,yield Rw(t.remoteStore,!1)}})}function _M(n,e,t){return N(this,null,function*(){let r=H(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield ha(r.localStore,zt(c[0]));for(let l of c){let h=r.Fa.get(l),p=yield z$(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield Fx(r.localStore,s);a=yield ha(r.localStore,l),yield AE(r,Qx(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function Qx(n){return QM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Z$(n){return function(t){return H(H(t).persistence).Qi()}(H(n).localStore)}function Y$(n,e,t,r){return N(this,null,function*(){let i=H(n);if(i.Qa)return void O("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield Vx(i.localStore,YM(o[0])),a=Nu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",st.EMPTY_BYTE_STRING);yield $r(i,s,a);break}case"rejected":yield fa(i.localStore,e,!0),ma(i,e,r);break;default:Q()}})}function J$(n,e,t){return N(this,null,function*(){let r=gp(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let o=yield Fx(r.localStore,i),s=yield ha(r.localStore,o);yield AE(r,Qx(o),s.targetId,!1,s.resumeToken),pp(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield fa(r.localStore,i,!1).then(()=>{pa(r.remoteStore,i),ma(r,i)}).catch(ki))}})}function gp(n){let e=H(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=G$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j$.bind(null,e),e.Ca.d_=N$.bind(null,e.eventManager),e.Ca.$a=P$.bind(null,e.eventManager),e}function RE(n){let e=H(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=U$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=B$.bind(null,e),e}function X$(n,e,t){let r=H(n);(function(o,s,a){return N(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(y,D){let S=H(y),M=ot(D.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",j=>S.Gr.getBundleMetadata(j,D.id)).then(j=>!!j&&j.createTime.compareTo(M)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(Gx(c));let l=new Vw(c,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield $r(o,p.Ia,void 0),yield function(y,D){let S=H(y);return S.persistence.runTransaction("Save bundle","readwrite",M=>S.Gr.saveBundleMetadata(M,D))}(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return qn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var $w=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=Ku(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return Nx(this.persistence,new Bf,t.initialUser,this.serializer)}Ga(t){return new jf(Uf.Zr,this.serializer)}Wa(t){return new Gf}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var tp=class n extends $w{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield ag(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield RE(this.Ja.syncEngine),yield Da(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return Nx(this.persistence,new Bf,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new rw(r,e.asyncQueue,t)}Ha(e,t){let r=new w_(t,this.persistence);return new __(e.asyncQueue,r)}Ga(e){let t=wE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new vw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,jx(),pf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Gf}},Hw=class n extends tp{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield ag(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Iu&&(this.sharedClientState.syncEngine={no:K$.bind(null,t),ro:Y$.bind(null,t),io:J$.bind(null,t),Qi:Z$.bind(null,t),eo:W$.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield Q$(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=jx();if(!Iu.D(t))throw new k(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=wE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Iu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},NE=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>vM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=q$.bind(null,this.syncEngine),yield Rw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new kw}()}createDatastore(t){let r=Ku(t.databaseInfo.databaseId),i=function(s){return new Tw(s)}(t.databaseInfo);return function(s,a,c,l){return new Sw(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new xw(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>vM(this.syncEngine,r,0),function(){return zf.D()?new zf:new Dw}())}createSyncEngine(t,r){return function(o,s,a,c,l,h,p){let m=new Uw(o,s,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=H(o);O("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Ia(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function wM(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ya=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):rt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var qw=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new pt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new Fw(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Gw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=H(i),a={documents:o.map(p=>ku(s.serializer,p))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,be.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let m=i$(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());J(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ni(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=q.fromPath(r);this.mutations.push(new Mu(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=H(r),s={writes:i.map(a=>Ou(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,be.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Q();t=ne.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new k(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ne.min())?et.exists(!1):et.updateTime(t):et.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ne.min()))throw new k(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return et.updateTime(t)}return et.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var zw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new ju(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new Gw(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!qu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!lx(t)}return!1}};var Ww=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=dt.UNAUTHENTICATED,this.clientId=mf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){O("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new pt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ta(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function c_(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield Px(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function EM(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield PE(n);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>gM(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>gM(e.remoteStore,i)),n._onlineComponents=e})}function PE(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield c_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;qn("Error using user provided cache. Falling back to memory cache: "+t),yield c_(n,new $w)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield c_(n,new $w);return n._offlineComponents})}function mp(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield EM(n,n._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield EM(n,new NE))),n._onlineComponents})}function Zx(n){return PE(n).then(e=>e.persistence)}function kE(n){return PE(n).then(e=>e.localStore)}function Yx(n){return mp(n).then(e=>e.remoteStore)}function OE(n){return mp(n).then(e=>e.syncEngine)}function eH(n){return mp(n).then(e=>e.datastore)}function va(n){return N(this,null,function*(){let e=yield mp(n),t=e.eventManager;return t.onListen=k$.bind(null,e.syncEngine),t.onUnlisten=F$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=O$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=V$.bind(null,e.syncEngine),t})}function tH(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield Zx(n),t=yield Yx(n);return e.setNetworkEnabled(!0),function(i){let o=H(i);return o.L_.delete(0),Qu(o)}(t)}))}function nH(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield Zx(n),t=yield Yx(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=H(i);o.L_.add(0),yield Ia(o),o.q_.set("Offline")})}(t)}))}function rH(n,e){let t=new pt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let p=H(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Ta(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield kE(n),e,t)})),t.promise}function Jx(n,e,t={}){let r=new pt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,c,l){let h=new ya({next:m=>{h.Za(),s.enqueueAndForget(()=>TE(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new k(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Uu(Ea(a.path),h,{includeMetadataChanges:!0,_a:!0});return CE(o,p)}(yield va(n),n.asyncQueue,e,t,r)})),r.promise}function iH(n,e){let t=new pt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield $f(i,o,!0),c=new ep(o,a.Ts),l=c.ma(a.documents),h=c.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let c=Ta(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield kE(n),e,t)})),t.promise}function Xx(n,e,t={}){let r=new pt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,c,l){let h=new ya({next:m=>{h.Za(),s.enqueueAndForget(()=>TE(o,p)),m.fromCache&&c.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Uu(a,h,{includeMetadataChanges:!0,_a:!0});return CE(o,p)}(yield va(n),n.asyncQueue,e,t,r)})),r.promise}function oH(n,e){let t=new ya(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){H(i).Y_.add(o),o.next()}(yield va(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){H(i).Y_.delete(o)}(yield va(n),t)}))}}function sH(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?hx().encode(s):s,function(h,p){return new qw(h,p)}(function(h,p){if(h instanceof Uint8Array)return wM(h,p);if(h instanceof ArrayBuffer)return wM(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Ku(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){X$(yield OE(n),i,r)}))}function aH(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=H(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield kE(n),e)}))}function eR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var IM=new Map;function FE(n,e,t){if(!t)throw new k(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function VE(n,e,t,r){if(e===!0&&r===!0)throw new k(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DM(n){if(!q.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function CM(n){if(q.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Q()}function Se(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new k(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=yp(n);throw new k(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function tR(n,e){if(e<=0)throw new k(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var np=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Mo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new np({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new np(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new u_;switch(r.type){case"firstParty":return new f_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=IM.get(t);r&&(O("ComponentProvider","Removing Datastore"),IM.delete(t),r.terminate())}(this),Promise.resolve()}};function nR(n,e,t,r={}){var i;let o=(n=Se(n,Mo))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&qn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=dt.MOCK_USER;else{a=mD(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new dt(l)}n._authCredentials=new l_(new gf(a,c))}}var Tt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ue=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},lr=class n extends Tt{constructor(e,t,r){super(e,t,Ea(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ue(this.firestore,null,new q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function LE(n,e,...t){if(n=Ke(n),FE("collection","path",e),n instanceof Mo){let r=be.fromString(e,...t);return CM(r),new lr(n,null,r)}{if(!(n instanceof Ue||n instanceof lr))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(be.fromString(e,...t));return CM(r),new lr(n.firestore,null,r)}}function rR(n,e){if(n=Se(n,Mo),FE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Tt(n,null,function(r){return new Gn(be.emptyPath(),r)}(e))}function Zu(n,e,...t){if(n=Ke(n),arguments.length===1&&(e=mf.newId()),FE("doc","path",e),n instanceof Mo){let r=be.fromString(e,...t);return DM(r),new Ue(n,null,new q(r))}{if(!(n instanceof Ue||n instanceof lr))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(be.fromString(e,...t));return DM(r),new Ue(n.firestore,n instanceof lr?n.converter:null,new q(r))}}function jE(n,e){return n=Ke(n),e=Ke(e),(n instanceof Ue||n instanceof lr)&&(e instanceof Ue||e instanceof lr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function UE(n,e){return n=Ke(n),e=Ke(e),n instanceof Tt&&e instanceof Tt&&n.firestore===e.firestore&&zu(n._query,e._query)&&n.converter===e.converter}var rp=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ju(this,"async_queue_retry"),this.Vu=()=>{let r=pf();r&&O("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=pf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=pf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new pt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Oi(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw rt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Nw.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Q()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Kw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Qw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new pt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var iR=-1,Ye=class extends Mo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new rp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new rp(e),this._firestoreClient=void 0,yield e}})}};function bt(n){if(n._terminated)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||oR(n),n._firestoreClient}function oR(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,h){return new E_(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,eR(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Ww(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function sR(n,e){qn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return cR(n,NE.provider,{build:r=>new tp(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function aR(n){return N(this,null,function*(){qn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();cR(n,NE.provider,{build:t=>new Hw(t,e.cacheSizeBytes)})})}function cR(n,e,t){if((n=Se(n,Ye))._firestoreClient||n._terminated)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new k(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},oR(n)}function uR(n){if(n._initialized&&!n._terminated)throw new k(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new pt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!Ti.D())return Promise.resolve();let i=r+"main";yield Ti.delete(i)})}(wE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function lR(n){return function(t){let r=new pt;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return $$(yield OE(t),r)})),r.promise}(bt(n=Se(n,Ye)))}function dR(n){return tH(bt(n=Se(n,Ye)))}function hR(n){return nH(bt(n=Se(n,Ye)))}function fR(n,e){let t=bt(n=Se(n,Ye)),r=new Qw;return sH(t,n._databaseId,e,r),r}function pR(n,e){return aH(bt(n=Se(n,Ye)),e).then(t=>t?new Tt(n,null,t.query):null)}var pr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(st.fromBase64String(e))}catch(t){throw new k(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Wn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new k(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ur=class{constructor(e){this._methodName=e}};var xo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new k(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new k(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}};var Bu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var cH=/^__.*__$/,Zw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new zn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ri(e,this.data,t,this.fieldTransforms)}},ip=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new zn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function gR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}var op=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return sp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(gR(this.Cu)&&cH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Yw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ku(e)}Qu(e,t,r,i=!1){return new op({Cu:e,methodName:t,qu:r,path:it.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ko(n){let e=n._freezeSettings(),t=Ku(n._databaseId);return new Yw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function vp(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);HE("Data must be an object, but it was:",s,r);let a=vR(r,s),c,l;if(o.merge)c=new _n(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=nE(e,p,t);if(!s.contains(m))throw new k(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);wR(h,m)||h.push(m)}c=new _n(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new Zw(new kt(a),c,l)}var $u=class n extends Ur{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function mR(n,e,t){return new op({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Jw=class n extends Ur{_toFieldTransform(e){return new bo(e.path,new Mi)}isEqual(e){return e instanceof n}},Xw=class n extends Ur{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=mR(this,e,!0),r=this.Ku.map(o=>Oo(o,t)),i=new Lr(r);return new bo(e.path,i)}isEqual(e){return e instanceof n&&lg(this.Ku,e.Ku)}},eE=class n extends Ur{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=mR(this,e,!0),r=this.Ku.map(o=>Oo(o,t)),i=new jr(r);return new bo(e.path,i)}isEqual(e){return e instanceof n&&lg(this.Ku,e.Ku)}},tE=class n extends Ur{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new xi(e.serializer,rx(e.serializer,this.$u));return new bo(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function BE(n,e,t,r){let i=n.Qu(1,e,t);HE("Data must be an object, but it was:",i,r);let o=[],s=kt.empty();Po(r,(c,l)=>{let h=qE(e,c,t);l=Ke(l);let p=i.Nu(h);if(l instanceof $u)o.push(h);else{let m=Oo(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new _n(o);return new ip(s,a,i.fieldTransforms)}function $E(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[nE(e,r,t)],c=[i];if(o.length%2!=0)throw new k(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(nE(e,o[m])),c.push(o[m+1]);let l=[],h=kt.empty();for(let m=a.length-1;m>=0;--m)if(!wR(l,a[m])){let y=a[m],D=c[m];D=Ke(D);let S=s.Nu(y);if(D instanceof $u)l.push(y);else{let M=Oo(D,S);M!=null&&(l.push(y),h.set(y,M))}}let p=new _n(l);return new ip(h,p,s.fieldTransforms)}function yR(n,e,t,r=!1){return Oo(t,n.Qu(r?4:3,e))}function Oo(n,e){if(_R(n=Ke(n)))return HE("Unsupported field value:",e,n),vR(n,e);if(n instanceof Ur)return function(r,i){if(!gR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Oo(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rx(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ze.fromDate(r);return{timestampValue:ua(i.serializer,o)}}if(r instanceof Ze){let o=new Ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ua(i.serializer,o)}}if(r instanceof xo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pr)return{bytesValue:fx(i.serializer,r._byteString)};if(r instanceof Ue){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:yE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Bu)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return mE(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${yp(r)}`)}(n,e)}function vR(n,e){let t={};return jM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Po(n,(r,i)=>{let o=Oo(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function _R(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ze||n instanceof xo||n instanceof pr||n instanceof Ue||n instanceof Ur||n instanceof Bu)}function HE(n,e,t){if(!_R(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=yp(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function nE(n,e,t){if((e=Ke(e))instanceof Wn)return e._internalPath;if(typeof e=="string")return qE(n,e);throw sp("Field path arguments must be of type string or ",n,!1,void 0,t)}var uH=new RegExp("[~\\*/\\[\\]]");function qE(n,e,t){if(e.search(uH)>=0)throw sp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wn(...e.split("."))._internalPath}catch{throw sp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new k(R.INVALID_ARGUMENT,a+n+c)}function wR(n,e){return n.some(t=>t.isEqual(e))}var Ro=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ue(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new rE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(_p("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},rE=class extends Ro{data(){return super.data()}};function _p(n,e){return typeof e=="string"?qE(n,e):e instanceof Wn?e._internalPath:e._delegate._internalPath}function ER(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new k(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Hu=class{},No=class extends Hu{};function Hr(n,e,...t){let r=[];e instanceof Hu&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof iE).length,a=o.filter(c=>c instanceof ap).length;if(s>1||s>0&&a>0)throw new k(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var ap=class n extends No{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return RR(e._query,t),new Tt(e.firestore,e.converter,k_(e._query,t))}_parse(e){let t=ko(e.firestore);return function(o,s,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new k(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){bM(p,h);let y=[];for(let D of p)y.push(TM(c,o,D));m={arrayValue:{values:y}}}else m=TM(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||bM(p,h),m=yR(a,s,p,h==="in"||h==="not-in");return Ee.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function IR(n,e,t){let r=e,i=_p("where",n);return ap._create(i,r,t)}var iE=class n extends Hu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Oe.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)RR(s,c),s=k_(s,c)}(e._query,t),new Tt(e.firestore,e.converter,k_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var oE=class n extends No{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Co(o,s)}(e._query,this._field,this._direction);return new Tt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Gn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function DR(n,e="asc"){let t=e,r=_p("orderBy",n);return oE._create(r,t)}var cp=class n extends No{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Tt(e.firestore,e.converter,bf(e._query,this._limit,this._limitType))}};function CR(n){return tR("limit",n),cp._create("limit",n,"F")}function TR(n){return tR("limitToLast",n),cp._create("limitToLast",n,"L")}var up=class n extends No{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=xR(e,this.type,this._docOrFields,this._inclusive);return new Tt(e.firestore,e.converter,function(i,o){return new Gn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function bR(...n){return up._create("startAt",n,!0)}function AR(...n){return up._create("startAfter",n,!1)}var lp=class n extends No{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=xR(e,this.type,this._docOrFields,this._inclusive);return new Tt(e.firestore,e.converter,function(i,o){return new Gn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function SR(...n){return lp._create("endBefore",n,!1)}function MR(...n){return lp._create("endAt",n,!0)}function xR(n,e,t,r){if(t[0]=Ke(t[0]),t[0]instanceof Ro)return function(o,s,a,c,l){if(!c)throw new k(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of ta(o))if(p.field.isKeyField())h.push(Do(s,c.key));else{let m=c.data.field(p.field);if(hp(m))throw new k(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=p.field.canonicalString();throw new k(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new hr(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=ko(n.firestore);return function(s,a,c,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new k(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let D=0;D<h.length;D++){let S=h[D];if(m[D].field.isKeyField()){if(typeof S!="string")throw new k(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof S}`);if(!pE(s)&&S.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${S}' contains a slash.`);let M=s.path.child(be.fromString(S));if(!q.isDocumentKey(M))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let j=new q(M);y.push(Do(a,j))}else{let M=yR(c,l,S);y.push(M)}}return new hr(y,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function TM(n,e,t){if(typeof(t=Ke(t))=="string"){if(t==="")throw new k(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pE(e)&&t.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(be.fromString(t));if(!q.isDocumentKey(r))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Do(n,new q(r))}if(t instanceof Ue)return Do(n,t._key);throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yp(t)}.`)}function bM(n,e){if(!Array.isArray(n)||n.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RR(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var _a=class{convertValue(e,t="none"){switch(Io(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Po(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>We(s.doubleValue));return new Bu(o)}convertGeoPoint(e){return new xo(We(e.latitude),We(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=hE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(bu(e));default:return null}}convertTimestamp(e){let t=Vr(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=be.fromString(e);J(Cx(r));let i=new Ai(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(t)||rt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function wp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var sE=class extends _a{constructor(e){super(),this.firestore=e}convertBytes(e){return new pr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,t)}};var Fr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Sn=class extends Ro{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Di(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(_p("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Di=class extends Sn{data(e={}){return super.data(e)}},Kn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Fr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Di(this._firestore,this._userDataWriter,r.key,r,new Fr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new k(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Di(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Di(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:lH(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function lH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}function GE(n,e){return n instanceof Sn&&e instanceof Sn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Kn&&e instanceof Kn&&n._firestore===e._firestore&&UE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function NR(n){n=Se(n,Ue);let e=Se(n.firestore,Ye);return Jx(bt(e),n._key).then(t=>QE(e,n,t))}var Br=class extends _a{constructor(e){super(),this.firestore=e}convertBytes(e){return new pr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,t)}};function PR(n){n=Se(n,Ue);let e=Se(n.firestore,Ye),t=bt(e),r=new Br(e);return rH(t,n._key).then(i=>new Sn(e,r,n._key,i,new Fr(i!==null&&i.hasLocalMutations,!0),n.converter))}function kR(n){n=Se(n,Ue);let e=Se(n.firestore,Ye);return Jx(bt(e),n._key,{source:"server"}).then(t=>QE(e,n,t))}function OR(n){n=Se(n,Tt);let e=Se(n.firestore,Ye),t=bt(e),r=new Br(e);return ER(n._query),Xx(t,n._query).then(i=>new Kn(e,r,n,i))}function FR(n){n=Se(n,Tt);let e=Se(n.firestore,Ye),t=bt(e),r=new Br(e);return iH(t,n._query).then(i=>new Kn(e,r,n,i))}function VR(n){n=Se(n,Tt);let e=Se(n.firestore,Ye),t=bt(e),r=new Br(e);return Xx(t,n._query,{source:"server"}).then(i=>new Kn(e,r,n,i))}function zE(n,e,t){n=Se(n,Ue);let r=Se(n.firestore,Ye),i=wp(n.converter,e,t);return ba(r,[vp(ko(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,et.none())])}function WE(n,e,t,...r){n=Se(n,Ue);let i=Se(n.firestore,Ye),o=ko(i),s;return s=typeof(e=Ke(e))=="string"||e instanceof Wn?$E(o,"updateDoc",n._key,e,t,r):BE(o,"updateDoc",n._key,e),ba(i,[s.toMutation(n._key,et.exists(!0))])}function LR(n){return ba(Se(n.firestore,Ye),[new Ni(n._key,et.none())])}function jR(n,e){let t=Se(n.firestore,Ye),r=Zu(n),i=wp(n.converter,e);return ba(t,[vp(ko(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,et.exists(!1))]).then(()=>r)}function KE(n,...e){var t,r,i;n=Ke(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Kw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Kw(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof Ue)l=Se(n.firestore,Ye),h=Ea(n._key.path),c={next:p=>{e[s]&&e[s](QE(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Se(n,Tt);l=Se(p.firestore,Ye),h=p._query;let m=new Br(l);c={next:y=>{e[s]&&e[s](new Kn(l,m,p,y))},error:e[s+1],complete:e[s+2]},ER(n._query)}return function(m,y,D,S){let M=new ya(S),j=new Uu(y,M,D);return m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return CE(yield va(m),j)})),()=>{M.Za(),m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return TE(yield va(m),j)}))}}(bt(l),h,a,c)}function UR(n,e){return oH(bt(n=Se(n,Ye)),Kw(e)?e:{next:e})}function ba(n,e){return function(r,i){let o=new pt;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return L$(yield OE(r),i,o)})),o.promise}(bt(n),e)}function QE(n,e,t){let r=t.docs.get(e._key),i=new Br(n);return new Sn(n,i,e._key,r,new Fr(t.hasPendingWrites,t.fromCache),e.converter)}var dH={maxAttempts:5};var dp=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ko(e)}set(e,t,r){this._verifyNotCommitted();let i=Ei(e,this._firestore),o=wp(i.converter,t,r),s=vp(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,et.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Ei(e,this._firestore),s;return s=typeof(t=Ke(t))=="string"||t instanceof Wn?$E(this._dataReader,"WriteBatch.update",o._key,t,r,i):BE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,et.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Ei(e,this._firestore);return this._mutations=this._mutations.concat(new Ni(t._key,et.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ei(n,e){if((n=Ke(n)).firestore!==e)throw new k(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var aE=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=ko(t)}get(t){let r=Ei(t,this._firestore),i=new sE(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return Q();let s=o[0];if(s.isFoundDocument())return new Ro(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Ro(this._firestore,i,r._key,null,r.converter);throw Q()})}set(t,r,i){let o=Ei(t,this._firestore),s=wp(o.converter,r,i),a=vp(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Ei(t,this._firestore),a;return a=typeof(r=Ke(r))=="string"||r instanceof Wn?$E(this._dataReader,"Transaction.update",s._key,r,i,o):BE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Ei(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Ei(e,this._firestore),r=new Br(this._firestore);return super.get(e).then(i=>new Sn(this._firestore,r,t._key,i._document,new Fr(!1,!1),t.converter))}};function BR(n,e,t){n=Se(n,Ye);let r=Object.assign(Object.assign({},dH),t);return function(o){if(o.maxAttempts<1)throw new k(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new pt;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield eH(o);new zw(o.asyncQueue,l,a,s,c).au()})),c.promise}(bt(n),i=>e(new aE(n,i)),r)}function $R(){return new $u("deleteField")}function HR(){return new Jw("serverTimestamp")}function qR(...n){return new Xw("arrayUnion",n)}function GR(...n){return new eE("arrayRemove",n)}function zR(n){return new tE("increment",n)}(function(e,t=!0){(function(i){wa=i})(_D),rc(new Bi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ye(new d_(r.getProvider("auth-internal")),new g_(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ai(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Kr(CS,"4.7.3",e),Kr(CS,"4.7.3","esm2017")})();var hH="@firebase/firestore-compat",fH="0.3.38";function tI(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new k("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function WR(){if(typeof Uint8Array>"u")throw new k("unimplemented","Uint8Arrays are not available in this environment.")}function KR(){if(!UM())throw new k("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Ep=class n{constructor(e){this._delegate=e}static fromBase64String(e){return KR(),new n(pr.fromBase64String(e))}static fromUint8Array(e){return WR(),new n(pr.fromUint8Array(e))}toBase64(){return KR(),this._delegate.toBase64()}toUint8Array(){return WR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function ZE(n){return pH(n,["next","error","complete"])}function pH(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var YE=class{enableIndexedDbPersistence(e,t){return sR(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return aR(e._delegate)}clearIndexedDbPersistence(e){return uR(e._delegate)}},Ip=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ai||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&qn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){nR(this._delegate,e,t,r)}enableNetwork(){return dR(this._delegate)}disableNetwork(){return hR(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,VE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return lR(this._delegate)}onSnapshotsInSync(e){return UR(this._delegate,e)}get app(){if(!this._appCompat)throw new k("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ma(this,LE(this._delegate,e))}catch(t){throw Wt(t,"collection()","Firestore.collection()")}}doc(e){try{return new gr(this,Zu(this._delegate,e))}catch(t){throw Wt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new jo(this,rR(this._delegate,e))}catch(t){throw Wt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return BR(this._delegate,t=>e(new Dp(this,t)))}batch(){return bt(this._delegate),new Cp(new dp(this._delegate,e=>ba(this._delegate,e)))}loadBundle(e){return fR(this._delegate,e)}namedQuery(e){return pR(this._delegate,e).then(t=>t?new jo(this,t):null)}},Aa=class extends _a{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ep(new pr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return gr.forKey(t,this.firestore,null)}};function gH(n){AM(n)}var Dp=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Aa(e)}get(e){let t=Fo(e);return this._delegate.get(t).then(r=>new Vo(this._firestore,new Sn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Fo(e);return r?(tI("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Fo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Fo(e);return this._delegate.delete(t),this}},Cp=class{constructor(e){this._delegate=e}set(e,t,r){let i=Fo(e);return r?(tI("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Fo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Fo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Sa=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Di(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Lo(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Aa(e),t),i.set(t,o)),o}};Sa.INSTANCES=new WeakMap;var gr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Aa(e)}static forPath(e,t,r){if(e.length%2!==0)throw new k("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Ue(t._delegate,r,new q(e)))}static forKey(e,t,r){return new n(t,new Ue(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ma(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ma(this.firestore,LE(this._delegate,e))}catch(t){throw Wt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ke(e),e instanceof Ue?jE(this._delegate,e):!1}set(e,t){t=tI("DocumentReference.set",t);try{return t?zE(this._delegate,e,t):zE(this._delegate,e)}catch(r){throw Wt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?WE(this._delegate,e):WE(this._delegate,e,t,...r)}catch(i){throw Wt(i,"updateDoc()","DocumentReference.update()")}}delete(){return LR(this._delegate)}onSnapshot(...e){let t=QR(e),r=ZR(e,i=>new Vo(this.firestore,new Sn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return KE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=PR(this._delegate):e?.source==="server"?t=kR(this._delegate):t=NR(this._delegate),t.then(r=>new Vo(this.firestore,new Sn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Sa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Wt(n,e,t){return n.message=n.message.replace(e,t),n}function QR(n){for(let e of n)if(typeof e=="object"&&!ZE(e))return e;return{}}function ZR(n,e){var t,r;let i;return ZE(n[0])?i=n[0]:ZE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Vo=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new gr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return GE(this._delegate,e._delegate)}},Lo=class extends Vo{data(e){let t=this._delegate.data(e);return this._delegate._converter||SM(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},jo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Aa(e)}where(e,t,r){try{return new n(this.firestore,Hr(this._delegate,IR(e,t,r)))}catch(i){throw Wt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Hr(this._delegate,DR(e,t)))}catch(r){throw Wt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Hr(this._delegate,CR(e)))}catch(t){throw Wt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Hr(this._delegate,TR(e)))}catch(t){throw Wt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Hr(this._delegate,bR(...e)))}catch(t){throw Wt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Hr(this._delegate,AR(...e)))}catch(t){throw Wt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Hr(this._delegate,SR(...e)))}catch(t){throw Wt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Hr(this._delegate,MR(...e)))}catch(t){throw Wt(t,"endAt()","Query.endAt()")}}isEqual(e){return UE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=FR(this._delegate):e?.source==="server"?t=VR(this._delegate):t=OR(this._delegate),t.then(r=>new Yu(this.firestore,new Kn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=QR(e),r=ZR(e,i=>new Yu(this.firestore,new Kn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return KE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Sa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},JE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Lo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Yu=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new jo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Lo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new JE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Lo(this._firestore,r))})}isEqual(e){return GE(this._delegate,e._delegate)}},Ma=class n extends jo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new gr(this.firestore,e):null}doc(e){try{return e===void 0?new gr(this.firestore,Zu(this._delegate)):new gr(this.firestore,Zu(this._delegate,e))}catch(t){throw Wt(t,"doc()","CollectionReference.doc()")}}add(e){return jR(this._delegate,e).then(t=>new gr(this.firestore,t))}isEqual(e){return jE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Sa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Fo(n){return Se(n,Ue)}var XE=class n{constructor(...e){this._delegate=new Wn(...e)}static documentId(){return new n(it.keyField().canonicalString())}isEqual(e){return e=Ke(e),e instanceof Wn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var eI=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=HR();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=$R();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=qR(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=GR(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=zR(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var mH={Firestore:Ip,GeoPoint:xo,Timestamp:Ze,Blob:Ep,Transaction:Dp,WriteBatch:Cp,DocumentReference:gr,DocumentSnapshot:Vo,Query:jo,QueryDocumentSnapshot:Lo,QuerySnapshot:Yu,CollectionReference:Ma,FieldPath:XE,FieldValue:eI,setLogLevel:gH,CACHE_SIZE_UNLIMITED:iR};function yH(n,e){n.INTERNAL.registerComponent(new Bi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},mH)))}function vH(n){yH(n,(e,t)=>new Ip(e,t,new YE)),n.registerVersion(hH,fH)}vH(un);function _H(n,e=uc){return new ge(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function YR(n,e){return _H(n,e)}function wH(n,e){return YR(n,e).pipe(zi(void 0),dc(),K(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function iI(n,e){return YR(n,e).pipe(K(t=>({payload:t,type:"query"})))}var Tp=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=eN(r,t);return new Ap(i,o,this.afs)}snapshotChanges(){return wH(this.ref,this.afs.schedulers.outsideAngular).pipe(tn)}valueChanges(e={}){return this.snapshotChanges().pipe(K(({payload:t})=>e.idField?pe(P({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return De(this.ref.get(e)).pipe(tn)}};function bp(n,e){return iI(n,e).pipe(zi(void 0),dc(),K(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function JR(n,e,t){return bp(n,t).pipe(Gi((r,i)=>EH(r,i.map(o=>o.payload),e),[]),Pg(),K(r=>r.map(i=>({type:i.type,payload:i}))))}function EH(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=IH(n,r))}),n}function nI(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function IH(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return nI(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return nI(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return nI(n,e.oldIndex,1);break}return n}function XR(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Ap=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=bp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(K(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(zi(void 0),dc(),mt(([r,i])=>i.length>0||!r),K(([,r])=>r),tn)}auditTrail(e){return this.stateChanges(e).pipe(Gi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=XR(e);return JR(this.query,t,this.afs.schedulers.outsideAngular).pipe(tn)}valueChanges(e={}){return iI(this.query,this.afs.schedulers.outsideAngular).pipe(K(t=>t.payload.docs.map(r=>e.idField?pe(P({},r.data()),{[e.idField]:r.id}):r.data())),tn)}get(e){return De(this.query.get(e)).pipe(tn)}add(e){return this.ref.add(e)}doc(e){return new Tp(this.ref.doc(e),this.afs)}},rI=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?bp(this.query,this.afs.schedulers.outsideAngular).pipe(tn):bp(this.query,this.afs.schedulers.outsideAngular).pipe(K(t=>t.filter(r=>e.indexOf(r.type)>-1)),mt(t=>t.length>0),tn)}auditTrail(e){return this.stateChanges(e).pipe(Gi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=XR(e);return JR(this.query,t,this.afs.schedulers.outsideAngular).pipe(tn)}valueChanges(e={}){return iI(this.query,this.afs.schedulers.outsideAngular).pipe(K(r=>r.payload.docs.map(i=>e.idField?P({[e.idField]:i.id},i.data()):i.data())),tn)}get(e){return De(this.query.get(e)).pipe(tn)}},DH=new z("angularfire2.enableFirestorePersistence"),CH=new z("angularfire2.firestore.persistenceSettings"),TH=new z("angularfire2.firestore.settings"),bH=new z("angularfire2.firestore.use-emulator");function eN(n,e=t=>t){return{query:e(n),ref:n}}var rn=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,h,p,m,y,D,S,M,j,G){this.schedulers=c;let L=lu(t,a,r),Z=h;p&&Yv(L,a,m,D,S,M,y,j),[this.firestore,this.persistenceEnabled$]=nf(`${L.name}.firestore`,"AngularFirestore",L.name,()=>{let re=a.runOutsideAngular(()=>L.firestore());if(o&&re.settings(o),Z&&re.useEmulator(...Z),i&&!Rr(s)){let X=()=>{try{return De(re.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),ee(!1)}};return[re,a.runOutsideAngular(X)]}else return[re,ee(!1)]},[o,Z,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=eN(i,r),a=this.schedulers.ngZone.run(()=>o);return new Ap(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new rI(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Tp(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(F(Bs),F($s,8),F(DH,8),F(TH,8),F(Dt),F(Ie),F(Xh),F(CH,8),F(bH,8),F(ES,8),F(Gv,8),F(zv,8),F(Wv,8),F(Kv,8),F(Qv,8),F(Zv,8),F(fo,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var tN=(()=>{class n{constructor(t){this.db=t,this.dbPath="/header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}createHeader(t){return this.headerRef.add(P({},t))}updateHeader(t,r){return this.db.collection(this.dbPath).doc(t).update(r)}deleteHeader(t){return this.headerRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(rn))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var uN=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(oe(ro),oe(ui))}}static{this.\u0275dir=$t({type:n})}}return n})(),SH=(()=>{class n extends uN{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Mc(n)))(i||n)}})()}static{this.\u0275dir=$t({type:n,features:[di]})}}return n})(),lN=new z("");var MH={provide:lN,useExisting:Ds(()=>Ot),multi:!0};function xH(){let n=rr()?rr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var RH=new z(""),Ot=(()=>{class n extends uN{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!xH())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(oe(ro),oe(ui),oe(RH,8))}}static{this.\u0275dir=$t({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ce("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[vh([MH]),di]})}}return n})();var dN=new z(""),hN=new z("");function fN(n){return n!=null}function pN(n){return oo(n)?De(n):n}function gN(n){let e={};return n.forEach(t=>{e=t!=null?P(P({},e),t):e}),Object.keys(e).length===0?null:e}function mN(n,e){return e.map(t=>t(n))}function NH(n){return!n.validate}function yN(n){return n.map(e=>NH(e)?e:t=>e.validate(t))}function PH(n){if(!n)return null;let e=n.filter(fN);return e.length==0?null:function(t){return gN(mN(t,e))}}function sI(n){return n!=null?PH(yN(n)):null}function kH(n){if(!n)return null;let e=n.filter(fN);return e.length==0?null:function(t){let r=mN(t,e).map(pN);return xg(r).pipe(K(gN))}}function aI(n){return n!=null?kH(yN(n)):null}function nN(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function OH(n){return n._rawValidators}function FH(n){return n._rawAsyncValidators}function oI(n){return n?Array.isArray(n)?n:[n]:[]}function Mp(n,e){return Array.isArray(n)?n.includes(e):n===e}function rN(n,e){let t=oI(e);return oI(n).forEach(i=>{Mp(t,i)||t.push(i)}),t}function iN(n,e){return oI(e).filter(t=>!Mp(n,t))}var xp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=sI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=aI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Na=class extends xp{get formDirective(){return null}get path(){return null}},rl=class extends xp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Rp=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},VH={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},LK=pe(P({},VH),{"[class.ng-submitted]":"isSubmitted"}),on=(()=>{class n extends Rp{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(oe(rl,2))}}static{this.\u0275dir=$t({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&yh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[di]})}}return n})(),sn=(()=>{class n extends Rp{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(oe(Na,10))}}static{this.\u0275dir=$t({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&yh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[di]})}}return n})();var Ju="VALID",Sp="INVALID",xa="PENDING",Xu="DISABLED",Pa=class{},Np=class extends Pa{constructor(e,t){super(),this.value=e,this.source=t}},tl=class extends Pa{constructor(e,t){super(),this.pristine=e,this.source=t}},nl=class extends Pa{constructor(e,t){super(),this.touched=e,this.source=t}},Ra=class extends Pa{constructor(e,t){super(),this.status=e,this.source=t}};function vN(n){return(Op(n)?n.validators:n)||null}function LH(n){return Array.isArray(n)?sI(n):n||null}function _N(n,e){return(Op(e)?e.asyncValidators:n)||null}function jH(n){return Array.isArray(n)?aI(n):n||null}function Op(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function UH(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Y(1e3,"");if(!r[t])throw new Y(1001,"")}function BH(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Y(1002,"")})}var Pp=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Vc(()=>this.statusReactive()),this.statusReactive=Pc(void 0),this._pristine=Vc(()=>this.pristineReactive()),this.pristineReactive=Pc(!0),this._touched=Vc(()=>this.touchedReactive()),this.touchedReactive=Pc(!1),this._events=new ze,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Sr(this.statusReactive)}set status(e){Sr(()=>this.statusReactive.set(e))}get valid(){return this.status===Ju}get invalid(){return this.status===Sp}get pending(){return this.status==xa}get disabled(){return this.status===Xu}get enabled(){return this.status!==Xu}get pristine(){return Sr(this.pristineReactive)}set pristine(e){Sr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Sr(this.touchedReactive)}set touched(e){Sr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(rN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(rN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(iN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(iN(e,this._rawAsyncValidators))}hasValidator(e){return Mp(this._rawValidators,e)}hasAsyncValidator(e){return Mp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(pe(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new nl(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new nl(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(pe(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new tl(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new tl(!0,r))}markAsPending(e={}){this.status=xa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ra(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(pe(P({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Xu,this.errors=null,this._forEachChild(i=>{i.disable(pe(P({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Np(this.value,r)),this._events.next(new Ra(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pe(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ju,this._forEachChild(r=>{r.enable(pe(P({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pe(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ju||this.status===xa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Np(this.value,t)),this._events.next(new Ra(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(pe(P({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xu:Ju}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=xa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=pN(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ra(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new ct,this.statusChanges=new ct}_calculateStatus(){return this._allControlsDisabled()?Xu:this.errors?Sp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xa)?xa:this._anyControlsHaveStatus(Sp)?Sp:Ju}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new tl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new nl(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Op(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=LH(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=jH(this._rawAsyncValidators)}},kp=class extends Pp{constructor(e,t,r){super(vN(t),_N(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){BH(this,!0,e),Object.keys(e).forEach(r=>{UH(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var cI=new z("CallSetDisabledState",{providedIn:"root",factory:()=>uI}),uI="always";function $H(n,e){return[...e.path,n]}function wN(n,e,t=uI){EN(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),qH(n,e),zH(n,e),GH(n,e),HH(n,e)}function oN(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function HH(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function EN(n,e){let t=OH(n);e.validator!==null?n.setValidators(nN(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=FH(n);e.asyncValidator!==null?n.setAsyncValidators(nN(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();oN(e._rawValidators,i),oN(e._rawAsyncValidators,i)}function qH(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&IN(n,e)})}function GH(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&IN(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function IN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function zH(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function WH(n,e){n==null,EN(n,e)}function KH(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function QH(n){return Object.getPrototypeOf(n.constructor)===SH}function ZH(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function YH(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Ot?t=o:QH(o)?r=o:i=o}),i||r||t||null}var JH={provide:Na,useExisting:Ds(()=>Kt)},el=Promise.resolve(),Kt=(()=>{class n extends Na{get submitted(){return Sr(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Vc(()=>this.submittedReactive()),this.submittedReactive=Pc(!1),this._directives=new Set,this.ngSubmit=new ct,this.form=new kp({},sI(t),aI(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){el.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),wN(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){el.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){el.then(()=>{let r=this._findContainer(t.path),i=new kp({});WH(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){el.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){el.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),ZH(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(oe(dN,10),oe(hN,10),oe(cI,8))}}static{this.\u0275dir=$t({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ce("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vh([JH]),di]})}}return n})();function sN(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function aN(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var XH=class extends Pp{constructor(e=null,t,r){super(vN(t),_N(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Op(t)&&(t.nonNullable||t.initialValueIsDefault)&&(aN(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){sN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){sN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){aN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var e4={provide:rl,useExisting:Ds(()=>Qt)},cN=Promise.resolve(),Qt=(()=>{class n extends rl{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new XH,this._registered=!1,this.name="",this.update=new ct,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=YH(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),KH(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){wN(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){cN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ao(r);cN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?$H(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(oe(Na,9),oe(dN,10),oe(hN,10),oe(lN,10),oe(so,8),oe(cI,8))}}static{this.\u0275dir=$t({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[vh([e4]),di,to]})}}return n})(),an=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=$t({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var t4=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=_t({type:n})}static{this.\u0275inj=yt({})}}return n})();var DN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:cI,useValue:t.callSetDisabledState??uI}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=_t({type:n})}static{this.\u0275inj=yt({imports:[t4]})}}return n})();function n4(n,e){if(n&1){let t=Nt();U(0,"div",5)(1,"form")(2,"input",6),Re("ngModelChange",function(i){_e(t);let o=Ne();return Pe(o.myHeader.name,i)||(o.myHeader.name=i),we(i)}),B(),ie(3,"br"),U(4,"input",7),Re("ngModelChange",function(i){_e(t);let o=Ne();return Pe(o.myHeader.goalLife,i)||(o.myHeader.goalLife=i),we(i)}),B(),ie(5,"br"),U(6,"input",8),Re("ngModelChange",function(i){_e(t);let o=Ne();return Pe(o.myHeader.photoUrl,i)||(o.myHeader.photoUrl=i),we(i)}),B(),ie(7,"br"),U(8,"input",9),Re("ngModelChange",function(i){_e(t);let o=Ne();return Pe(o.myHeader.email,i)||(o.myHeader.email=i),we(i)}),B(),ie(9,"br"),U(10,"input",10),Re("ngModelChange",function(i){_e(t);let o=Ne();return Pe(o.myHeader.phoneNumber,i)||(o.myHeader.phoneNumber=i),we(i)}),B(),ie(11,"br"),U(12,"input",11),Re("ngModelChange",function(i){_e(t);let o=Ne();return Pe(o.myHeader.location,i)||(o.myHeader.location=i),we(i)}),B(),ie(13,"br"),U(14,"input",12),Re("ngModelChange",function(i){_e(t);let o=Ne();return Pe(o.myHeader.socialNetwork,i)||(o.myHeader.socialNetwork=i),we(i)}),B(),ie(15,"br"),U(16,"input",13),Ce("click",function(){_e(t);let i=Ne();return we(i.onSubmit())}),B()()()}if(n&2){let t=Ne();te(2),xe("ngModel",t.myHeader.name),te(2),xe("ngModel",t.myHeader.goalLife),te(2),xe("ngModel",t.myHeader.photoUrl),te(2),xe("ngModel",t.myHeader.email),te(2),xe("ngModel",t.myHeader.phoneNumber),te(2),xe("ngModel",t.myHeader.location),te(2),xe("ngModel",t.myHeader.socialNetwork),te(2),nt("value",t.btntxt)}}function r4(n,e){if(n&1){let t=Nt();U(0,"div",15),Ce("click",function(){let i=_e(t).$implicit,o=Ne(2);return we(o.editarHeader(i))}),U(1,"p")(2,"strong"),ve(3),B(),ve(4),B()()}if(n&2){let t=e.$implicit;te(3),by(t.name),te(),Cn(" - ",t.goalLife,"")}}function i4(n,e){if(n&1&&(U(0,"div",5),Ct(1,r4,5,2,"div",14),B()),n&2){let t=Ne();te(),nt("ngForOf",t.Header)}}var CN=(()=>{class n{constructor(t){this.headerService=t,this.myHeader=new au,this.Header=[],this.btntxt="AGREGAR",this.selectedHeaderId=null,this.dataLoaded=!1,this.headerService.getHeader().snapshotChanges().pipe(K(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{console.log("LO QUE LLEGA AL HEADER:",r),this.Header=r,this.dataLoaded=!0})}onSubmit(){this.selectedHeaderId?window.confirm("\xBFDESEAS ACTUALIZAR ESTE HEADER?")&&this.headerService.updateHeader(this.selectedHeaderId,this.myHeader).then(()=>{alert("\xA1HEADER ACTUALIZADO!"),this.resetForm()}):window.confirm("\xBFDESEAS AGREGAR ESTE HEADER?")&&this.headerService.createHeader(this.myHeader).then(()=>{alert("\xA1HEADER AGREGADO CORRECTAMENTE!"),this.resetForm()})}resetForm(){this.myHeader=new au,this.selectedHeaderId=null,this.btntxt="AGREGAR"}editarHeader(t){this.myHeader=P({},t),this.selectedHeaderId=t.id??null,this.btntxt="ACTUALIZAR"}static{this.\u0275fac=function(r){return new(r||n)(oe(tN))}}static{this.\u0275cmp=vt({type:n,selectors:[["app-admin-header"]],decls:9,vars:2,consts:[[1,"container","color-dark"],[1,"col"],[1,"container","color-light"],[1,"row"],["class","col-md-6",4,"ngIf"],[1,"col-md-6"],["type","text","placeholder","FULL NAME","name","name",1,"txt",3,"ngModelChange","ngModel"],["type","text","placeholder","LIFE GOAL","name","goalLife",1,"txt",3,"ngModelChange","ngModel"],["type","text","placeholder","PHOTO URL","name","photoUrl",1,"txt",3,"ngModelChange","ngModel"],["type","text","placeholder","EMAIL","name","email",1,"txt",3,"ngModelChange","ngModel"],["type","text","placeholder","PHONE NUMBER","name","phoneNumber",1,"txt",3,"ngModelChange","ngModel"],["type","text","placeholder","LOCATION","name","location",1,"txt",3,"ngModelChange","ngModel"],["type","text","placeholder","SOCIAL NETWORK","name","socialNetwork",1,"txt",3,"ngModelChange","ngModel"],["type","button",1,"btn",3,"click","value"],["class","life-container","style","margin-right: 10px;",3,"click",4,"ngFor","ngForOf"],[1,"life-container",2,"margin-right","10px",3,"click"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p"),ve(3,"HEADER"),B()()(),U(4,"div",2)(5,"div",3),Ct(6,n4,17,8,"div",4),ie(7,"br"),Ct(8,i4,2,1,"div",4),B()()),r&2&&(te(6),nt("ngIf",i.selectedHeaderId),te(2),nt("ngIf",i.dataLoaded&&i.Header.length>0))},dependencies:[en,qb,an,Ot,on,sn,Qt,Kt]})}}return n})();var il=class{constructor(e,t="",r="",i="",o="",s="",a=""){this.id=e,this.startDate=t,this.endDate=r,this.location=i,this.position=o,this.company=s,this.accomplishments=a}};var TN=(()=>{class n{constructor(t){this.db=t,this.dbPath="/work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}createWorkExperience(t){return this.workExperienceRef.add(P({},t))}deleteWorkExperience(t){return this.workExperienceRef.doc(t).delete()}updateWorkExperience(t,r){return this.workExperienceRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(rn))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function s4(n,e){if(n&1){let t=Nt();U(0,"div",13)(1,"p"),ve(2),B(),ie(3,"br"),U(4,"input",14),Ce("click",function(){let i=_e(t).$implicit,o=Ne();return we(o.deleteJob(i.id))}),B(),U(5,"input",15),Ce("click",function(){let i=_e(t).$implicit,o=Ne();return we(o.EditarJob(i))}),B()()}if(n&2){let t=e.$implicit;te(2),Oc("",t.company," - ",t.position,"")}}var bN=(()=>{class n{constructor(t){this.workExperienceService=t,this.itemCount=0,this.btntxt="AGREGAR",this.workExperience=[],this.myWorkExperience=new il,this.selectedJobId=null,this.workExperienceService.getWorkExperience().snapshotChanges().pipe(K(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r})}AgregarJob(){this.selectedJobId?this.workExperienceService.updateWorkExperience(this.selectedJobId,this.myWorkExperience).then(()=>{console.log("REGISTRO ACTUALIZADO EXISTOSAMENTE"),this.resetForm()}).catch(t=>console.log("ERROR AL ACTUALIZAR EL TRABAJO:",t)):this.workExperienceService.createWorkExperience(this.myWorkExperience).then(()=>{console.log("TRABAJO CREADO EXITOSAMENTE"),this.resetForm()}).catch(t=>console.log("ERROR AL AGREGAR EL TRABAJO:",t))}EditarJob(t){confirm(`\xBFDESEAS EDITAR EL TRABAJO EN ${t.company}?`)&&(this.myWorkExperience=P({},t),this.selectedJobId=t.id??null,this.btntxt="ACTUALIZAR")}deleteJob(t){confirm("\xBFESTAS SEGURO DE ELIMINAR ESTE REGISTRO?")&&this.workExperienceService.deleteWorkExperience(t).then(()=>{console.log(" TRABAJO ELIMINADO EXITOSAMENTE")}).catch(r=>console.log("ERROR AL ELIMINAR EL TRABAJO: ",r))}resetForm(){this.myWorkExperience=new il,this.selectedJobId=null,this.btntxt="AGREGAR"}static{this.\u0275fac=function(r){return new(r||n)(oe(TN))}}static{this.\u0275cmp=vt({type:n,selectors:[["app-admin-workexperience"]],decls:24,vars:8,consts:[["workExpForm","ngForm"],[1,"container","color-dark"],[1,"col"],[1,"container","color-light"],[3,"ngSubmit"],["type","text","name","startDate","placeholder","START DATE (mm/yyyy)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","END DATE (mm/yyyy)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","LOCATION (city, country)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","position","placeholder","POSITION",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","company","placeholder","COMPANY",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","accomplishments","placeholder","ACCOMPLISHMENTS",1,"txt",3,"ngModelChange","ngModel"],["type","button",1,"btn",3,"click","value"],["class","life-container",4,"ngFor","ngForOf"],[1,"life-container"],["type","button","value","ELIMINAR",1,"btn",2,"margin-right","10px",3,"click"],["type","button","value","EDITAR",1,"btn",3,"click"]],template:function(r,i){if(r&1){let o=Nt();U(0,"div",1)(1,"div",2)(2,"p"),ve(3,"WORK EXPERIENCE"),B()()(),U(4,"div",3)(5,"div",2)(6,"form",4,0),Ce("ngSubmit",function(){return _e(o),we(i.AgregarJob())}),U(8,"input",5),Re("ngModelChange",function(a){return _e(o),Pe(i.myWorkExperience.startDate,a)||(i.myWorkExperience.startDate=a),we(a)}),B(),ie(9,"br"),U(10,"input",6),Re("ngModelChange",function(a){return _e(o),Pe(i.myWorkExperience.endDate,a)||(i.myWorkExperience.endDate=a),we(a)}),B(),ie(11,"br"),U(12,"input",7),Re("ngModelChange",function(a){return _e(o),Pe(i.myWorkExperience.location,a)||(i.myWorkExperience.location=a),we(a)}),B(),ie(13,"br"),U(14,"input",8),Re("ngModelChange",function(a){return _e(o),Pe(i.myWorkExperience.position,a)||(i.myWorkExperience.position=a),we(a)}),B(),ie(15,"br"),U(16,"input",9),Re("ngModelChange",function(a){return _e(o),Pe(i.myWorkExperience.company,a)||(i.myWorkExperience.company=a),we(a)}),B(),ie(17,"br"),U(18,"input",10),Re("ngModelChange",function(a){return _e(o),Pe(i.myWorkExperience.accomplishments,a)||(i.myWorkExperience.accomplishments=a),we(a)}),B(),ie(19,"br"),U(20,"input",11),Ce("click",function(){return _e(o),we(i.AgregarJob())}),B()()(),ie(21,"br"),U(22,"div",2),Ct(23,s4,6,2,"div",12),B()()}r&2&&(te(8),xe("ngModel",i.myWorkExperience.startDate),te(2),xe("ngModel",i.myWorkExperience.endDate),te(2),xe("ngModel",i.myWorkExperience.location),te(2),xe("ngModel",i.myWorkExperience.position),te(2),xe("ngModel",i.myWorkExperience.company),te(2),xe("ngModel",i.myWorkExperience.accomplishments),te(2),io("value",i.btntxt),te(3),nt("ngForOf",i.workExperience))},dependencies:[en,an,Ot,on,sn,Qt,Kt]})}}return n})();var ol=class{constructor(){this.school="",this.training="",this.licenses=""}};var AN=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Education",this.educationRef=t.collection(this.dbPath)}getEducation(){return this.educationRef}createEducation(t){return this.educationRef.add(P({},t))}deleteEducation(t){return this.educationRef.doc(t).delete()}updateEducation(t,r){return this.educationRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(rn))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function c4(n,e){if(n&1){let t=Nt();U(0,"p",8),ve(1),ie(2,"br")(3,"br"),U(4,"input",9),Ce("click",function(){let i=_e(t).$implicit,o=Ne();return we(o.deleteEducation(i.id))}),B(),U(5,"input",10),Ce("click",function(){let i=_e(t).$implicit,o=Ne();return we(o.EditarEdu(i))}),B()()}if(n&2){let t=e.$implicit;te(),Ay(" ",t.school," - ",t.training," - ",t.licenses," ")}}var SN=(()=>{class n{constructor(t){this.educationService=t,this.btntxt="AGREGAR",this.education=[],this.myEducation=new ol,this.selectedEduId=null,this.educationService.getEducation().snapshotChanges().pipe(K(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.education=r})}AgregarEdu(){this.selectedEduId?confirm("\xBFESTAS SEGURO QUE QUIERES EDITAR ESTA ENTRADA DE EDUCACION?")&&this.educationService.updateEducation(this.selectedEduId,this.myEducation).then(()=>{alert("ACTUALIZADO EXITOSAMENTE"),this.resetForm()}):confirm("\xBFDESEAS AGREGAR ESTA NUEVA ENTRADA DE EDUCACION?")&&this.educationService.createEducation(this.myEducation).then(()=>{alert("SE AGREGO EXISTOSAMENTE"),this.resetForm()})}deleteEducation(t){confirm("\xBFESTAS SEGURO QUE DESEAS ELIMININAR ESTA ENTRADA?")&&this.educationService.deleteEducation(t).then(()=>{console.log("ELIMINADO CORRECTAMENTE")})}EditarEdu(t){confirm(`\xBFESTAS SEGURO DE QUE QUIERES EDITAR ESTA ENTRADA ${t.school}?`)&&(this.myEducation=P({},t),this.selectedEduId=t.id??null,this.btntxt="ACTUALIZAR")}resetForm(){this.myEducation=new ol,this.selectedEduId=null,this.btntxt="AGREGAR"}static{this.\u0275fac=function(r){return new(r||n)(oe(AN))}}static{this.\u0275cmp=vt({type:n,selectors:[["app-admin-education"]],decls:17,vars:5,consts:[[1,"container","color-dark"],[1,"col"],[1,"container","color-light"],["type","text","name","School","placeholder","SCHOOL",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","Training","placeholder","TRAINING",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","licenses","placeholder","LICENSES",1,"txt",3,"ngModelChange","ngModel"],["type","button",1,"btn",3,"click","value"],["class","life-container",4,"ngFor","ngForOf"],[1,"life-container"],["type","button","value","BORRAR",1,"btn",2,"margin-right","10px",3,"click"],["type","button","value","EDITAR",1,"btn",3,"click"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p"),ve(3,"EDUCATION"),B()()(),U(4,"div",2)(5,"div",1)(6,"form")(7,"input",3),Re("ngModelChange",function(s){return Pe(i.myEducation.school,s)||(i.myEducation.school=s),s}),B(),ie(8,"br"),U(9,"input",4),Re("ngModelChange",function(s){return Pe(i.myEducation.training,s)||(i.myEducation.training=s),s}),B(),ie(10,"br"),U(11,"input",5),Re("ngModelChange",function(s){return Pe(i.myEducation.licenses,s)||(i.myEducation.licenses=s),s}),B(),ie(12,"br"),U(13,"input",6),Ce("click",function(){return i.AgregarEdu()}),B()()(),ie(14,"br"),U(15,"div",1),Ct(16,c4,6,3,"p",7),B()()),r&2&&(te(7),xe("ngModel",i.myEducation.school),te(2),xe("ngModel",i.myEducation.training),te(2),xe("ngModel",i.myEducation.licenses),te(2),io("value",i.btntxt),te(3),nt("ngForOf",i.education))},dependencies:[en,an,Ot,on,sn,Qt,Kt]})}}return n})();var sl=class{};var MN=(()=>{class n{constructor(t){this.db=t,this.dbPath="/certificates",this.certificatesRef=t.collection(this.dbPath)}getCertificates(){return this.certificatesRef}createCertificate(t){return this.certificatesRef.add(P({},t))}deleteCertificate(t){return this.certificatesRef.doc(t).delete()}updateCertificate(t,r){return this.certificatesRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(rn))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function l4(n,e){if(n&1){let t=Nt();U(0,"p",7),ve(1),ie(2,"br")(3,"br"),U(4,"input",8),Ce("click",function(){let i=_e(t).$implicit,o=Ne();return we(o.deleteCertificate(i.id))}),B(),U(5,"input",9),Ce("click",function(){let i=_e(t).$implicit,o=Ne();return we(o.EditarCertificate(i))}),B()()}if(n&2){let t=e.$implicit;te(),Oc(" ",t.certificacion," - ",t.institution," ")}}var xN=(()=>{class n{constructor(t){this.certificatesService=t,this.btntxt="AGREGAR",this.certificates=[],this.myCertificate=new sl,this.selectedCertificateId=null,this.certificatesService.getCertificates().snapshotChanges().pipe(K(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r})}AgregarCertificate(){this.selectedCertificateId?confirm("\xBFDESEAS ACTUALIZAR ESTE CERTIFICADO?")&&this.certificatesService.updateCertificate(this.selectedCertificateId,this.myCertificate).then(()=>{this.resetForm()}):confirm("\xBFDESEAS AGREGAR ESTE CERTIFCADO?")&&this.certificatesService.createCertificate(this.myCertificate).then(()=>{this.resetForm()})}deleteCertificate(t){confirm("\xBFSEGURO QUE DESEAS ALIMINAR ESTE CERTIFICADO?")&&this.certificatesService.deleteCertificate(t).then(()=>{console.log("CERTIFICADO ELIMINADO CORRECTAMENTE")})}EditarCertificate(t){this.myCertificate=P({},t),this.selectedCertificateId=t.id??null,this.btntxt="EDITAR"}resetForm(){this.myCertificate=new sl,this.selectedCertificateId=null,this.btntxt="AGREGAR"}static{this.\u0275fac=function(r){return new(r||n)(oe(MN))}}static{this.\u0275cmp=vt({type:n,selectors:[["app-admin-certificates"]],decls:16,vars:4,consts:[[1,"container","color-dark"],[1,"col"],[1,"container","color-light"],["type","text","name","certificateName","placeholder","CERTIFICATES NAME",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","institution","placeholder","INSTITUTION",1,"txt",3,"ngModelChange","ngModel"],["type","button",1,"btn",3,"click","value"],["class","life-container",4,"ngFor","ngForOf"],[1,"life-container"],["type","button","value","BORRAR",1,"btn",2,"margin-right","10px",3,"click"],["type","button","value","EDITAR",1,"btn",3,"click"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p"),ve(3,"CERTIFICATES"),B()()(),U(4,"div",2)(5,"div",1)(6,"form")(7,"input",3),Re("ngModelChange",function(s){return Pe(i.myCertificate.certificacion,s)||(i.myCertificate.certificacion=s),s}),B(),ie(8,"br"),U(9,"input",4),Re("ngModelChange",function(s){return Pe(i.myCertificate.institution,s)||(i.myCertificate.institution=s),s}),B(),ie(10,"br"),U(11,"input",5),Ce("click",function(){return i.AgregarCertificate()}),B(),ie(12,"br"),B()(),ie(13,"br"),U(14,"div",1),Ct(15,l4,6,2,"p",6),B()()),r&2&&(te(7),xe("ngModel",i.myCertificate.certificacion),te(2),xe("ngModel",i.myCertificate.institution),te(2),io("value",i.btntxt),te(4),nt("ngForOf",i.certificates))},dependencies:[en,an,Ot,on,sn,Qt,Kt]})}}return n})();var ka=class{constructor(){this.lenguajes="",this.tecnologias=""}};var RN=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Skills",this.skillsRef=t.collection(this.dbPath)}getSkills(){return this.skillsRef}createSkill(t){return this.skillsRef.add(P({},t))}updateSkill(t,r){return this.skillsRef.doc(t).update(r)}deleteSkill(t){return this.skillsRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(rn))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function h4(n,e){if(n&1){let t=Nt();U(0,"p",7),ie(1,"br"),U(2,"strong"),ve(3,"LENGUAJES:"),B(),ve(4),ie(5,"br"),U(6,"strong"),ve(7,"TECNOLOGIAS:"),B(),ve(8),ie(9,"br")(10,"br"),U(11,"input",8),Ce("click",function(){let i=_e(t).$implicit,o=Ne();return we(o.editarSkill(i))}),B(),U(12,"input",9),Ce("click",function(){let i=_e(t).$implicit,o=Ne();return we(o.deleteSkill(i.id))}),B()()}if(n&2){let t=e.$implicit;te(4),Cn(" ",t.lenguajes," "),te(4),Cn(" ",t.tecnologias," ")}}var NN=(()=>{class n{constructor(t){this.skillsService=t,this.skills=[],this.mySkill=new ka,this.selectedSkillId=null,this.btntxt="AGREGAR",this.skillsService.getSkills().snapshotChanges().pipe(K(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r})}agregarSkill(){this.selectedSkillId?confirm("\xBFDESEAS EDITAR ESTA HABILIDAD?")&&this.skillsService.updateSkill(this.selectedSkillId,this.mySkill).then(()=>{this.mySkill=new ka,this.btntxt="AGREGAR",this.selectedSkillId=null}):this.skillsService.createSkill(this.mySkill).then(()=>{this.mySkill=new ka})}editarSkill(t){confirm("\xBFDESEAR CARGAR ESTA HABILIDAD PARA EDITAR?")&&(this.mySkill=P({},t),this.selectedSkillId=t.id,this.btntxt="EDITAR")}deleteSkill(t){confirm("\xBFDESEAS ELIMINAR ESTA HABILIDAD?")&&this.skillsService.deleteSkill(t)}static{this.\u0275fac=function(r){return new(r||n)(oe(RN))}}static{this.\u0275cmp=vt({type:n,selectors:[["app-admin-skills"]],decls:13,vars:4,consts:[[1,"container","color-dark"],[1,"col"],[1,"container","color-light"],["type","text","placeholder","LENGUAJES","name","lenguajes",1,"txt",3,"ngModelChange","ngModel"],["type","text","placeholder","TECNOLOGIAS","name","tecnologias",1,"txt",3,"ngModelChange","ngModel"],["type","button",1,"btn",3,"click","value"],["class","life-container",4,"ngFor","ngForOf"],[1,"life-container"],["type","button","value","EDITAR",1,"btn",2,"margin-right","10px",3,"click"],["type","button","value","ELIMINAR",1,"btn",3,"click"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p"),ve(3,"SKILLS"),B()()(),U(4,"div",2)(5,"div",1)(6,"form")(7,"input",3),Re("ngModelChange",function(s){return Pe(i.mySkill.lenguajes,s)||(i.mySkill.lenguajes=s),s}),B(),U(8,"input",4),Re("ngModelChange",function(s){return Pe(i.mySkill.tecnologias,s)||(i.mySkill.tecnologias=s),s}),B(),U(9,"input",5),Ce("click",function(){return i.agregarSkill()}),B()()(),ie(10,"br"),U(11,"div",1),Ct(12,h4,13,2,"p",6),B()()),r&2&&(te(7),xe("ngModel",i.mySkill.lenguajes),te(),xe("ngModel",i.mySkill.tecnologias),te(),nt("value",i.btntxt),te(3),nt("ngForOf",i.skills))},dependencies:[en,an,Ot,on,sn,Qt,Kt]})}}return n})();var Oa=class{constructor(){this.id="",this.idiomas="",this.nivel=""}};var PN=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Languages",this.languagesRef=t.collection(this.dbPath)}getLanguages(){return this.languagesRef}createLanguage(t){return this.languagesRef.add(P({},t))}updateLanguage(t,r){return this.languagesRef.doc(t).update(r)}deleteLanguage(t){return this.languagesRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(rn))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function p4(n,e){if(n&1){let t=Nt();U(0,"p",7),ie(1,"br"),U(2,"strong"),ve(3,"IDIOMA:"),B(),ve(4),ie(5,"br"),U(6,"strong"),ve(7,"NIVEL:"),B(),ve(8),ie(9,"br")(10,"br"),U(11,"input",8),Ce("click",function(){let i=_e(t).$implicit,o=Ne();return we(o.editarLanguage(i))}),B(),U(12,"input",9),Ce("click",function(){let i=_e(t).$implicit,o=Ne();return we(o.deleteLanguage(i.id))}),B()()}if(n&2){let t=e.$implicit;te(4),Cn(" ",t.idiomas," "),te(4),Cn(" ",t.nivel," ")}}var kN=(()=>{class n{constructor(t){this.languagesService=t,this.languages=[],this.myLanguage=new Oa,this.selectedLangId=null,this.btntxt="AGREGAR",this.languagesService.getLanguages().snapshotChanges().pipe(K(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.languages=r})}agregarLanguage(){this.selectedLangId?confirm("\xBFDESEAS EDITAR ESTE IDIOMA?")&&this.languagesService.updateLanguage(this.selectedLangId,this.myLanguage).then(()=>{this.myLanguage=new Oa,this.btntxt="AGREGAR",this.selectedLangId=null}):this.languagesService.createLanguage(this.myLanguage).then(()=>{this.myLanguage=new Oa})}editarLanguage(t){confirm("\xBFDESEAR CARGAR ESTE IDIOMA PARA EDITAR?")&&(this.myLanguage=P({},t),this.selectedLangId=t.id,this.btntxt="EDITAR")}deleteLanguage(t){confirm("\xBFDESEAS ELIMINAR ESTE IDIOMA?")&&this.languagesService.deleteLanguage(t)}static{this.\u0275fac=function(r){return new(r||n)(oe(PN))}}static{this.\u0275cmp=vt({type:n,selectors:[["app-admin-languages"]],decls:13,vars:4,consts:[[1,"container","color-dark"],[1,"col"],[1,"container","color-light"],["type","text","placeholder","IDIOMA","name","idiomas",1,"txt",3,"ngModelChange","ngModel"],["type","text","placeholder","NIVEL","name","nivel",1,"txt",3,"ngModelChange","ngModel"],["type","button",1,"btn",3,"click","value"],["class","life-container",4,"ngFor","ngForOf"],[1,"life-container"],["type","button","value","EDITAR",1,"btn",2,"margin-right","10px",3,"click"],["type","button","value","ELIMINAR",1,"btn",3,"click"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p"),ve(3,"LANGUAGES"),B()()(),U(4,"div",2)(5,"div",1)(6,"form")(7,"input",3),Re("ngModelChange",function(s){return Pe(i.myLanguage.idiomas,s)||(i.myLanguage.idiomas=s),s}),B(),U(8,"input",4),Re("ngModelChange",function(s){return Pe(i.myLanguage.nivel,s)||(i.myLanguage.nivel=s),s}),B(),U(9,"input",5),Ce("click",function(){return i.agregarLanguage()}),B()()(),ie(10,"br"),U(11,"div",1),Ct(12,p4,13,2,"p",6),B()()),r&2&&(te(7),xe("ngModel",i.myLanguage.idiomas),te(),xe("ngModel",i.myLanguage.nivel),te(),nt("value",i.btntxt),te(3),nt("ngForOf",i.languages))},dependencies:[en,an,Ot,on,sn,Qt,Kt]})}}return n})();var Fa=class{constructor(){this.interes=""}};var ON=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Interests",this.interestsRef=t.collection(this.dbPath)}getInterests(){return this.interestsRef}createInterest(t){return this.interestsRef.add(P({},t))}updateInterest(t,r){return this.interestsRef.doc(t).update(r)}deleteInterest(t){return this.interestsRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(rn))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function m4(n,e){if(n&1){let t=Nt();U(0,"p",6),ie(1,"br"),ve(2),ie(3,"br")(4,"br"),U(5,"input",7),Ce("click",function(){let i=_e(t).$implicit,o=Ne();return we(o.editarInterest(i))}),B(),U(6,"input",8),Ce("click",function(){let i=_e(t).$implicit,o=Ne();return we(o.deleteInterest(i.id))}),B()()}if(n&2){let t=e.$implicit;te(2),Cn(" ",t.interes," ")}}var FN=(()=>{class n{constructor(t){this.interestsService=t,this.interests=[],this.myInterest=new Fa,this.selectedInterestId=null,this.btntxt="AGREGAR",this.interestsService.getInterests().snapshotChanges().pipe(K(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interests=r})}agregarInterest(){this.selectedInterestId?confirm("\xBFDESEAS EDITAR ESTE INTERES?")&&this.interestsService.updateInterest(this.selectedInterestId,this.myInterest).then(()=>{this.myInterest=new Fa,this.btntxt="AGREGAR",this.selectedInterestId=null}):this.interestsService.createInterest(this.myInterest).then(()=>{this.myInterest=new Fa})}editarInterest(t){confirm("\xBFDESEAS CARGAR ESTE INTERES PARA EDITAR?")&&(this.myInterest=P({},t),this.selectedInterestId=t.id,this.btntxt="EDITAR")}deleteInterest(t){confirm("\xBFDESEAS ELIMINAR ESTE INTERES?")&&this.interestsService.deleteInterest(t)}static{this.\u0275fac=function(r){return new(r||n)(oe(ON))}}static{this.\u0275cmp=vt({type:n,selectors:[["app-admin-interests"]],decls:13,vars:3,consts:[[1,"container","color-dark"],[1,"col"],[1,"container","color-light"],["rows","5","cols","40","placeholder","DESCRIBE TU INTERES","name","interes",1,"txt",3,"ngModelChange","ngModel"],["type","button",1,"btn",3,"click","value"],["class","life-container",4,"ngFor","ngForOf"],[1,"life-container"],["type","button","value","EDITAR",1,"btn",2,"margin-right","10px",3,"click"],["type","button","value","ELIMINAR",1,"btn",3,"click"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p"),ve(3,"INTERESTS"),B()()(),U(4,"div",2)(5,"div",1)(6,"form")(7,"textarea",3),Re("ngModelChange",function(s){return Pe(i.myInterest.interes,s)||(i.myInterest.interes=s),s}),B(),ie(8,"br"),U(9,"input",4),Ce("click",function(){return i.agregarInterest()}),B()()(),ie(10,"br"),U(11,"div",1),Ct(12,m4,7,1,"p",5),B()()),r&2&&(te(7),xe("ngModel",i.myInterest.interes),te(2),nt("value",i.btntxt),te(3),nt("ngForOf",i.interests))},dependencies:[en,an,Ot,on,sn,Qt,Kt]})}}return n})();var y4=[{path:"header",component:CN},{path:"workexperience",component:bN},{path:"education",component:SN},{path:"certificates",component:xN},{path:"skills",component:NN},{path:"languages",component:kN},{path:"interests",component:FN}],VN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=_t({type:n})}static{this.\u0275inj=yt({imports:[Fv.forRoot(y4),Fv]})}}return n})();var LN=(()=>{class n{constructor(){this.title="admin-cv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=vt({type:n,selectors:[["app-root"]],decls:31,vars:0,consts:[["routerLink","/header"],["routerLink","/workexperience"],["routerLink","/education"],["routerLink","/certificates"],["routerLink","/skills"],["routerLink","/languages"],["routerLink","/interests"]],template:function(r,i){r&1&&(U(0,"h3")(1,"b"),ve(2," ADMIN CV APP"),B()(),ie(3,"br")(4,"br"),U(5,"nav")(6,"ul")(7,"li")(8,"a",0),ve(9," HEADER "),B()(),U(10,"li")(11,"a",1),ve(12," WORK EXPERIENCE "),B()(),U(13,"li")(14,"a",2),ve(15," EDUACTION "),B()(),U(16,"li")(17,"a",3),ve(18," CERTIFICATES "),B()(),U(19,"li")(20,"a",4),ve(21," SKILLS "),B()(),U(22,"li")(23,"a",5),ve(24," LANGUAGES "),B()(),U(25,"li")(26,"a",6),ve(27," INTERESTS "),B()()()(),ie(28,"br")(29,"br")(30,"router-outlet"))},dependencies:[xv,tS]})}}return n})();var jN={production:!1,firebaseConfig:{apiKey:"AIzaSyCt8-P24TAy1OOKK1a3BbADfG146AnNDLQ",authDomain:"sinoe-ruiz.firebaseapp.com",projectId:"sinoe-ruiz",storageBucket:"sinoe-ruiz.firebasestorage.app",messagingSenderId:"922018337163",appId:"1:922018337163:web:69cba63cd34a975bd29f8e"}};var UN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=_t({type:n,bootstrap:[LN]})}static{this.\u0275inj=yt({providers:[hA()],imports:[lA,VN,DN,wS.initializeApp(jN.firebaseConfig)]})}}return n})();uA().bootstrapModule(UN,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
